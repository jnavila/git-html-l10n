<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.12"/>
<title>git-fast-import(1)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="manpage">
<div id="header">
<h1>git-fast-import(1) Manual Page</h1>
<h2 id="_nom">NOM</h2>
<div class="sectionbody">
<p>git-fast-import - moteur pour les importateurs de données Git rapides</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content">frontal | <em>git fast-import</em> [&lt;options&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ce programme n&#8217;est généralement pas ce que l&#8217;utilisateur final veut exécuter directement. La plupart des utilisateurs finaux veulent utiliser l&#8217;un des programmes frontaux existants, qui analyse un type spécifique de source étrangère et alimente le contenu stocké dans <em>git fast-import</em>.</p>
</div>
<div class="paragraph">
<p>fast-import lit un flux mixte de commandes/données depuis l&#8217;entrée standard et écrit un ou plusieurs fichers paquets directement dans le dépôt actuel. Lorsque EOF est reçu sur l&#8217;entrée standard, fast-import écrit les refs de branches et d&#8217;étiquettes mis à jour, mettant ainsi à jour le dépôt actuel avec les données nouvellement importées.</p>
</div>
<div class="paragraph">
<p>Le backend fast-import lui-même peut importer dans un dépôt vide (un dépôt qui a déjà été initialisé par <em>git init</em>) ou mettre à jour de manière incrémentielle un dépôt existant peuplé. Le fait que les importations incrémentales soient supportées ou non à partir d&#8217;une source étrangère particulière dépend du programme frontal utilisé.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">--force</dt>
<dd>
<p>Forcer la mise à jour des branches existantes modifiées, même si cela entraîne la perte de commits (car le nouveau commit ne contient pas l&#8217;ancien).</p>
</dd>
<dt class="hdlist1">--quiet</dt>
<dd>
<p>Désactiver la sortie affichée par --stats, rendant fast-import habituellement silencieux quand il est réussi. Cependant, si le flux d&#8217;importation a des directives destinées à montrer la sortie utilisateur (par exemple les directives <code>progress</code>), les messages correspondants seront toujours affichés.</p>
</dd>
<dt class="hdlist1">--stats</dt>
<dd>
<p>Afficher quelques statistiques de base sur les objets que fast-import a créés, les fichiers paquets dans lesquels ils ont été stockés, et la mémoire utilisée par fast-import pendant cette exécution. L&#8217;affichage de cette sortie est actuellement la valeur par défaut, mais peut être désactivé avec --quiet.</p>
</dd>
<dt class="hdlist1">--allow-unsafe-features</dt>
<dd>
<p>De nombreuses options de ligne de commande peuvent être fournies dans le flux de fast-import lui-même en utilisant les commandes <code>feature</code> ou <code>option</code>. Cependant, certaines de ces options ne sont pas sûres (par exemple, permettre à fast-import d&#8217;accéder au système de fichiers en dehors du dépôt). Ces options sont désactivées par défaut, mais peuvent être autorisées en fournissant cette option sur la ligne de commande. Ceci n&#8217;affecte actuellement que les commandes <code>export-marks</code>, <code>import-marks</code>, et <code>import-marks-if-exists</code>.</p>
<div class="literalblock">
<div class="content">
<pre>N'activez cette option que si vous faites confiance au programme qui génère le flux d'importation rapide ! Cette option est activée automatiquement pour les assistants à distance qui utilisent la capacité `import`, car ils sont déjà autorisés à exécuter leur propre code.</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_options_pour_les_frontaux">Options pour les frontaux</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--cat-blob-fd=&lt;df&gt;</dt>
<dd>
<p>Écrire les réponses aux requêtes <code>get-mark</code>, <code>cat-blob</code>, et <code>ls</code> dans le descripteur de fichier &lt;df&gt; au lieu de <code>stdout</code>. Permet à la sortie <code>progress</code> destinée à l&#8217;utilisateur final d&#8217;être séparée des autres sorties.</p>
</dd>
<dt class="hdlist1">--date-format=&lt;fmt&gt;</dt>
<dd>
<p>Spécifier le type de dates que le fronal fournira à l&#8217;importation rapide dans les commandes <code>author</code>, <code>committer</code> et <code>tagger</code>. Voir « Formats » de date" ci-dessous pour plus de détails sur les formats pris en charge et leur syntaxe.</p>
</dd>
<dt class="hdlist1">--done</dt>
<dd>
<p>Terminer avec une erreur s&#8217;il n&#8217;y a pas de commande <code>done</code> à la fin du flux. Cette option peut être utile pour détecter les erreurs qui font que le frontal se termine avant d&#8217;avoir commencé à écrire un flux.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_emplacement_des_fichiers_de_marques">Emplacement des fichiers de marques</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--export-marks=&lt;fichier&gt;</dt>
<dd>
<p>Décharger la table interne des marques dans un fichier, une fois terminé. Les marques sont écrites une par ligne comme <code>:markid SHA-1</code>. Les frontaux peuvent utiliser ce fichier pour valider les importations après qu&#8217;elles aient été complétées, ou pour sauvegarder la table des marques à travers des exécutions incrémentales. Comme &lt;fichier&gt; n&#8217;est ouvert et tronqué qu&#8217;au point de contrôle (ou à la fin de l&#8217;opération), le même chemin peut aussi être donné sans risque à --import-marks.</p>
</dd>
<dt class="hdlist1">--import-marks=&lt;fichier&gt;</dt>
<dd>
<p>Avant de traiter toute entrée, charger les marques spécifiées dans &lt;fichier&gt; Le fichier d&#8217;entrée doit exister, doit être lisible, et doit utiliser le même format que celui produit par --export-marks. Plusieurs options peuvent être fournies pour importer plus d&#8217;un ensemble de marques. Si une marque est définie à des valeurs différentes, le dernier fichier l&#8217;emporte.</p>
</dd>
<dt class="hdlist1">--import-marks-if-exists=&lt;fichier&gt;</dt>
<dd>
<p>Comme --import-marks mais au lieu de faire une erreur, ignore silencieusement le fichier s’il n’existe pas.</p>
</dd>
<dt class="hdlist1">--[no-]relative-marks</dt>
<dd>
<p>Après avoir spécifié --relative-marks, les chemins spécifiés avec --import-marks= et --export-marks= sont relatifs à un répertoire interne du dépôt actuel. Dans git-fast-import, cela signifie que les chemins sont relatifs au répertoire .git/info/fast-import. Cependant, d&#8217;autres importateurs peuvent utiliser un emplacement différent.</p>
<div class="paragraph">
<p>Les marques relatives et non relatives peuvent être combinées en entremêlant --(no-)-relative-marks avec les options --(import|export)-marks=.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_réécriture_de_sous_module">Réécriture de sous-module</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--rewrite-submodules-from=&lt;nom&gt;:&lt;fichier&gt;</dt>
<dt class="hdlist1">--rewrite-submodules-to=&lt;nom&gt;:&lt;fichier&gt;</dt>
<dd>
<p>Réécrire les identifiants d&#8217;objets pour le sous-module spécifié par &lt;nom&gt; à partir des valeurs utilisées dans le fichier source (from) &lt;fichier&gt; vers celles utilisées dans le fichier cible (to) &lt;fichier&gt;. Les marques from devraient avoir été créées par <code>git fast-export</code>, et les marques cibles devraient avoir été créées par <code>git fast-import</code> lors de l&#8217;importation de ce même sous-module.</p>
<div class="paragraph">
<p>&lt;nom&gt; peut être toute chaîne arbitraire ne contenant pas de caractère deux-points, mais la même valeur doit être utilisée avec les deux options lors de la spécification des marques correspondantes. Plusieurs sous-modules peuvent être spécifiés avec des valeurs différentes pour &lt;nom&gt;. C&#8217;est une erreur de ne pas utiliser ces options dans les paires correspondantes.</p>
</div>
<div class="paragraph">
<p>Ces options sont principalement utiles lors de la conversion d&#8217;un dépôt d&#8217;un algorithme de hachage à un autre ; sans elles, fast-import échouera s&#8217;il rencontre un sous-module car il n&#8217;a aucun moyen d&#8217;écrire l&#8217;ID de l&#8217;objet dans le nouvel algorithme de hachage.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_réglage_des_performances_et_de_la_compression">Réglage des performances et de la compression</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--active-branches=&lt;n&gt;</dt>
<dd>
<p>Nombre maximal de branches à maintenir actives en même temps. Voir "Utilisation de la mémoire'' ci-dessous pour plus de détails. La valeur par défaut est 5.</p>
</dd>
<dt class="hdlist1">--big-file-threshold=&lt;n&gt;</dt>
<dd>
<p>Taille maximale d&#8217;un blob pour lequel fast-import tentera de créer un delta, exprimée en octets. La valeur par défaut est 512m (512 MiO). Certains importateurs peuvent souhaiter réduire cette valeur sur les systèmes dont la mémoire est limitée.</p>
</dd>
<dt class="hdlist1">--depth=&lt;n&gt;</dt>
<dd>
<p>Profondeur delta maximale, pour la deltification des blobs et des arbres. La valeur par défaut est 50.</p>
</dd>
<dt class="hdlist1">--export-pack-edges=&lt;fichier&gt;</dt>
<dd>
<p>Après la création d&#8217;un fichier paquet, ajouter une ligne de données dans &lt;fichier&gt; listant le nom de fichier du fichier paquet et le dernier commit sur chaque branche qui a été écrit dans ce fichier paquet. Ces informations peuvent être utiles après l&#8217;importation de projets dont le jeu d&#8217;objets total dépasse la limite de 4 GiO du fichier de paquet, car ces commits peuvent être utilisés comme points de bord pendant les appels à <em>git pack-objects</em>.</p>
</dd>
<dt class="hdlist1">--max-pack-size=&lt;n&gt;</dt>
<dd>
<p>Taille maximale de chaque fichier paquet de sortie. La valeur par défaut est illimitée.</p>
</dd>
<dt class="hdlist1">fastimport.unpackLimit</dt>
<dd>
<p>Voir <a href="git-config.html">git-config(1)</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">PERFORMANCE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La conception de fast-import lui permet d’importer de grands projets dans un minimum d’utilisation de la mémoire et de temps de traitement. En supposant que le frontal est capable de suivre fast-import et de lui fournir un flux constant de données, les importations pour les projets contenant plus de 10 ans d’histoire et contenant plus de 100 000 commits individuels sont généralement réalisées en seulement 1 à 2 heures sur du matériel assez modeste (~ 2 000 USD).</p>
</div>
<div class="paragraph">
<p>La plupart des goulets d&#8217;étranglement semblent se situer au niveau de l&#8217;accès aux données de la source étrangère (la source ne peut tout simplement pas extraire les révisions assez rapidement) ou de l&#8217;E/S du disque (l&#8217;importation rapide écrit aussi vite que le disque peut prendre les données). Les importations s&#8217;exécuteront plus rapidement si les données sources sont stockées sur un lecteur différent de celui du dépôt Git de destination (en raison d&#8217;une moindre contention des entrées/sorties).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coût_de_développement">COÛT DE DÉVELOPPEMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un frontal typique pour l&#8217;importation rapide a tendance à peser environ 200 lignes de code Perl/Python/Ruby. La plupart des développeurs ont pu créer des importateurs fonctionnels en quelques heures seulement, même s&#8217;il s&#8217;agit de leur première exposition à l&#8217;importation rapide, et parfois même à Git. C&#8217;est une situation idéale, étant donné que la plupart des outils de conversion sont jetables (à utiliser une fois, et ne jamais regarder en arrière).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fonctionnement_en_parallèle">FONCTIONNEMENT EN PARALLÈLE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comme pour <em>git push</em> ou <em>git fetch</em>, les importations gérées par fast-import peuvent être exécutées en toute sécurité parallèlement à des invocations parallèles de <code>git repack -a -d</code> ou <code>git gc</code>, ou à toute autre opération Git (y compris <em>git prune</em> , car les objets libres ne sont jamais utilisés par fast-import).</p>
</div>
<div class="paragraph">
<p>fast-import ne verrouille pas les refs de branches ou d&#8217;étiquettes qu&#8217;il est en train d&#8217;importer. Après l&#8217;importation, pendant sa phase de mise à jour des références, fast-import teste chaque référence de branche existante pour vérifier que la mise à jour sera une mise à jour en avance rapide (le commit stocké dans la référence est contenu dans le nouvel historique du commit à écrire). Si la mise à jour n&#8217;est pas une mise à jour en avance rapide, fast-import ne mettra pas à jour cette référence et affichera un message d&#8217;avertissement. fast-import essaiera toujours de mettre à jour toutes les références de branche, et ne s&#8217;arrêtera pas au premier échec.</p>
</div>
<div class="paragraph">
<p>Les mises à jour de branche peuvent être forcées avec --force, mais il est recommandé de ne l&#8217;utiliser que sur un dépôt autrement calme. L&#8217;utilisation de --force n&#8217;est pas nécessaire pour une importation initiale dans un dépôt vide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discussion_technique">DISCUSSION TECHNIQUE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>fast-import suit un ensemble de branches en mémoire. Chaque branche peut être créée ou modifiée à tout moment pendant le processus d&#8217;importation en envoyant une commande <code>commit</code> sur le flux d&#8217;entrée. Cette conception permet à un programme frontal de traiter un nombre illimité de branches simultanément, en générant des commits dans l&#8217;ordre où ils sont disponibles dans les données sources. Elle simplifie aussi considérablement les programmes frontaux.</p>
</div>
<div class="paragraph">
<p>fast-import n&#8217;utilise pas et ne modifie pas le répertoire de travail actuel, ni aucun fichier qui s&#8217;y trouve. (Il met cependant à jour le dépôt Git actuel, comme référencé par <code>GIT_DIR</code>). Par conséquent, un frontal d&#8217;importation peut utiliser le répertoire de travail pour ses propres besoins, comme l&#8217;extraction des révisions de fichiers de la source étrangère. Cette ignorance du répertoire de travail permet également à fast-import de s&#8217;exécuter très rapidement, car il n&#8217;a pas besoin d&#8217;effectuer de coûteuses opérations de mise à jour de fichiers lorsqu&#8217;il passe d&#8217;une branche à l&#8217;autre.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_format_dentrée">FORMAT D&#8217;ENTRÉE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>À l&#8217;exception des données de fichiers brutes (que Git n&#8217;interprète pas), le format d&#8217;entrée de l&#8217;importation rapide est basé sur le texte (ASCII). Ce format texte simplifie le développement et le débogage des programmes frontaux, en particulier lorsqu&#8217;un langage de plus haut niveau tel que Perl, Python ou Ruby est utilisé.</p>
</div>
<div class="paragraph">
<p>fast-import est très strict sur ses entrées. Lorsque nous disons SP ci-dessous, nous voulons dire <strong>exactement</strong> un espace. De même, LF signifie un (et un seul) saut de ligne et HT une (et une seule) tabulation horizontale. Fournir des caractères d&#8217;espacement supplémentaires provoquera des résultats inattendus, tels que des noms de branches ou des noms de fichiers avec des espaces en tête ou en queue de liste dans leur nom, ou la fin prématurée de fast-import lorsqu&#8217;il rencontre une entrée inattendue.</p>
</div>
<div class="sect2">
<h3 id="_commentaires_dans_le_flux">Commentaires dans le flux</h3>
<div class="paragraph">
<p>Pour aider à déboguer les frontaux, fast-import ignore toute ligne commençant par <code>#</code> (ASCII dièse/hash) jusqu&#8217;à et y compris la ligne se terminant par <code>LF</code>. Une ligne de commentaire peut contenir n&#8217;importe quelle séquence d&#8217;octets qui ne contient pas de LF et peut donc être utilisée pour inclure toute information de débogage détaillée qui pourrait être spécifique au frontal et utile lors de l&#8217;inspection d&#8217;un flux de données d&#8217;importation rapide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_formats_de_date">Formats de date</h3>
<div class="paragraph">
<p>Les formats de date suivants sont supportés. Un frontal doit sélectionner le format qu&#8217;il utilisera pour cette importation en passant le nom du format dans l&#8217;option de ligne de commande --date-format=&lt;fmt&gt;.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>raw</code></dt>
<dd>
<p>Il s&#8217;agit du format natif de Git et correspond à <code>&lt;temps&gt; ; SP &lt;décalage utc&gt;</code>. C&#8217;est également le format par défaut de fast-import, si --date-format n&#8217;a pas été spécifié.</p>
<div class="paragraph">
<p>L&#8217;heure de l&#8217;événement est spécifiée par <code>&lt;temps&gt;</code> comme le nombre de secondes depuis l&#8217;époque UNIX (minuit, 1er janvier 1970, UTC) et est écrite comme un entier décimal ASCII.</p>
</div>
<div class="paragraph">
<p>Le décalage local est spécifié par <code>&lt;décalage utc&gt;</code> comme un décalage positif ou négatif par rapport à UTC. Par exemple, EST (qui est 5 heures derrière UTC) sera exprimé en <code>&lt;tz&gt;</code> par <code>-0500'' alors que UTC est `</code>+0000''. Le décalage local n&#8217;affecte pas <code>&lt;temps&gt;</code> il n&#8217;est utilisé que comme une indication pour aider les routines de formatage à afficher l&#8217;horodatage.</p>
</div>
<div class="paragraph">
<p>Si le décalage local n&#8217;est pas disponible dans le matériel source, utiliser &#8220;+0000&#8221;, ou le décalage local le plus courant. Par exemple, de nombreuses organisations ont un dépôt CVS qui n&#8217;a jamais été consulté que par des utilisateurs situés au même endroit et dans le même fuseau horaire. Dans ce cas, on peut inférer un décalage raisonnable par rapport à UTC.</p>
</div>
<div class="paragraph">
<p>Contrairement au format <code>rfc2822</code>, ce format est très strict. Toute variation dans le formatage entraînera le rejet de la valeur par fast-import, et certains contrôles d&#8217;intégrité des valeurs numériques peuvent également être effectués.</p>
</div>
</dd>
<dt class="hdlist1"><code>raw-permissive</code></dt>
<dd>
<p>C&#8217;est la même chose que <code>raw</code>, sauf qu&#8217;aucun contrôle d&#8217;authenticité sur l&#8217;époque numérique et le décalage local n&#8217;est effectué. Cela peut être utile lorsque vous essayez de filtrer ou d&#8217;importer un historique existant avec, par exemple, des valeurs de fuseau horaire erronées.</p>
</dd>
<dt class="hdlist1"><code>rfc2822</code></dt>
<dd>
<p>C&#8217;est le standard de format des courriels tel que décrit par la RFC 2822.</p>
<div class="paragraph">
<p>Un exemple de valeur est &#8220;Tue Feb 6 11:22:18 2007 -0500&#8221;. L&#8217;analyseur syntaxique de Git est précis, mais un peu trop indulgent. Il s&#8217;agit du même analyseur que celui utilisé par <em>git am</em> lors de l&#8217;application de rustines reçues par courrier électronique.</p>
</div>
<div class="paragraph">
<p>Certaines chaînes malformées peuvent être acceptées comme des dates valides. Dans certains de ces cas, Git sera toujours capable d&#8217;obtenir la date correcte à partir de la chaîne malformée. Il existe également certains types de chaînes malformées que Git analysera de manière erronée, tout en les considérant comme valides. Les chaînes lourdement malformées seront rejetées.</p>
</div>
<div class="paragraph">
<p>Contrairement au format <code>raw</code> ci-dessus, les informations relatives au fuseau horaire et au décalage UTC contenues dans une chaîne de date RFC 2822 sont utilisées pour ajuster la valeur de la date à l&#8217;UTC avant le stockage. Il est donc important que ces informations soient aussi précises que possible.</p>
</div>
<div class="paragraph">
<p>Si le matériel source utilise des dates de type RFC 2822, le frontal devrait laisser fast-import gérer l&#8217;analyse et la conversion (plutôt que d&#8217;essayer de le faire lui-même) car l&#8217;analyseur de Git a été bien testé sur le terrain.</p>
</div>
<div class="paragraph">
<p>Les frontends devraient préférer le format <code>raw</code> si le matériel source utilise déjà le format UNIX-epoch, si on peut l&#8217;amener à donner les dates dans ce format, ou si son format est facilement convertible en ce format, car il n&#8217;y a pas d&#8217;ambiguïté dans l&#8217;analyse.</p>
</div>
</dd>
<dt class="hdlist1"><code>now</code></dt>
<dd>
<p>Utiliser toujours l&#8217;heure et le fuseau horaire actuels. Le littéral <code>now</code> doit toujours être fourni pour <code>&lt;quand&gt;</code>.</p>
<div class="paragraph">
<p>Il s&#8217;agit d&#8217;un format jouet. L&#8217;heure et le fuseau horaire actuels de ce système sont toujours copiés dans la chaîne d&#8217;identité au moment où elle est créée par fast-import. Il n&#8217;y a aucun moyen de spécifier une heure ou un fuseau horaire différent.</p>
</div>
<div class="paragraph">
<p>Ce format particulier est fourni car il est court à mettre en œuvre et peut être utile à un processus qui veut créer un nouveau commit tout de suite, sans avoir besoin d&#8217;utiliser un répertoire de travail ou <em>git update-index</em>.</p>
</div>
<div class="paragraph">
<p>Si des commandes <code>author</code> et <code>committer</code> distinctes sont utilisées dans un <code>commit</code>, les horodatages peuvent ne pas correspondre, car l&#8217;horloge du système sera interrogée deux fois (une fois pour chaque commande). La seule façon de s&#8217;assurer que les informations d&#8217;identité de l&#8217;auteur et du validateur ont le même horodatage est d&#8217;omettre <code>author</code> (en copiant donc à partir de <code>committer</code>) ou d&#8217;utiliser un format de date autre que <code>now</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_commandes">Commandes</h3>
<div class="paragraph">
<p>fast-import accepte plusieurs commandes pour mettre à jour le dépôt actuel et contrôler le processus d&#8217;importation en cours. Une discussion plus détaillée (avec des exemples) de chaque commande suit plus bas.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>commit</code></dt>
<dd>
<p>Crée une nouvelle branche ou met à jour une branche existante en créant un nouveau commit et en mettant à jour la branche pour qu&#8217;elle pointe sur le commit nouvellement créé.</p>
</dd>
<dt class="hdlist1"><code>tag</code></dt>
<dd>
<p>Crée un objet étiquette annoté à partir d&#8217;un commit ou d&#8217;une branche existante. Les étiquettes légères ne sont pas prises en charge par cette commande, car elles ne sont pas recommandées pour enregistrer des points significatifs dans le temps.</p>
</dd>
<dt class="hdlist1"><code>reset</code></dt>
<dd>
<p>Réinitialise une branche existante (ou une nouvelle branche) à une révision spécifique. Cette commande doit être utilisée pour changer une branche à une révision spécifique sans faire un commit sur celle-ci.</p>
</dd>
<dt class="hdlist1"><code>blob</code></dt>
<dd>
<p>Convertit les données brutes du fichier en un blob, pour une utilisation future dans une commande <code>commit</code>. Cette commande est facultative et n&#8217;est pas nécessaire pour effectuer une importation.</p>
</dd>
<dt class="hdlist1"><code>alias</code></dt>
<dd>
<p>Enregistrer qu&#8217;une marque se réfère à un objet donné sans créer d&#8217;abord un nouvel objet. Utiliser --import-marks et se référer à des marques manquantes fera échouer l&#8217;importation rapide, donc les alias peuvent fournir un moyen de définir des commits autrement élagués à une valeur valide (par exemple, l&#8217;ancêtre non élagué le plus proche).</p>
</dd>
<dt class="hdlist1"><code>checkpoint</code></dt>
<dd>
<p>Force fast-import à fermer le fichier paquet actuel, à générer sa somme de contrôle SHA-1 unique et son index, et à démarrer un nouveau fichier paquet. Cette commande est facultative et n&#8217;est pas nécessaire pour effectuer une importation.</p>
</dd>
<dt class="hdlist1"><code>progress</code></dt>
<dd>
<p>Permet à fast-import de renvoyer la ligne entière vers sa propre sortie standard. Cette commande est facultative et n&#8217;est pas nécessaire pour effectuer une importation.</p>
</dd>
<dt class="hdlist1"><code>done</code></dt>
<dd>
<p>Marque la fin du flux. Cette commande est facultative, sauf si la fonctionnalité <code>done</code> a été demandée à l&#8217;aide de l&#8217;option de ligne de commande <code>--done</code> ou de la commande <code>feature done</code>.</p>
</dd>
<dt class="hdlist1"><code>get-mark</code></dt>
<dd>
<p>Demande à fast-import d&#8217;imprimer le SHA-1 correspondant à une marque sur le descripteur de fichier défini avec <code>--cat-blob-fd</code>, ou <code>stdout</code> si non spécifié.</p>
</dd>
<dt class="hdlist1"><code>cat-blob</code></dt>
<dd>
<p>Demande à fast-import d&#8217;imprimer un blob au format <em>cat-file --batch</em> sur le descripteur de fichier défini avec <code>--cat-blob-fd</code> ou <code>stdout</code> si non spécifié.</p>
</dd>
<dt class="hdlist1"><code>ls</code></dt>
<dd>
<p>Demande à fast-import d&#8217;afficher une ligne décrivant une entrée de répertoire au format <em>ls-tree</em> sur le descripteur de fichier défini avec <code>--cat-blob-fd</code>, ou <code>stdout</code> si non spécifié.</p>
</dd>
<dt class="hdlist1"><code>feature</code></dt>
<dd>
<p>Active la fonctionnalité spécifiée. Pour cela, il faut que l&#8217;importation rapide prenne en charge la fonction spécifiée, sinon elle s&#8217;arrête.</p>
</dd>
<dt class="hdlist1"><code>option</code></dt>
<dd>
<p>Spécifier n&#8217;importe laquelle des options listées sous OPTIONS qui ne modifient pas la sémantique du flux pour répondre aux besoins du frontend&#8217;s. Cette commande est facultative et n&#8217;est pas nécessaire pour effectuer une importation.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_commit"><code>commit</code></h3>
<div class="paragraph">
<p>Créer ou mettre à jour une branche avec un nouveau commit, en enregistrant une modification logique au projet.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'commit' SP &lt;ref&gt; LF
        mark?
        original-oid?
        ('author' (SP &lt;nom&gt;)? SP LT &lt;email&gt; GT SP &lt;quand&gt; LF)?
        'committer' (SP &lt;nom&gt;)? SP LT &lt;email&gt; GT SP &lt;quand&gt; LF
        ('encoding' SP &lt;encodage&gt;)?
        data
        ('from' SP &lt;commit-esque&gt; LF)?
        ('merge' SP &lt;commit-esque&gt; LF)*
        (filemodify | filedelete | filecopy | filerename | filedeleteall | notemodify)*
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;ref&gt;</code> est le nom de la branche sur laquelle le commit doit être effectué. Typiquement, les noms de branches sont préfixés par <code>refs/heads/</code> dans Git, donc importer le symbole de branche CVS <code>RELENG-1_0</code> utilisera <code>refs/heads/RELENG-1_0</code> pour la valeur de <code>&lt;ref&gt;</code>. La valeur de <code>&lt;ref&gt;</code> doit être un nom de référence valide dans Git. Comme <code>LF</code> n&#8217;est pas valide dans un nom de référence Git, aucune syntaxe de citation ou d&#8217;échappement n&#8217;est supportée ici.</p>
</div>
<div class="paragraph">
<p>Une commande <code>mark</code> peut optionnellement apparaître, demandant à fast-import de sauvegarder une référence au commit nouvellement créé pour une utilisation future par le frontend (voir ci-dessous pour le format). Il est très courant pour les frontends de marquer chaque commit qu&#8217;ils créent, permettant ainsi la création de branches futures à partir de n&#8217;importe quel commit importé.</p>
</div>
<div class="paragraph">
<p>La commande <code>data</code> qui suit <code>committer</code> doit fournir le message de validation (voir ci-dessous la syntaxe de la commande <code>data</code>). Pour importer un message de validation vide, utilisez des données de longueur 0. Les messages de validation sont de forme libre et ne sont pas interprétés par Git. Actuellement, ils doivent être encodés en UTF-8, car fast-import ne permet pas de spécifier d&#8217;autres encodages.</p>
</div>
<div class="paragraph">
<p>Une ou plusieurs commandes <code>filemodify</code>, <code>filedelete</code>, <code>filecopy</code>, <code>filerename</code>, <code>filedeleteall</code> et <code>notemodify</code> peuvent être incluses pour mettre à jour le contenu de la branche avant de créer le commit. Ces commandes peuvent être fournies dans n&#8217;importe quel ordre. Cependant, il est recommandé que la commande <code>filedeleteall</code> précède toutes les commandes <code>filemodify</code>, <code>filecopy</code>, <code>filerename</code> et <code>notemodify</code> dans le même commit, car <code>filedeleteall</code> efface la branche (voir ci-dessous).</p>
</div>
<div class="paragraph">
<p>Le <code>LF</code> après la commande est facultatif (il était auparavant obligatoire). Notez que pour des raisons de compatibilité ascendante, si le commit se termine par une commande <code>data</code> (c&#8217;est-à-dire qu&#8217;il n&#8217;y a pas de commande <code>from</code>, <code>merge</code>, <code>filemodify</code>, <code>filedelete</code>, <code>filecopy</code>, <code>fileename</code>, <code>filedeleteall</code> ou <code>notemodify</code>), alors deux commandes <code>LF</code> peuvent apparaître à la fin de la commande au lieu d&#8217;une seule.</p>
</div>
<div class="sect3">
<h4 id="_author"><code>author</code></h4>
<div class="paragraph">
<p>Une commande <code>author</code> peut optionnellement apparaître, si les informations de l&#8217;auteur peuvent différer de celles du validateur. Si <code>author</code> est omis, alors fast-import utilisera automatiquement les informations du validateur pour la partie auteur du commit. Voir ci-dessous pour une description des champs de <code>author</code>, car ils sont identiques à ceux de <code>committer</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_committer"><code>committer</code></h4>
<div class="paragraph">
<p>La commande <code>committer</code> indique qui a fait ce commit, et quand il l&#8217;a fait.</p>
</div>
<div class="paragraph">
<p>Ici, <code>&lt;om&gt;</code> est le nom d&#8217;affichage de la personne' (par exemple &#8220;Com M Itter&#8221;) et <code>&lt;email&gt;</code> est l&#8217;adresse électronique de la personne (&#8220;cm@example.com&#8221;). <code>LT</code> et <code>GT</code> sont les symboles littéraux moins que (\x3c) et plus que (\x3e). Ils sont nécessaires pour délimiter l&#8217;adresse électronique des autres champs de la ligne. Notez que <code>&lt;nom&gt;</code> et <code>&lt;email&gt;</code> sont de forme libre et peuvent contenir n&#8217;importe quelle séquence d&#8217;octets, sauf <code>LT</code>, <code>GT</code> et <code>LF</code>. Le nom est généralement codé en UTF-8.</p>
</div>
<div class="paragraph">
<p>L&#8217;heure de la modification est spécifiée par <code>&lt;quand&gt;</code> en utilisant le format de date qui a été sélectionné par l&#8217;option de ligne de commande --date-format=&lt;fmt&gt; ;. Voir "Formats de date'' ci-dessus pour l&#8217;ensemble des formats pris en charge et leur syntaxe.</p>
</div>
</div>
<div class="sect3">
<h4 id="_encoding"><code>encoding</code></h4>
<div class="paragraph">
<p>La commande optionnelle <code>encoding</code> indique l&#8217;encodage du message de validation. La plupart des commits sont UTF-8 et l&#8217;encodage est omis, mais cela permet d&#8217;importer des messages de commit dans git sans les ré-encoder au préalable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_from"><code>from</code></h4>
<div class="paragraph">
<p>La commande <code>from</code> est utilisée pour spécifier le commit à partir duquel initialiser cette branche. Cette révision sera le premier ancêtre du nouveau commit. L&#8217;état de l&#8217;arbre construit à partir de ce commit commencera avec l&#8217;état du commit <code>from</code>, et sera modifié par les modifications de contenu de ce commit.</p>
</div>
<div class="paragraph">
<p>Omettre la commande <code>from</code> dans le premier commit d&#8217;une nouvelle branche fera que fast-import créera ce commit sans ancêtre. Ceci n&#8217;est généralement souhaité que pour le premier commit d&#8217;un projet. Si le frontal crée tous les fichiers à partir de zéro lors de la création d&#8217;une nouvelle branche, une commande <code>merge</code> peut être utilisée à la place de <code>from</code> pour commencer le commit avec un arbre vide. Omettre la commande <code>from</code> sur des branches existantes est généralement souhaitable, car le commit actuel sur cette branche est automatiquement supposé être le premier ancêtre du nouveau commit.</p>
</div>
<div class="paragraph">
<p>Comme <code>LF</code> n&#8217;est pas valide dans un refname Git ou une expression SHA-1, aucune syntaxe de citation ou d&#8217;échappement n&#8217;est supportée dans <code>&lt;commit-esque&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Ici, <code>&lt;commit-esque&gt;</code> est l&#8217;un des éléments suivants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Le nom d&#8217;une branche existante déjà dans la table interne des branches de fast-import. Si fast-import ne connaît pas le nom, il est traité comme une expression SHA-1.</p>
</li>
<li>
<p>Une référence de marque, <code>:&lt;idnum&gt;</code>, où <code>&lt;idnum&gt;</code> est le numéro de la marque.</p>
<div class="paragraph">
<p>La raison pour laquelle fast-import utilise <code>:</code> pour indiquer une référence de marque est que ce caractère n&#8217;est pas légal dans un nom de branche Git. Le caractère de tête <code>:</code> permet de distinguer facilement la marque 42 (<code>:42</code>) de la branche 42 (<code>42</code> ou <code>refs/heads/42</code>), ou d&#8217;un SHA-1 abrégé qui n&#8217;est constitué que de chiffres en base 10.</p>
</div>
<div class="paragraph">
<p>Les marques doivent être déclarées (via <code>mark</code>) avant de pouvoir être utilisées.</p>
</div>
</li>
<li>
<p>Un commit SHA-1 complet de 40 octets ou abrégé en hexadécimal.</p>
</li>
<li>
<p>Toute expression SHA-1 valide de Git qui se résout en un commit. Voir "SPÉCIFICATION DE RÉVISIONS'' in <a href="gitrevisions.html">gitrevisions(7)</a> pour plus de détails.</p>
</li>
<li>
<p>Le SHA-1 spécial nul (40 zéros) indique que la branche doit être supprimée.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Le cas particulier de la reprise d&#8217;une importation incrémentale à partir de la valeur actuelle de la branche doit être écrit comme suit :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>        from refs/heads/branch^0</pre>
</div>
</div>
<div class="paragraph">
<p>Le suffixe <code>^0</code> est nécessaire car fast-import ne permet pas à une branche de démarrer à partir d&#8217;elle-même, et la branche est créée en mémoire avant même que la commande <code>from</code> ne soit lue en entrée. L&#8217;ajout de <code>^0</code> forcera fast-import à résoudre le commit à travers la bibliothèque d&#8217;analyse de révision de Git&#8217;s, plutôt que sa table de branche interne, chargeant ainsi la valeur existante de la branche.</p>
</div>
</div>
<div class="sect3">
<h4 id="_merge"><code>merge</code></h4>
<div class="paragraph">
<p>Inclut un commit d&#8217;ancêtre supplémentaire. Le lien d&#8217;ancêtre supplémentaire ne change pas la façon dont l&#8217;état de l&#8217;arbre est construit à ce commit. Si la commande <code>from</code> est omise lors de la création d&#8217;une nouvelle branche, le premier commit <code>merge</code> sera le premier ancêtre du commit actuel, et la branche commencera sans fichier. Un nombre illimité de commandes <code>merge</code> par commit est autorisé par fast-import, établissant ainsi une fusion à n voies.</p>
</div>
<div class="paragraph">
<p>Ici, <code>&lt;commit-esque&gt;</code> est l&#8217;une des expressions de spécification de commit également acceptées par <code>from</code> (voir ci-dessus).</p>
</div>
</div>
<div class="sect3">
<h4 id="_filemodify"><code>filemodify</code></h4>
<div class="paragraph">
<p>Inclus dans une commande <code>commit</code> pour ajouter un nouveau fichier ou modifier le contenu d&#8217;un fichier existant. Cette commande a deux moyens différents de spécifier le contenu du fichier.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Format externe de données</dt>
<dd>
<p>Le contenu des données pour le fichier a déjà été fourni par une commande <code>blob</code> antérieure. Le frontal a juste besoin de le connecter.</p>
<div class="literalblock">
<div class="content">
<pre>        'M' SP &lt;mode&gt; SP &lt;ref-données&gt; SP &lt;chemin&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Ici, généralement, <code>&lt;ref-données&gt;</code> doit être soit une référence de marque (<code>:&lt;idnum&gt;</code>) définie par une commande <code>blob</code> antérieure, soit un SHA-1 complet de 40 octets d&#8217;un objet blob Git existant. Si <code>&lt;mode&gt;</code> est <code>040000`</code>, alors <code>&lt;ref-données&gt;</code> doit être le SHA-1 complet sur 40 octets d&#8217;un objet arbre Git existant ou une référence de marque définie avec <code>--import-marks</code>.</p>
</div>
</dd>
<dt class="hdlist1">Format en ligne de données</dt>
<dd>
<p>Le contenu des données du fichier n&#8217;a pas encore été fourni. Le frontal veut le fournir dans le cadre de cette commande de modification.</p>
<div class="literalblock">
<div class="content">
<pre>        'M' SP &lt;mode&gt; SP 'inline' SP &lt;chemin&gt; LF
        données</pre>
</div>
</div>
<div class="paragraph">
<p>Voir ci-dessous pour une description détaillée de la commande <code>data</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Dans les deux formats, <code>&lt;mode&gt;</code> est le type d&#8217;entrée du fichier, spécifié en octal. Git ne supporte que les modes suivants :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>100644</code> ou <code>644</code> : Un fichier normal (non exécutable). La majorité des fichiers dans la plupart des projets utilisent ce mode. En cas de doute, c&#8217;est ce que vous voulez.</p>
</li>
<li>
<p><code>100755</code> ou <code>755</code> : Un fichier normal, mais exécutable.</p>
</li>
<li>
<p><code>120000</code> : Un lien symbolique, le contenu du fichier sera la cible du lien.</p>
</li>
<li>
<p><code>160000</code> : Un lien git, SHA-1 de l&#8217;objet fait référence à un commit dans un autre dépôt. Les liens Git ne peuvent être spécifiés que par SHA ou par une marque de commit. Ils sont utilisés pour implémenter des sous-modules.</p>
</li>
<li>
<p><code>040000</code> : Un sous-répertoire. Les sous-répertoires ne peuvent être spécifiés que par SHA ou par une marque d&#8217;arbre définie avec <code>--import-marks</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dans les deux formats, <code>&lt;chemin&gt;</code> est le chemin complet du fichier à ajouter (s&#8217;il n&#8217;existe pas déjà) ou à modifier (s&#8217;il existe déjà).</p>
</div>
<div class="paragraph">
<p>Une chaîne de caractères <code>&lt;chemin&gt;</code> doit utiliser des séparateurs de répertoire de style UNIX (barre oblique <code>/</code>), peut contenir n&#8217;importe quel octet autre que <code>LF</code>, et ne doit pas commencer par un double guillemet (<code>"</code>).</p>
</div>
<div class="paragraph">
<p>Un chemin peut utiliser un guillemet de style C ; ceci est accepté dans tous les cas et obligatoire si le nom du fichier commence par un guillemet double ou contient <code>LF</code>. Dans le cas d&#8217;une citation de style C, le nom complet doit être entouré de guillemets doubles, et tout caractère <code>LF</code>, barre anti-oblique ou guillemet double doit être échappé en le faisant précéder d&#8217;une barre anti-oblique (par exemple, <code>"path/with\n, \\\\\ et \" ; in it"</code>).</p>
</div>
<div class="paragraph">
<p>La valeur de <code>&lt;chemin&gt;</code> doit être sous forme canonique. C&#8217;est-à-dire qu&#8217;elle ne doit pas :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contenir un composant de répertoire vide (par exemple, <code>foo//bar</code> n&#8217;est pas valide),</p>
</li>
<li>
<p>se terminer par un séparateur de répertoire (par exemple, <code>foo/</code> n&#8217;est pas valide),</p>
</li>
<li>
<p>commencer par un séparateur de répertoire (par exemple, <code>/foo</code> n&#8217;est pas valide),</p>
</li>
<li>
<p>contenir le composant spécial <code>.</code> ou <code>..</code> (par exemple, <code>foo/./bar</code> et <code>foo/../bar</code> sont invalides).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La racine de l&#8217;arbre peut être représentée par une chaîne vide comme <code>&lt;chemin&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Il est recommandé que <code>&lt;chmein&gt;</code> soit toujours codé en UTF-8.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filedelete"><code>filedelete</code></h4>
<div class="paragraph">
<p>Inclus dans une commande <code>commit</code> pour supprimer un fichier ou supprimer récursivement un répertoire entier de la branche. Si la suppression du fichier ou du répertoire rend son répertoire parent vide, le répertoire parent sera automatiquement supprimé aussi. Cela se fait en cascade dans l&#8217;arbre jusqu&#8217;à ce que le premier répertoire non vide ou la racine soit atteint.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'D' SP &lt;chemin&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;chemin&gt;</code> est le chemin complet du fichier ou du sous-répertoire à supprimer de la branche. Voir <code>filemodify</code> ci-dessus pour une description détaillée de <code>&lt;chemin&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filecopy"><code>filecopy</code></h4>
<div class="paragraph">
<p>Copie récursivement un fichier ou un sous-répertoire existant à un emplacement différent dans la branche. Le fichier ou le répertoire existant doit exister. Si la destination existe, elle sera complètement remplacée par le contenu copié depuis la source.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'C' SP &lt;chemin&gt; SP &lt;chemin&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>ici le premier <code>&lt;chemin&gt;</code> est l&#8217;emplacement source et le second <code>&lt;chemin&gt;</code> est la destination. Voir <code>filemodify</code> ci-dessus pour une description détaillée de ce à quoi <code>&lt;chemin&gt;</code> peut ressembler. Pour utiliser un chemin source qui contient SP, le chemin doit être cité.</p>
</div>
<div class="paragraph">
<p>Une commande <code>filecopy</code> prend effet immédiatement. Une fois que l&#8217;emplacement source a été copié vers la destination, toute commande future appliquée à l&#8217;emplacement source n&#8217;aura pas d&#8217;impact sur la destination de la copie.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filerename"><code>filerename</code></h4>
<div class="paragraph">
<p>Renomme un fichier ou un sous-répertoire existant à un emplacement différent dans la branche. Le fichier ou le répertoire existant doit exister. Si la destination existe, elle sera remplacée par le répertoire source.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'R' SP &lt;chemin&gt; SP &lt;chemin&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>ici le premier <code>&lt;chemin&gt;</code> est l&#8217;emplacement source et le second <code>&lt;chemin&gt;</code> est la destination. Voir <code>filemodify</code> ci-dessus pour une description détaillée de ce à quoi <code>&lt;chemin&gt;</code> peut ressembler. Pour utiliser un chemin source qui contient SP, le chemin doit être cité.</p>
</div>
<div class="paragraph">
<p>Une commande <code>filerename</code> prend effet immédiatement. Une fois que l&#8217;emplacement source a été renommé vers la destination, toute commande future appliquée à l&#8217;emplacement source créera de nouveaux fichiers à cet endroit et n&#8217;aura pas d&#8217;impact sur la destination du renommage.</p>
</div>
<div class="paragraph">
<p>Notez qu&#8217;un <code>filerename</code> est identique à un <code>filecopy</code> suivi d&#8217;un <code>filedelete</code> de l&#8217;emplacement source. Il y a un léger avantage de performance à utiliser <code>filerename</code>, mais l&#8217;avantage est si faible que cela ne vaut jamais la peine d&#8217;essayer de convertir une paire delete/add dans le matériel source en un renommage pour l&#8217;importation rapide. Cette commande <code>filerename</code> est fournie juste pour simplifier les frontaux qui ont déjà des informations de renommage et ne veulent pas s&#8217;embêter à les décomposer en un <code>filecopy</code> suivi d&#8217;un <code>filedelete</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filedeleteall"><code>filedeleteall</code></h4>
<div class="paragraph">
<p>Inclus dans une commande <code>commit</code> pour supprimer tous les fichiers (et aussi tous les répertoires) de la branche. Cette commande réinitialise la structure interne de la branche pour qu&#8217;elle ne contienne aucun fichier, ce qui permet à l&#8217;interface d&#8217;ajouter ultérieurement tous les fichiers intéressants à partir de zéro.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'deleteall' LF</pre>
</div>
</div>
<div class="paragraph">
<p>Cette commande est extrêmement utile si le frontal ne sait pas (ou ne se soucie pas de savoir) quels fichiers sont actuellement sur la branche, et ne peut donc pas générer les commandes <code>filedelete</code> appropriées pour mettre à jour le contenu.</p>
</div>
<div class="paragraph">
<p>L&#8217;envoi d&#8217;une commande <code>filedeleteall</code> suivie des commandes <code>filemodify</code> nécessaires pour définir le contenu correct produira les mêmes résultats que l&#8217;envoi des commandes <code>filemodify</code> et <code>filedelete</code> nécessaires. L&#8217;approche <code>filedeleteall</code> peut cependant demander à fast-import d&#8217;utiliser un peu plus de mémoire par branche active (moins de 1 MiB pour la plupart des gros projets) ; donc les frontaux qui peuvent facilement obtenir seulement les chemins affectés pour un commit sont encouragés à le faire.</p>
</div>
</div>
<div class="sect3">
<h4 id="_notemodify"><code>notemodify</code></h4>
<div class="paragraph">
<p>Inclus dans une commande <code>commit</code> <code>&lt;réf-notes&gt;</code> pour ajouter une nouvelle note annotant un <code>&lt;commit-esque&gt;</code> ou changer le contenu de cette annotation. En interne, c&#8217;est similaire à filemodify 100644 sur le chemin <code>&lt;commit-esque&gt;</code> (peut-être divisé en sous-répertoires). Il n&#8217;est pas conseillé d&#8217;utiliser d&#8217;autres commandes pour écrire dans l&#8217;arbre <code>&lt;réf-notes&gt;</code> sauf <code>filedeleteall</code> pour supprimer toutes les notes existantes dans cet arbre. Cette commande a deux moyens différents de spécifier le contenu de la note.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Format externe de données</dt>
<dd>
<p>Le contenu des données pour la note a déjà été fourni par une commande <code>blob</code> antérieure. Le frontal a juste besoin de le connecter au commit qui doit être annoté.</p>
<div class="literalblock">
<div class="content">
<pre>        'N' SP &lt;réf-data&gt; SP &lt;commit-esque&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Ici, <code>&lt;réf-data&gt;</code> peut être soit une référence de marque (<code>:&lt;idnum&gt;</code>) définie par une commande <code>blob</code> antérieure, soit un SHA-1 complet de 40 octets d&#8217;un objet blob Git existant.</p>
</div>
</dd>
<dt class="hdlist1">Format en ligne de données</dt>
<dd>
<p>Le contenu des données de la note n&#8217;a pas encore été fourni. Le frontal veut le fournir dans le cadre de cette commande de modification.</p>
<div class="literalblock">
<div class="content">
<pre>        'N' SP 'inline' SP &lt;commit-esque&gt; LF
        data</pre>
</div>
</div>
<div class="paragraph">
<p>Voir ci-dessous pour une description détaillée de la commande <code>data</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Dans les deux formats, <code>&lt;commit-esque&gt;</code> est l&#8217;une des expressions de spécification de commit également acceptées par <code>from</code> (voir ci-dessus).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mark"><code>mark</code></h3>
<div class="paragraph">
<p>Fait en sorte que l&#8217;import rapide sauvegarde une référence à l&#8217;objet courant, permettant au frontal de rappeler cet objet à un moment ultérieur, sans connaître son SHA-1. Ici, l&#8217;objet courant est la commande de création d&#8217;objet dans laquelle la commande <code>mark</code> apparaît. Cela peut être <code>commit</code>, <code>tag</code>, et <code>blob</code>, mais <code>commit</code> est l&#8217;usage le plus courant.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'mark' ; SP ':' ; &lt;idnum&gt; ; LF</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;idnum&gt;</code> est le numéro attribué par le frontal à cette marque. La valeur de <code>&lt;idnum&gt;</code> est exprimée sous la forme d&#8217;un nombre entier décimal ASCII. La valeur 0 est réservée et ne peut pas être utilisée comme marque. Seules les valeurs supérieures ou égales à 1 peuvent être utilisées comme marques.</p>
</div>
<div class="paragraph">
<p>Les nouvelles marques sont créées automatiquement. Les marques existantes peuvent être déplacées vers un autre objet simplement en réutilisant le même <code>&lt;idnum&gt;</code> dans une autre commande <code>mark</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_original_oid"><code>original-oid</code></h3>
<div class="paragraph">
<p>Fournit le nom de l&#8217;objet dans le système de contrôle de la source d&#8217;origine. fast-import ignorera simplement cette directive, mais les processus de filtrage qui opèrent et modifient le flux avant de l&#8217;envoyer à fast-import peuvent avoir besoin de cette information</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'original-oid' ; SP &lt;identifiant-objet&gt; ; LF</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;identifiant-objet&gt;</code> est une chaîne quelconque ne contenant pas LF.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tag"><code>tag</code></h3>
<div class="paragraph">
<p>Crée une étiquette annotée faisant référence à un commit spécifique. Pour créer des étiquettes légères (non annotés), voir la commande <code>reset</code> ci-dessous.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'tag' SP &lt;nom&gt; LF
        mark?
        'from' SP &lt;commit-esque&gt; LF
        original-oid?
        'tagger' (SP &lt;nom&gt;)? SP LT &lt;email&gt; GT SP &lt;quand&gt; LF
        &lt;data&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;nom&gt;</code> est le nom de l&#8217;étiquette à créer.</p>
</div>
<div class="paragraph">
<p>Les noms des étiquettes sont automatiquement préfixés par <code>refs/tags/</code> lorsqu&#8217;elles sont stockés dans Git, ainsi l&#8217;importation du symbole de branche CVS <code>RELENG-1_0-FINAL</code> utilisera juste <code>RELENG-1_0-FINAL</code> pour <code>&lt;nom&gt;</code>, et fast-import écrira la référence correspondante comme <code>refs/tags/RELENG-1_0-FINAL</code>.</p>
</div>
<div class="paragraph">
<p>La valeur de <code>&lt;nom&gt;</code> doit être un nom de référence valide dans Git et peut donc contenir des barres obliques. Comme <code>LF</code> n&#8217;est pas valide dans un nom de référence Git, aucune syntaxe de citation ou d&#8217;échappement n&#8217;est supportée ici.</p>
</div>
<div class="paragraph">
<p>La commande <code>from</code> est la même que pour la commande <code>commit</code> ; voir ci-dessus pour plus de détails.</p>
</div>
<div class="paragraph">
<p>La commande <code>tagger</code> utilise le même format que <code>committer</code> dans <code>commit</code> ; encore une fois, voir ci-dessus pour les détails.</p>
</div>
<div class="paragraph">
<p>La commande <code>data</code> qui suit <code>tagger</code> doit fournir le message d&#8217;étiquette annotée (voir ci-dessous pour la syntaxe de la commande <code>data</code>). Pour importer un message vide, utilisez des données de longueur 0. Les messages d&#8217;étiquette sont de forme libre et ne sont pas interprétés par Git. Actuellement, ils doivent être encodés en UTF-8, car fast-import ne permet pas de spécifier d&#8217;autres encodages.</p>
</div>
<div class="paragraph">
<p>La signature des étiquettes annotées pendant l&#8217;importation à partir de fast-import n&#8217;est pas prise en charge. Essayer d&#8217;inclure votre propre signature PGP/GPG n&#8217;est pas recommandé, car le frontal n&#8217;a pas (facilement) accès à l&#8217;ensemble des octets qui composent normalement une telle signature. Si la signature est nécessaire, créez des étiquettes légères depuis fast-import avec <code>reset</code>, puis créez les versions annotées de ces étiquettes hors ligne avec le processus standard <em>git tag</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reset"><code>reset</code></h3>
<div class="paragraph">
<p>Crée (ou recrée) la branche nommée, en partant éventuellement d&#8217;une révision spécifique. La commande reset permet à un frontend d&#8217;émettre une nouvelle commande <code>from</code> pour une branche existante, ou de créer une nouvelle branche à partir d&#8217;un commit existant sans créer un nouveau commit.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'reset' SP &lt;ref&gt; LF
        ('from' SP &lt;commit-esque&gt; LF)?
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Pour une description détaillée de <code>&lt;ref&gt;</code> et <code>&lt;commit-esque&gt;</code> voir ci-dessus sous <code>commit</code> et <code>from</code>.</p>
</div>
<div class="paragraph">
<p>Le <code>LF</code> après la commande est facultatif (il était auparavant obligatoire).</p>
</div>
<div class="paragraph">
<p>La commande <code>reset</code> peut également être utilisée pour créer des étiquettes légères (non annotées). Par exemple :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>reset refs/tags/938
from :938</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>créerait l&#8217;étiquette légère <code>refs/tags/938</code> faisant référence à la marque de commit <code>:938</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_blob"><code>blob</code></h3>
<div class="paragraph">
<p>Demande l&#8217;écriture d&#8217;une révision de fichier dans le fichier paquet. La révision n&#8217;est connectée à aucun commit ; cette connexion doit être formée dans une commande <code>commit</code> ultérieure en référençant le blob par une marque assignée.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'blob' LF
        marque?
        oid-original?
        data</pre>
</div>
</div>
<div class="paragraph">
<p>La commande mark est optionnelle ici car certains frontaux ont choisi de générer eux-mêmes le SHA-1 de Git pour le blob et de le transmettre directement à <code>commit</code>. Cependant, cela représente généralement plus de travail que cela n’en vaut la peine, car les marques sont peu coûteuses à stocker et faciles à utiliser.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data"><code>data</code></h3>
<div class="paragraph">
<p>Fournit des données brutes (à utiliser comme contenu de blob/fichier, messages de commit ou messages de tags annotés) à fast-import. Les données peuvent être fournies en utilisant un nombre exact d&#8217;octets ou en étant délimitées par une ligne de fin. Les frontaux réels destinés à des conversions de qualité devraient toujours utiliser le format de comptage exact des octets, car il est plus robuste et plus performant. Le format délimité est principalement destiné à tester l&#8217;importation rapide.</p>
</div>
<div class="paragraph">
<p>Les lignes de commentaires apparaissant dans la partie <code>&lt;brut&gt;</code> des commandes <code>data</code> sont toujours considérées comme faisant partie du corps des données et ne sont donc jamais ignorées par fast-import. Cela permet d&#8217;importer en toute sécurité tout contenu de fichier/message dont les lignes pourraient commencer par <code>#</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Format exact de comptage des octets</dt>
<dd>
<p>Le frontal doit spécifier le nombre d&#8217;octets de données.</p>
<div class="literalblock">
<div class="content">
<pre>        'data' SP &lt;compte&gt; LF
        &lt;brut&gt; LF?</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;compte&gt;</code> est le nombre exact d&#8217;octets apparaissant dans <code>&lt;brut&gt;</code>. La valeur de <code>&lt;compte&gt;</code> est exprimée sous la forme d&#8217;un nombre entier décimal ASCII. Le "LF" de chaque côté de "brut" n&#8217;est pas inclus dans "compte" et ne sera pas inclus dans les données importées.</p>
</div>
<div class="paragraph">
<p>Le <code>LF</code> après <code>&lt;brut&gt;</code> est facultatif (il était auparavant obligatoire) mais recommandé. Le fait de toujours l&#8217;inclure facilite le débogage d&#8217;un flux d&#8217;importation rapide car la commande suivante commence toujours dans la colonne 0 de la ligne suivante, même si <code>&lt;brut&gt;</code> ne se termine pas par un <code>LF</code>.</p>
</div>
</dd>
<dt class="hdlist1">Format délimité</dt>
<dd>
<p>Une chaîne de délimitation est utilisée pour marquer la fin des données. fast-import calculera la longueur en recherchant le délimiteur. Ce format est principalement utile pour les tests et n&#8217;est pas recommandé pour les données réelles.</p>
<div class="literalblock">
<div class="content">
<pre>        'data' SP '&lt;&lt;' &lt;delim&gt; LF
        &lt;brut&gt; LF
        &lt;delim&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>&lt;delim&gt;</code> est la chaîne de délimitation choisie. La chaîne <code>&lt;delim&gt;</code> ne doit pas apparaître sur une ligne seule dans <code>&lt;brut&gt;</code>, sinon fast-import pensera que les données se terminent plus tôt qu&#8217;elles ne le font réellement. Le <code>LF</code> qui suit immédiatement <code>&lt;brut&gt;</code> fait partie de <code>&lt;brut&gt;</code>. C&#8217;est une des limites du format délimité, il est impossible de fournir un morceau de données qui n&#8217;a pas un LF comme dernier octet.</p>
</div>
<div class="paragraph">
<p>Le <code>LF</code> après <code>&lt;delim&gt; LF</code> est facultatif (il était auparavant obligatoire).</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_alias"><code>alias</code></h3>
<div class="paragraph">
<p>Enregistrer qu&#8217;une marque se réfère à un objet donné sans créer au préalable un nouvel objet.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'alias' LF
        marque
        'to' SP &lt;commit-esque&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Pour une description détaillée de <code>&lt;commit-esque&gt;</code> voir ci-dessus sous <code>from</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checkpoint"><code>checkpoint</code></h3>
<div class="paragraph">
<p>Force fast-import à fermer le fichier paquet en cours, à en commencer un nouveau, et à sauvegarder toutes les références, étiquettes et marques de la branche en cours.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'checkpoint' LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Notez que fast-import change automatiquement de fichier paquet lorsque le fichier paquet actuel atteint --max-pack-size, ou 4 Gio, la limite la plus petite étant retenue. Pendant un changement automatique de fichier paquet, fast-import ne met pas à jour les refs de branche, les étiquettes ou les marques.</p>
</div>
<div class="paragraph">
<p>Comme un <code>checkpoint</code> peut nécessiter une quantité significative de temps CPU et d&#8217;entrées-sorties sur le disque (pour calculer la somme de contrôle SHA-1 du paquet global, générer le fichier d&#8217;index correspondant, et mettre à jour les références), il peut facilement prendre plusieurs minutes pour une seule commande <code>checkpoint</code>.</p>
</div>
<div class="paragraph">
<p>Les frontaux peuvent choisir d&#8217;émettre des points de contrôle lors d&#8217;importations extrêmement importantes et longues, ou lorsqu&#8217;ils doivent permettre à un autre processus Git d&#8217;accéder à une branche. Cependant, étant donné qu&#8217;un dépôt Subversion de 30 Go peut être chargé dans Git par le biais d&#8217;un import rapide en 3 heures environ, la mise en place de points de contrôle explicites peut ne pas être nécessaire.</p>
</div>
<div class="paragraph">
<p>Le <code>LF</code> après la commande est facultatif (il était auparavant obligatoire).</p>
</div>
</div>
<div class="sect2">
<h3 id="_progress"><code>progress</code></h3>
<div class="paragraph">
<p>Demande à fast-import d&#8217;afficher la ligne <code>progress</code> entière sans modification sur son canal de sortie standard (descripteur de fichier 1) lorsque la commande est traitée à partir du flux d&#8217;entrée. La commande n&#8217;a par ailleurs aucun impact sur l&#8217;importation en cours, ni sur l&#8217;état interne de fast-import&#8217;s.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'progress' SP &lt;chaîne-libre&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>La partie <code>&lt;chaîne-libre&gt;</code> de la commande peut contenir toute séquence d&#8217;octets ne contenant pas de <code>LF</code>. Le <code>LF</code> après la commande est facultatif. Les appelants peuvent souhaiter traiter la sortie à l&#8217;aide d&#8217;un outil tel que sed pour supprimer la partie de tête de la ligne, par exemple :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>frontal | git fast-import | sed 's/^progress //' ;</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Placer une commande <code>progress</code> immédiatement après un <code>checkpoint</code> informera le lecteur quand le <code>checkpoint</code> est terminé et qu&#8217;il peut accéder en toute sécurité aux refs que l&#8217;import rapide a mis à jour.</p>
</div>
</div>
<div class="sect2">
<h3 id="_get_mark"><code>get-mark</code></h3>
<div class="paragraph">
<p>Demande à fast-import d&#8217;imprimer le SHA-1 correspondant à une marque vers stdout ou vers le descripteur de fichier préalablement arrangé avec l&#8217;argument <code>--cat-blob-fd</code>. Cette commande n&#8217;a pas d&#8217;impact sur l&#8217;importation en cours ; son but est de récupérer les SHA-1 que les commits ultérieurs pourraient vouloir mentionner dans leurs messages de commit.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'get-mark' SP ':' &lt;idnum&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Voir "Réponses aux commandes" ci-dessous pour plus de détails sur la façon de lire cette sortie en toute sécurité.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cat_blob"><code>cat-blob</code></h3>
<div class="paragraph">
<p>Demande à fast-import d&#8217;imprimer un blob sur un descripteur de fichier préalablement défini avec l&#8217;argument <code>--cat-blob-fd</code>. La commande n&#8217;a autrement aucun impact sur l&#8217;importation courante ; son but principal est de récupérer les blobs qui peuvent être dans la mémoire de fast-import mais non accessibles depuis le dépôt cible.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'cat-blob' SP &lt;réf-data&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Le <code>&lt;réf-data&gt;</code> peut être soit une référence de marque (<code>:&lt;idnum&gt;</code>) définie précédemment, soit un SHA-1 complet de 40 octets d&#8217;un blob Git, préexistant ou prêt à être écrit.</p>
</div>
<div class="paragraph">
<p>La sortie utilise le même format que <code>git cat-file --batch</code> :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;sha1&gt; SP 'blob' SP &lt;taille&gt; LF
&lt;contenu&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Cette commande peut être utilisée là où une directive <code>filemodify</code> peut apparaître, ce qui permet de l&#8217;utiliser au milieu d&#8217;un commit. Pour un <code>filemodify</code> utilisant une directive inline, elle peut aussi apparaître juste avant la directive <code>data</code>.</p>
</div>
<div class="paragraph">
<p>Voir "Réponses aux commandes" ci-dessous pour plus de détails sur la façon de lire cette sortie en toute sécurité.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ls"><code>ls</code></h3>
<div class="paragraph">
<p>Affiche des informations sur l&#8217;objet à un chemin vers un descripteur de fichier préalablement arrangé avec l&#8217;argument <code>--cat-blob-fd</code>. Cela permet d&#8217;afficher un blob à partir du commit actif (avec <code>cat-blob</code>) ou de copier un blob ou un arbre à partir d&#8217;un commit précédent pour l&#8217;utiliser dans le commit actuel (avec <code>filemodify</code>).</p>
</div>
<div class="paragraph">
<p>La commande <code>ls</code> peut également être utilisée là où une directive <code>filemodify</code> peut apparaître, ce qui permet de l&#8217;utiliser au milieu d&#8217;un commit.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lecture de l&#8217;engagement actif</dt>
<dd>
<p>Cette forme ne peut être utilisée qu&#8217;au milieu d&#8217;un <code>commit</code>. Le chemin nomme une entrée de répertoire dans le commit actif de fast-import. Le chemin doit être cité dans ce cas.</p>
<div class="literalblock">
<div class="content">
<pre>        'ls' SP &lt;chemin&gt; LF</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Lecture d&#8217;un arbre nommé</dt>
<dd>
<p>Le <code>&lt;réf-data&gt;</code> peut être une référence de marque (<code>:&lt;idnum&gt;</code>) ou le SHA-1 complet sur 40 octets d&#8217;une étiquette Git, d&#8217;un commit ou d&#8217;un objet arbre, préexistant ou en attente d&#8217;écriture. Le chemin est relatif au niveau supérieur de l&#8217;arbre nommé par <code>&lt;réf-data&gt;</code>.</p>
<div class="literalblock">
<div class="content">
<pre>        'ls' SP &lt;réf-data&gt; SP &lt;chemin&gt; LF</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Voir <code>filemodify</code> ci-dessus pour une description détaillée de <code>&lt;chemin&gt;</code>.</p>
</div>
<div class="paragraph">
<p>La sortie utilise le même format que <code>git ls-tree &lt;arbre&gt; -- &lt;chemin&gt;</code> :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;mode&gt; SP ('blob' | 'tree' | 'commit') SP &lt;réf-data&gt; HT &lt;chemin&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Le &lt;réf-data&gt; représente le blob, l&#8217;arbre ou l&#8217;objet commit au &lt;chemin&gt; et peut être utilisé dans les commandes ultérieures <em>get-mark</em>, <em>cat-blob</em>, <em>filemodify</em>, ou <em>ls</em>.</p>
</div>
<div class="paragraph">
<p>S&#8217;il n&#8217;y a pas de fichier ou de sous-arbre à ce chemin, <em>git fast-import</em> signalera à la place</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>missing SP &lt;chemin&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Voir "Réponses aux commandes" ci-dessous pour plus de détails sur la façon de lire cette sortie en toute sécurité.</p>
</div>
</div>
<div class="sect2">
<h3 id="_feature"><code>feature</code></h3>
<div class="paragraph">
<p>Exige que fast-import prenne en charge la fonctionnalité spécifiée, ou abandonne si ce n&#8217;est pas le cas.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'feature' SP &lt;fonction&gt; ('=' &lt;argument&gt;)? LF</pre>
</div>
</div>
<div class="paragraph">
<p>La partie &lt;fonction&gt; de la commande peut être l&#8217;une des suivantes :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">data-format</dt>
<dt class="hdlist1">export-marks</dt>
<dt class="hdlist1">relative-marks</dt>
<dt class="hdlist1">no-relative-marks</dt>
<dt class="hdlist1">forcer</dt>
<dd>
<p>Agit comme si l&#8217;option de ligne de commande correspondante avec un <code>--</code> en tête était passée sur la ligne de commande (voir OPTIONS, ci-dessus).</p>
</dd>
<dt class="hdlist1">import-marks</dt>
<dt class="hdlist1">import-marks-if-exists</dt>
<dd>
<p>Comme --import-marks sauf sur deux points : premièrement, une seule commande "feature import-marks" ou "feature import-marks-if-exists" est autorisée par flux ; deuxièmement, une option de ligne de commande --import-marks= ou --import-marks-if-exists remplace n&#8217;importe laquelle de ces commandes "feature" dans le flux ; troisièmement, "feature import-marks-if-exists" comme une option de ligne de commande correspondante saute silencieusement un fichier inexistant.</p>
</dd>
<dt class="hdlist1">get-mark</dt>
<dt class="hdlist1">cat-blob</dt>
<dt class="hdlist1">ls</dt>
<dd>
<p>Exige que le moteur prenne en charge la commande <em>get-mark</em>, <em>cat-blob</em>, ou <em>ls</em> respectivement. Les versions de fast-import ne supportant pas la commande spécifiée se termineront avec un message l&#8217;indiquant. Cela permet à l&#8217;importation de se terminer prématurément avec un message clair, plutôt que de perdre du temps au début de l&#8217;importation avant que la commande non supportée ne soit détectée.</p>
</dd>
<dt class="hdlist1">notes</dt>
<dd>
<p>Exiger que le moteur prenne en charge la sous-commande <em>notemodify</em> (N) de la commande <em>commit</em>. Les versions de fast-import ne prenant pas en charge les notes se termineront par un message l&#8217;indiquant.</p>
</dd>
<dt class="hdlist1">fait</dt>
<dd>
<p>Sortir en erreur si le flux se termine sans une commande <em>done</em>. Sans cette fonctionnalité, les erreurs provoquant la fin abrupte du frontal à un moment opportun du flux peuvent passer inaperçues. Cela peut se produire, par exemple, si un frontal d&#8217;importation meurt au milieu de l&#8217;opération sans émettre de SIGTERM ou SIGKILL à son instance git fast-import subordonnée.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_option"><code>option</code></h3>
<div class="paragraph">
<p>Traite l&#8217;option spécifiée afin que git fast-import se comporte d&#8217;une manière qui convient aux besoins du frontal Notez que les options spécifiées par le frontal sont remplacées par toutes les options que l&#8217;utilisateur peut spécifier à git fast-import lui-même.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    'option' SP &lt;option&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>La partie <code>&lt;option&gt;</code> de la commande peut contenir n&#8217;importe quelle option listée dans la section OPTIONS qui ne change pas la sémantique de l&#8217;importation, sans le <code>--</code> de tête et est traitée de la même manière.</p>
</div>
<div class="paragraph">
<p>Les commandes d&#8217;option doivent être les premières commandes sur l&#8217;entrée (sans compter les commandes de fonctionnalité), donner une commande d&#8217;option après une commande de non-option est une erreur.</p>
</div>
<div class="paragraph">
<p>Les options de ligne de commande suivantes modifient la sémantique de l&#8217;importation et ne peuvent donc pas être passées en tant qu&#8217;option :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data-format</p>
</li>
<li>
<p>import-marks</p>
</li>
<li>
<p>export-marks</p>
</li>
<li>
<p>cat-blob-fd</p>
</li>
<li>
<p>forcer</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_done"><code>done</code></h3>
<div class="paragraph">
<p>Si la fonction <code>done</code> n&#8217;est pas utilisée, traitée comme si EOF était lu. Ceci peut être utilisé pour dire à fast-import de finir plus tôt.</p>
</div>
<div class="paragraph">
<p>Si l&#8217;option de ligne de commande <code>--done</code> ou la commande <code>feature done</code> est utilisée, la commande <code>done</code> est obligatoire et marque la fin du flux.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_réponses_aux_commandes">RÉPONSES AUX COMMANDES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les nouveaux objets écrits par fast-import ne sont pas disponibles immédiatement. La plupart des commandes de fast-import n&#8217;ont pas d&#8217;effet visible avant le prochain checkpoint (ou completion). Le frontal peut envoyer des commandes pour remplir le tuyau d’entrée de fast-import sans se soucier de la rapidité avec laquelle elles prendront effet, ce qui améliore les performances en simplifiant la planification.</p>
</div>
<div class="paragraph">
<p>Pour certains frontaux, cependant, il est utile de pouvoir relire les données du dépôt actuel au fur et à mesure de sa mise à jour (par exemple lorsque le matériel source décrit les objets en termes de correctifs à appliquer aux objets précédemment importés). Ceci peut être réalisé en connectant le frontal et fast-import via des tuyaux bidirectionnels :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>mkfifo fast-import-output
frontal &lt;fast-import-output |
git fast-import &gt;fast-import-output</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Un frontal configuré de cette façon peut utiliser les commandes <code>progress</code>, <code>get-mark</code>, <code>ls</code>, et <code>cat-blob</code> pour lire les informations de l&#8217;import en cours.</p>
</div>
<div class="paragraph">
<p>Pour éviter les blocages, de tels frontaux doivent complètement consommer toute sortie en attente de <code>progress</code>, <code>ls</code>, <code>get-mark</code>, et <code>cat-blob</code> avant d&#8217;effectuer des écritures dans fast-import qui pourraient bloquer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rapports_daccident">RAPPORTS D&#8217;ACCIDENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Si fast-import reçoit une entrée invalide, il se terminera avec un statut de sortie non nul et créera un rapport d&#8217;accident au niveau supérieur du dépôt Git dans lequel il importait. Les rapports d&#8217;accident contiennent un instantané de l&#8217;état interne de fast-import ainsi que les commandes les plus récentes qui ont conduit au crash.</p>
</div>
<div class="paragraph">
<p>Toutes les commandes récentes (y compris les commentaires de flux, les modifications de fichiers et les commandes de progression) sont affichées dans l&#8217;historique des commandes au sein du rapport de collision, mais les données de fichiers brutes et les messages de validation sont exclus du rapport de collision. Cette exclusion permet de gagner de l&#8217;espace dans le fichier de rapport et de réduire la quantité de mise en mémoire tampon que l&#8217;importation rapide doit effectuer pendant l&#8217;exécution.</p>
</div>
<div class="paragraph">
<p>Après avoir écrit un rapport de panne, fast-import fermera le fichier paquet actuel et exportera la table des marques. Cela permet au développeur du frontal d&#8217;inspecter l&#8217;état du dépôt et de reprendre l&#8217;importation à partir du point où elle s&#8217;est arrêtée. Les branches et les étiquettes modifiées ne sont pas mises à jour lors d&#8217;un crash, car l&#8217;importation ne s&#8217;est pas terminée avec succès. Les informations sur les branches et les étiquettes se trouvent dans le rapport d&#8217;accident et doivent être appliquées manuellement si la mise à jour est nécessaire.</p>
</div>
<div class="paragraph">
<p>Un exemple d&#8217;accident :</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>$ cat &gt;in &lt;&lt;END_OF_INPUT
# mon tout premier commit de test
commit refs/heads/master
committer Shawn O. Pearce &lt;spearce&gt; 19283 -0400
# Qui est ce type d'ailleurs ?
data &lt;&lt;EOF
C'est mon commit
EOF
M 644 inline .gitignore
data &lt;&lt;EOF
.gitignore
EOF
M 777 inline bob
END_OF_INPUT</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ git fast-import &lt;in
fatal: Corrupt mode: M 777 inline bob
fast-import: dumping crash report to .git/fast_import_crash_8434</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cat .git/fast_import_crash_8434
fast-import crash report:
    fast-import process: 8434
    parent process     : 1391
    at Sat Sep 1 00:58:12 2007</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>fatal: Corrupt mode: M 777 inline bob</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Most Recent Commands Before Crash
---------------------------------
  # mon tout premier commit
  commit refs/heads/master
  committer Shawn O. Pearce &lt;spearce&gt; 19283 -0400
  # Qui est ce gars d'ailleurs ?
  data &lt;&lt;EOF
  M 644 inline .gitignore
  data &lt;&lt;EOF
* M 777 inline bob</pre>
</div>
</div>
<div class="paragraph">
<p>Active Branch LRU</p>
</div>
<div class="listingblock">
<div class="content">
<pre>active_branches = 1 cur, 5 max

          pos clock name ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           1)      0 refs/heads/master

Inactive Branches</pre>
</div>
</div>
<div class="paragraph">
<p>refs/heads/master:
status      : active loaded dirty
tip commit  : 0000000000000000000000000000000000000000
old tree    : 0000000000000000000000000000000000000000
cur tree    : 0000000000000000000000000000000000000000
commit clock: 0
last pack   :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>------------------- END OF CRASH REPORT</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trucs_et_astuces">TRUCS ET ASTUCES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les trucs et astuces suivants ont été collectés auprès de divers utilisateurs de fast-import, et sont proposés ici sous forme de suggestions.</p>
</div>
<div class="sect2">
<h3 id="_utiliser_une_marque_par_commit">Utiliser une marque par commit</h3>
<div class="paragraph">
<p>Lors d&#8217;une conversion de dépôt, utilisez une marque unique par commit (<code>mark :&lt;n&gt;</code>) et fournissez l&#8217;option --export-marks sur la ligne de commande. fast-import va générer un fichier qui liste chaque marque et l&#8217;objet Git SHA-1 qui lui correspond. Si le frontal peut relier les marques au dépôt source, il est facile de vérifier l&#8217;exactitude et l&#8217;exhaustivité de l&#8217;importation en comparant chaque commit Git à la révision source correspondante.</p>
</div>
<div class="paragraph">
<p>Si vous venez d&#8217;un système tel que Perforce ou Subversion, cela devrait être assez simple, car la marque d&#8217;importation rapide peut également être le numéro de changeset de Perforce ou le numéro de révision de Subversion.</p>
</div>
</div>
<div class="sect2">
<h3 id="_passez_librement_dune_branche_à_lautre">Passez librement d&#8217;une branche à l&#8217;autre</h3>
<div class="paragraph">
<p>N’essayez pas d’optimiser le frontal pour qu’il s’attache à une seule branche à la fois pendant une importation. Bien que cela puisse être légèrement plus rapide pour l&#8217;importation rapide, cela tend à augmenter considérablement la complexité du code frontal.</p>
</div>
<div class="paragraph">
<p>La LRU des branches intégrée à fast-import tend à se comporter très bien, et le coût d&#8217;activation d&#8217;une branche inactive est si faible que le fait de rebondir entre les branches n&#8217;a pratiquement aucun impact sur les performances d&#8217;importation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gestion_des_renommages">Gestion des renommages</h3>
<div class="paragraph">
<p>Lors de l&#8217;importation d&#8217;un fichier ou d&#8217;un répertoire renommé, il suffit de supprimer le ou les anciens noms et de modifier le ou les nouveaux noms lors du commit correspondant. Git effectue la détection des renommages après coup, plutôt qu&#8217;explicitement lors d&#8217;un commit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_utilisez_des_branches_de_correction_des_étiquettes">Utilisez des branches de correction des étiquettes</h3>
<div class="paragraph">
<p>Certains autres systèmes SCM permettent à l&#8217;utilisateur de créer une étiquette à partir de plusieurs fichiers qui ne sont pas du même commit/changeset. Ou de créer des étiquettes qui sont un sous-ensemble des fichiers disponibles dans le dépôt.</p>
</div>
<div class="paragraph">
<p>Importer ces étiquettes tels quels dans Git est impossible sans faire au moins un commit qui "répare" les fichiers pour qu&#8217;ils correspondent au contenu de l&#8217;étiquette. Utilisez la commande &#8216;reset&#8217; de fast-import&#8217;pour réinitialiser une branche fictive en dehors de votre espace de branche normal au commit de base pour le tag, puis validez un ou plusieurs commits de correction de fichiers, et enfin étiquetez la branche fictive.</p>
</div>
<div class="paragraph">
<p>Par exemple, puisque toutes les branches normales sont stockées sous <code>refs/heads/</code>, nommez la branche de correction des étiquettes <code>CORRECTION_ETIQUETTE</code>. De cette façon, il est impossible que la branche de correction utilisée par l&#8217;importateur ait des conflits d&#8217;espace de noms avec les branches réelles importées depuis la source (le nom <code>CORRECTION_ETIQUETTE</code> n&#8217;est pas <code>refs/heads/CORRECTION_ETIQUETTE</code>).</p>
</div>
<div class="paragraph">
<p>Lorsque vous validez des corrections, pensez à utiliser <code>merge</code> pour connecter le(s) commit(s) qui fournissent des révisions de fichiers à la branche de correction. Cela permettra à des outils tels que <em>git blame</em> de suivre l&#8217;historique réel des commits et d&#8217;annoter correctement les fichiers sources.</p>
</div>
<div class="paragraph">
<p>Après que fast-import se termine, le frontal devra faire <code>rm .git/CORRECTION_ETIQUETTE</code> pour supprimer la branche factice.</p>
</div>
</div>
<div class="sect2">
<h3 id="_importez_maintenant_ré_empaquetez_plus_tard">Importez maintenant, ré-empaquetez plus tard</h3>
<div class="paragraph">
<p>Dès que l&#8217;importation rapide est terminée, le dépôt Git est complètement valide et prêt à être utilisé. En général, cela ne prend que très peu de temps, même pour les projets de grande envergure (plus de 100 000 commits).</p>
</div>
<div class="paragraph">
<p>Cependant, le repaquetage du dépôt est nécessaire pour améliorer la localité des données et les performances d&#8217;accès. Il peut également prendre des heures sur des projets extrêmement importants (surtout si -f et un grand paramètre --window sont utilisés). Puisque le ré-empaquetage est sûr à exécuter en même temps que les lecteurs et les écrivains, exécutez le ré-empaquetage en arrière-plan et laissez-le se terminer quand il se termine. Il n&#8217;y a aucune raison d&#8217;attendre pour explorer votre nouveau projet Git !</p>
</div>
<div class="paragraph">
<p>Si vous choisissez d’attendre la fin du ré-empaquetage, n’essayez pas d’exécuter des benchmarks ou des tests de performance tant que le ré-empaquetage n’est pas terminé. fast-import produit des fichiers paquets sous-optimaux qui ne sont tout simplement jamais vus en situation réelle d’utilisation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ré_empaquetage_des_données_historiques">Ré-empaquetage des données historiques</h3>
<div class="paragraph">
<p>Si vous ré-empaquetez des données importées très anciennes (par exemple, plus anciennes que l&#8217;année dernière), envisagez de dépenser un peu plus de temps CPU et de fournir --window=50 (ou plus) lorsque vous exécutez <em>git repack</em>. Cela prendra plus de temps, mais produira également un fichier de paquetage plus petit. Vous n&#8217;aurez à faire cet effort qu&#8217;une seule fois, et tous les utilisateurs de votre projet bénéficieront d&#8217;un dépôt plus petit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_incluez_des_messages_de_progrès">Incluez des messages de progrès</h3>
<div class="paragraph">
<p>Every once in a while have your frontend emit a <code>progress</code> message to fast-import. The contents of the messages are entirely free-form, so one suggestion would be to output the current month and year each time the current commit date moves into the next month. Your users will feel better knowing how much of the data stream has been processed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packfile_optimization">PACKFILE OPTIMIZATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When packing a blob fast-import always attempts to deltify against the last blob written. Unless specifically arranged for by the frontend, this will probably not be a prior version of the same file, so the generated delta will not be the smallest possible. The resulting packfile will be compressed, but will not be optimal.</p>
</div>
<div class="paragraph">
<p>Frontends which have efficient access to all revisions of a single file (for example reading an RCS/CVS ,v file) can choose to supply all revisions of that file as a sequence of consecutive <code>blob</code> commands. This allows fast-import to deltify the different file revisions against each other, saving space in the final packfile. Marks can be used to later identify individual file revisions during a sequence of <code>commit</code> commands.</p>
</div>
<div class="paragraph">
<p>The packfile(s) created by fast-import do not encourage good disk access patterns. This is caused by fast-import writing the data in the order it is received on standard input, while Git typically organizes data within packfiles to make the most recent (current tip) data appear before historical data. Git also clusters commits together, speeding up revision traversal through better cache locality.</p>
</div>
<div class="paragraph">
<p>For this reason it is strongly recommended that users repack the repository with <code>git repack -a -d</code> after fast-import completes, allowing Git to reorganize the packfiles for faster data access. If blob deltas are suboptimal (see above) then also adding the <code>-f</code> option to force recomputation of all deltas can significantly reduce the final packfile size (30-50% smaller can be quite typical).</p>
</div>
<div class="paragraph">
<p>Instead of running <code>git repack</code> you can also run <code>git gc --aggressive</code>, which will also optimize other things after an import (e.g. pack loose refs). As noted in the "AGGRESSIVE" section in <a href="git-gc.html">git-gc(1)</a> the <code>--aggressive</code> option will find new deltas with the <code>-f</code> option to <a href="git-repack.html">git-repack(1)</a>. For the reasons elaborated on above using <code>--aggressive</code> after a fast-import is one of the few cases where it&#8217;s known to be worthwhile.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_memory_utilization">MEMORY UTILIZATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a number of factors which affect how much memory fast-import requires to perform an import. Like critical sections of core Git, fast-import uses its own memory allocators to amortize any overheads associated with malloc. In practice fast-import tends to amortize any malloc overheads to 0, due to its use of large block allocations.</p>
</div>
<div class="sect2">
<h3 id="_per_object">per object</h3>
<div class="paragraph">
<p>fast-import maintains an in-memory structure for every object written in this execution. On a 32 bit system the structure is 32 bytes, on a 64 bit system the structure is 40 bytes (due to the larger pointer sizes). Objects in the table are not deallocated until fast-import terminates. Importing 2 million objects on a 32 bit system will require approximately 64 MiB of memory.</p>
</div>
<div class="paragraph">
<p>The object table is actually a hashtable keyed on the object name (the unique SHA-1). This storage configuration allows fast-import to reuse an existing or already written object and avoid writing duplicates to the output packfile. Duplicate blobs are surprisingly common in an import, typically due to branch merges in the source.</p>
</div>
</div>
<div class="sect2">
<h3 id="_per_mark">per mark</h3>
<div class="paragraph">
<p>Marks are stored in a sparse array, using 1 pointer (4 bytes or 8 bytes, depending on pointer size) per mark. Although the array is sparse, frontends are still strongly encouraged to use marks between 1 and n, where n is the total number of marks required for this import.</p>
</div>
</div>
<div class="sect2">
<h3 id="_per_branch">per branch</h3>
<div class="paragraph">
<p>Branches are classified as active and inactive. The memory usage of the two classes is significantly different.</p>
</div>
<div class="paragraph">
<p>Inactive branches are stored in a structure which uses 96 or 120 bytes (32 bit or 64 bit systems, respectively), plus the length of the branch name (typically under 200 bytes), per branch. fast-import will easily handle as many as 10,000 inactive branches in under 2 MiB of memory.</p>
</div>
<div class="paragraph">
<p>Active branches have the same overhead as inactive branches, but also contain copies of every tree that has been recently modified on that branch. If subtree <code>include</code> has not been modified since the branch became active, its contents will not be loaded into memory, but if subtree <code>src</code> has been modified by a commit since the branch became active, then its contents will be loaded in memory.</p>
</div>
<div class="paragraph">
<p>As active branches store metadata about the files contained on that branch, their in-memory storage size can grow to a considerable size (see below).</p>
</div>
<div class="paragraph">
<p>fast-import automatically moves active branches to inactive status based on a simple least-recently-used algorithm. The LRU chain is updated on each <code>commit</code> command. The maximum number of active branches can be increased or decreased on the command line with --active-branches=.</p>
</div>
</div>
<div class="sect2">
<h3 id="_par_arbre_actif">par arbre actif</h3>
<div class="paragraph">
<p>Trees (aka directories) use just 12 bytes of memory on top of the memory required for their entries (see &#8220;per active file&#8221; below). The cost of a tree is virtually 0, as its overhead amortizes out over the individual file entries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_par_entrée_active_de_fichier">par entrée active de fichier</h3>
<div class="paragraph">
<p>Files (and pointers to subtrees) within active trees require 52 or 64 bytes (32/64 bit platforms) per entry. To conserve space, file and tree names are pooled in a common string table, allowing the filename &#8220;Makefile&#8221; to use just 16 bytes (after including the string header overhead) no matter how many times it occurs within the project.</p>
</div>
<div class="paragraph">
<p>The active branch LRU, when coupled with the filename string pool and lazy loading of subtrees, allows fast-import to efficiently import projects with 2,000+ branches and 45,114+ files in a very limited memory footprint (less than 2.7 MiB per active branch).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_signals">SIGNALS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sending <strong>SIGUSR1</strong> to the <em>git fast-import</em> process ends the current packfile early, simulating a <code>checkpoint</code> command. The impatient operator can use this facility to peek at the objects and refs from an import in progress, at the cost of some added running time and worse compression.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">CONFIGURATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tout ce qui se trouve en dessous de cette ligne dans cette section est inclus de manière sélective à partir de la documentation <a href="git-config.html">git-config(1)</a>. Le contenu est le même que celui qui s&#8217;y trouve :</p>
</div>
<div class="paragraph">
<p>Unresolved directive in git-fast-import.txt - include::config/fastimport.txt[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_voir_aussi">VOIR AUSSI</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="git-fast-export.html">git-fast-export(1)</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git">GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fait partie de la suite <a href="git.html">git(1)</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_traduction">TRADUCTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cette  page de manuel a été traduite par Jean-Noël Avila &lt;jn.avila AT free DOT fr&gt; et les membres du projet git-manpages-l10n. Veuillez signaler toute erreur de traduction par un rapport de bogue sur le site <a href="https://github.com/jnavila/git-manpages-l10n" class="bare">https://github.com/jnavila/git-manpages-l10n</a> .</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-05-21 19:03:33 +0200
</div>
</div>
</body>
</html>