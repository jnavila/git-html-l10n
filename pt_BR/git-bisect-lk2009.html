<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.12"/>
<meta name="author" content="Christian Couder"/>
<title>Combatendo as regress√µes com comando git bisect</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="manpage">
<div id="header">
<h1>Combatendo as regress√µes com comando <code>git bisect</code> Manual Page</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_resumo_2">Resumo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O comando "git bisect" permite que os usu√°rios e os desenvolvedores de software encontrem facilmente o commit que introduziu uma regress√£o. Mostramos por que √© importante ter boas ferramentas para combater as regress√µes. N√≥s descrevemos como o comando "git bisect" funciona de fora e os algoritmos que ele utiliza por dentro. Em seguida, explicamos como tirar proveito do comando "git bisect" para melhorar as pr√°ticas atuais. E discutimos como o "git bisect" pode melhorar no futuro.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introdu√ß√£o_ao_git_bisect">Introdu√ß√£o ao "git bisect'</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O Git √© um sistema de controle de vers√£o distribu√≠do (DVCS) criado por Linus Torvalds e mantido por Junio Hamano.</p>
</div>
<div class="paragraph">
<p>No Git como em muitos outros sistemas de controle de vers√£o (VCS), as diferentes condi√ß√µes dos dados gerenciados pelo sistema s√£o chamados de commits. E como o VCS √© utilizado principalmente para gerenciar o c√≥digo-fonte do software, algumas altera√ß√µes "interessantes" do comportamento no software s√£o introduzidas em alguns commits.</p>
</div>
<div class="paragraph">
<p>De fato, as pessoas est√£o especialmente interessadas em confirma√ß√µes que introduzem um comportamento "ruim", chamado de bug ou regress√£o. Eles est√£o interessados nestes commits porque um commit (espero) cont√©m um conjunto muito pequeno de altera√ß√µes no c√≥digo-fonte. E √© muito mais f√°cil entender e corrigir adequadamente um problema quando voc√™ s√≥ precisa verificar um conjunto muito pequeno de altera√ß√µes do que quando n√£o sabe onde procurar.</p>
</div>
<div class="paragraph">
<p>Portanto, para ajudar as pessoas a encontrar os commits que introduzam um comportamento "ruim", o conjunto dos comandos "git bisect" foi inventado. E segue-se, √© claro, que na linguagem do comando "git bisect", os commits onde o "comportamento interessante" est√£o presente s√£o chamados de "commits ruins", enquanto os outros commits s√£o chamados de commits "bons". E um commit que introduz o comportamento que estamos interessados √© chamado de "primeiro commit ruim". Observe que pode haver mais de um "primeiro commit ruim" no espa√ßo do commit que estamos pesquisando.</p>
</div>
<div class="paragraph">
<p>Portanto, o comando "git bisect" foi projetado para ajudar a encontrar um "primeiro commit ruim". E para ser o mais eficiente poss√≠vel, ele tenta executar uma pesquisa bin√°ria.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uma_vis√£o_geral_da_luta_contra_as_regress√µes">Uma vis√£o geral da luta contra as regress√µes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_regress√µes_um_grande_problema">Regress√µes: um grande problema</h3>
<div class="paragraph">
<p>As regress√µes s√£o um grande problema na ind√∫stria do software. Mas √© dif√≠cil colocar alguns n√∫meros reais por tr√°s desta afirma√ß√£o.</p>
</div>
<div class="paragraph">
<p>Existem alguns n√∫meros sobre os erros em geral, como um estudo do NIST em 2002 <a href="#1">[1]</a> que dizia:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Bugs ou erros de software s√£o t√£o prevalentes e t√£o prejudiciais que custam √† economia dos Estados Unidos um valor estimado em US$59.5 bilh√µes anualmente, ou cerca de 0.6 por cento do produto interno bruto, de acordo com um estudo rec√©m-lan√ßado, encomendado pelo Instituto Nacional de Padr√µes e Tecnologia do Departamento de Com√©rcio (NIST). No n√≠vel nacional, mais da metade dos custos s√£o drenados pelos usu√°rios de software e o restante pelos desenvolvedores/fornecedores de software. O estudo tamb√©m descobriu que, embora todos os erros n√£o possam ser removidos, mais de um ter√ßo destes custos, ou um valor estimado em US$22.2 bilh√µes, poderia ser eliminado por uma infraestrutura de teste mais aprimorada onde permita a identifica√ß√£o e a remo√ß√£o antecipada e mais eficaz dos defeitos de software. Estas s√£o as economias associadas √† descoberta de uma porcentagem aumentada (mas n√£o 100 por cento) dos erros mais pr√≥ximos dos est√°gios de desenvolvimento onde s√£o introduzidos. Atualmente, mais da metade de todos os erros n√£o s√£o encontrados at√© serem baixados no processo de desenvolvimento ou durante o uso do software p√≥s-venda.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>E depois:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Os desenvolvedores de software j√° gastam aproximadamente 80 por cento dos custos de desenvolvimento na identifica√ß√£o e na corre√ß√£o dos defeitos, e ainda assim poucos produtos de qualquer tipo que n√£o sejam software s√£o enviados com n√≠veis muito altos de erros.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Eventualmente, a conclus√£o come√ßou com:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>O caminho para uma maior qualidade de software √© um teste significativamente aprimorado do software.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Existem outras estimativas dizendo que 80% do custo relacionado ao software √© relacionado com a manuten√ß√£o<a href="#2">[2]</a>.</p>
</div>
<div class="paragraph">
<p>Por√©m, de acordo com a Wikipedia <a href="#3">[3]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Uma percep√ß√£o comum da manuten√ß√£o √© que ela est√° apenas consertando bugs. No entanto, estudos e pesquisas ao longo dos anos indicaram que a maioria, mais de 80%, do esfor√ßo de manuten√ß√£o √© usada para a√ß√µes n√£o corretivas (Pigosky, 1997). Essa percep√ß√£o √© perpetuada atrav√©s dos usu√°rios que enviam relat√≥rios de problemas que, na realidade, s√£o aprimoramentos da funcionalidade no sistema.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Por√©m podemos adivinhar que o aprimoramento do software existente √© muito caro porque √© preciso estar atento √†s regress√µes. Pelo menos isso tornaria os estudos acima consistentes entre si.</p>
</div>
<div class="paragraph">
<p>√â claro que algum tipo de software √© desenvolvido, usado durante algum tempo sem ser muito aprimorado e finalmente, jogado fora. Nesse caso, √© claro, as regress√µes podem n√£o ser um grande problema. Por outro lado, h√° muitos softwares grandes que s√£o continuamente desenvolvidos e mantidos durante anos ou mesmo dezenas de anos por muitas pessoas. E como muitas vezes existem muitas pessoas que dependem (√†s vezes de maneira cr√≠tica) deste software, as regress√µes s√£o realmente um grande problema.</p>
</div>
<div class="paragraph">
<p>Um destes softwares √© o kernel do Linux. E se olharmos para o kernel Linux, podemos ver que muito tempo e esfor√ßo s√£o gastos para combater as regress√µes. O ciclo de lan√ßamento come√ßa com uma janela de mesclagem de duas semanas. Em seguida, o candidato do primeiro lan√ßamento (rc) √© marcado. E depois disso, cerca de 7 ou 8 vers√µes de candidatos aparecer√£o com cerca de uma semana de espa√ßo entre cada uma delas, antes do lan√ßamento final.</p>
</div>
<div class="paragraph">
<p>O tempo entre a primeira vers√£o rc (release candidate = vers√£o de lan√ßamento) e a vers√£o final deve ser utilizado para testar as vers√µes rc, resolver os bugs e especialmente as regress√µes. Mais de 80% deste tempo gira em torno do ciclo de lan√ßamento. Mas este ainda n√£o √© o fim da batalha, pois √© √≥bvio que ele continua ap√≥s o seu lan√ßamento.</p>
</div>
<div class="paragraph">
<p>E √© isso que o Ingo Molnar (um informado desenvolvedor de kernel do Linux) diz sobre o uso do <em>git bisect</em>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Eu o utilizo de forma mais ativa durante a janela da mesclagem (quando muitas √°rvores s√£o mescladas na upstream e quando o influxo de bugs √© mais alto) - e sim, houve casos onde eu o usei v√°rias vezes no dia. Minha m√©dia √© de aproximadamente uma vez por dia.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Portanto, as regress√µes s√£o combatidas o tempo todo pelos desenvolvedores e de fato, √© sabido que os bugs devem ser corrigidos o mais r√°pido poss√≠vel, t√£o logo sejam encontrados. √â por isso que √© importante ter boas ferramentas para este fim.</p>
</div>
</div>
<div class="sect2">
<h3 id="_outras_ferramentas_para_combater_as_regress√µes">Outras ferramentas para combater as regress√µes</h3>
<div class="paragraph">
<p>Ent√£o, quais s√£o as ferramentas utilizadas para combater as regress√µes? Eles s√£o quase os mesmos daqueles utilizados para combater os bugs tradicionais. As √∫nicas ferramentas espec√≠ficas s√£o pacotes de testes e as ferramentas similares ao "git bisect".</p>
</div>
<div class="paragraph">
<p>Os conjuntos de teste s√£o muito legais. Mas quando eles s√£o utilizados sozinhos, eles devem ser usados para que todos os testes sejam verificados ap√≥s cada commit. Isto significa que eles n√£o s√£o muito eficientes, porque muitos testes s√£o realizados sem resultados interessantes e sofrem com explos√µes combinat√≥rias.</p>
</div>
<div class="paragraph">
<p>De fato, o problema √© que um software grande geralmente possui muitas op√ß√µes de configura√ß√£o diferentes e que cada caso de teste deve passar para cada configura√ß√£o ap√≥s cada commit. Portanto, caso tenha para cada release: <em>N</em> configura√ß√µes, <em>M</em> commits e <em>T</em> casos de teste, execute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>N * M * T tests</pre>
</div>
</div>
<div class="paragraph">
<p>onde <em>N</em>, <em>M</em> e <em>T</em> est√£o crescendo com o tamanho do seu software.</p>
</div>
<div class="paragraph">
<p>Logo, n√£o ser√° poss√≠vel testar completamente tudo.</p>
</div>
<div class="paragraph">
<p>E caso alguns erros passarem pelo seu conjunto de testes, voc√™ poder√° adicionar um teste ao seu conjunto de testes. Por√©m caso queira utilizar o seu novo conjunto aprimorado de testes para descobrir onde o erro ocorreu, ser√° necess√°rio emular um processo de bisse√ß√£o ou talvez voc√™ teste cada commit sem rodeios de forma inversa a partir do commit "ruim" que voc√™ possa ter, sendo um total desperd√≠cio.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vis√£o_geral_do_git_bisect">Vis√£o geral do "git bisect"</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_iniciando_uma_bisse√ß√£o">Iniciando uma bisse√ß√£o</h3>
<div class="paragraph">
<p>O primeiro subcomando "git bisect" que ser√° usado √© "git bisect start" para iniciar a pesquisa. Em seguida, os limites devem ser definidos para limitar o espa√ßo dos commits. Isso geralmente √© feito com um commit "ruim" e pelo menos um commit "bom". Eles podem ser passados na chamada inicial para o comando "git bisect start" assim:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start [BAD [GOOD...]]</pre>
</div>
</div>
<div class="paragraph">
<p>ou eles podem ser definidos usando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect bad [COMMIT]</pre>
</div>
</div>
<div class="paragraph">
<p>e:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect good [COMMIT...]</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>BAD</code>, <code>GOOD</code> e <code>COMMIT</code> s√£o todos os nomes que podem ser resolvidos para um commit.</p>
</div>
<div class="paragraph">
<p>Ent√£o, o comando "git bisect" far√° a averigua√ß√£o de um commit de sua escolha e solicitar√° que o usu√°rio o teste, assim:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start v2.6.27 v2.6.25
Bisecting: 10928 revisions left to test after this (roughly 14 steps)
[2ec65f8b89ea003c27ff7723525a2ee335a2b393] x86: clean up using max_low_pfn on 32-bit</pre>
</div>
</div>
<div class="paragraph">
<p>Observe que o exemplo que usaremos √© realmente um exemplo de brinquedo; procuraremos o primeiro commit que possui uma vers√£o como "2.6.26-alguma-coisa", ou seja, o commit que possua uma linha "SUBLEVEL = 26" no n√≠vel mais alto do Makefile. Este √© um exemplo de um brinquedo, porque existem maneiras melhores para encontrar este commit com o Git em vez de utilizar o "git bisect" (por exemplo, "git blame" ou "git log -S&lt;texto&gt;").</p>
</div>
</div>
<div class="sect2">
<h3 id="_conduzindo_uma_bisse√ß√£o_manualmente">Conduzindo uma bisse√ß√£o manualmente</h3>
<div class="paragraph">
<p>Neste ponto, existem basicamente duas maneiras de conduzir a pesquisa. Pode ser acionado manualmente atrav√©s do usu√°rio ou automaticamente atrav√©s de um script ou comando.</p>
</div>
<div class="paragraph">
<p>Caso o usu√°rio esteja conduzindo, em cada etapa da pesquisa, o usu√°rio ter√° que testar a confirma√ß√£o atual e dizer se √© "bom" ou "ruim" utilizando os comandos <em>git bisect good</em> or <em>git bisect bad</em> respectivamente, como foram descritos acima. Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect bad
Bisecting: 5480 revisions left to test after this (roughly 13 steps)
[66c0b394f08fd89236515c1c84485ea712a157be] KVM: kill file-&gt;f_count abuse in kvm</pre>
</div>
</div>
<div class="paragraph">
<p>E depois de mais algumas etapas como essa, o comando "git bisect" acabar√° por encontrar um primeiro commit incorreto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect bad
2ddcca36c8bcfa251724fe342c8327451988be0d is the first bad commit
commit 2ddcca36c8bcfa251724fe342c8327451988be0d
Autor: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Data:   S√°b Mai 3 11:59:44 2008 -0700

    Linux 2.6.26-rc1

:100644 100644 5cf82581... 4492984e... M      Makefile</pre>
</div>
</div>
<div class="paragraph">
<p>Neste ponto, podemos ver o que o commit faz, dar uma olhada (se ainda n√£o tiver feito a averigua√ß√£o) ou mexer com ele, por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git show HEAD
commit 2ddcca36c8bcfa251724fe342c8327451988be0d
Autor: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Data:   S√°b Mai 3 11:59:44 2008 -0700

    Linux 2.6.26-rc1

diff --git a/Makefile b/Makefile
index 5cf8258..4492984 100644
--- a/Makefile
+++ b/Makefile
@@ -1,7 +1,7 @@
 VERSION = 2
 PATCHLEVEL = 6
-SUBLEVEL = 25
-EXTRAVERSION =
+SUBLEVEL = 26
+EXTRAVERSION = -rc1
 NAME = Funky Weasel is Jiggy wit it

 # *DOCUMENTA√á√ÉO*</pre>
</div>
</div>
<div class="paragraph">
<p>E quando terminarmos, podemos usar o comando "git bisect reset" para voltar ao ramo em que est√°vamos antes de come√ßarmos a dividir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect reset
Checking out files: 100% (21549/21549), done.
Previous HEAD position was 2ddcca3... Linux 2.6.26-rc1
Switched to branch 'master'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conduzindo_uma_bisse√ß√£o_automaticamente">Conduzindo uma bisse√ß√£o automaticamente</h3>
<div class="paragraph">
<p>A outra maneira de conduzir o processo de bisse√ß√£o √© dizer ao <code>git bisect</code> para lan√ßar um script ou comando a cada etapa da bisse√ß√£o para saber se o compromisso atual √© "bom" ou "ruim". Para fazer isso, n√≥s usamos o comando "git bisect run". Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start v2.6.27 v2.6.25
Bisecting: 10928 revisions left to test after this (roughly 14 steps)
[2ec65f8b89ea003c27ff7723525a2ee335a2b393] x86: clean up using max_low_pfn on 32-bit
$
$ git bisect run grep '^SUBLEVEL = 25' Makefile
running grep ^SUBLEVEL = 25 Makefile
Bisecting: 5480 revisions left to test after this (roughly 13 steps)
[66c0b394f08fd89236515c1c84485ea712a157be] KVM: kill file-&gt;f_count abuse in kvm
running grep ^SUBLEVEL = 25 Makefile
SUBLEVEL = 25
Bisecting: 2740 revisions left to test after this (roughly 12 steps)
[671294719628f1671faefd4882764886f8ad08cb] V4L/DVB(7879): Adding cx18 Support for mxl5005s
...
...
running grep ^SUBLEVEL = 25 Makefile
Bisecting: 0 revisions left to test after this (roughly 0 steps)
[2ddcca36c8bcfa251724fe342c8327451988be0d] Linux 2.6.26-rc1
running grep ^SUBLEVEL = 25 Makefile
2ddcca36c8bcfa251724fe342c8327451988be0d is the first bad commit
commit 2ddcca36c8bcfa251724fe342c8327451988be0d
Author: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;
Date:   Sat May 3 11:59:44 2008 -0700

    Linux 2.6.26-rc1

:100644 100644 5cf82581... 4492984e... M      Makefile
bisect run success</pre>
</div>
</div>
<div class="paragraph">
<p>Neste exemplo, passamos "grep <em>^SUBLEVEL = 25</em> Makefile" como par√¢metro para o comando <code>git bisect run</code>. Isso significa que, a cada passo, o comando <em>grep</em> que encaminhamos ser√° iniciado. E caso encerre com o c√≥digo 0 (que significa sucesso), o comando <code>git bisect</code> marcar√° a condi√ß√£o atual como "bom". Caso encerre com o c√≥digo 1 (ou qualquer c√≥digo entre 1 e incluindo o 127, exceto o c√≥digo especial 125), a condi√ß√£o atual ser√° marcado como "ruim".</p>
</div>
<div class="paragraph">
<p>O c√≥digo de sa√≠da entre 128 e 255 √© especial para o comando "git bisect run". Eles fazem parar imediatamente o processo de bisse√ß√£o. √â √∫til por exemplo, caso o comando encaminhado demorar muito para ser conclu√≠do, por √© poss√≠vel encerr√°-lo com um sinal que interromper√° o processo de bisse√ß√£o.</p>
</div>
<div class="paragraph">
<p>Tamb√©m pode ser √∫til nos scripts encaminhados para o comando "git bisect run" para "exit 255" Caso alguma situa√ß√£o muito anormal seja detectada.</p>
</div>
</div>
<div class="sect2">
<h3 id="_evitando_os_commits_que_n√£o_foram_testados">Evitando os commits que n√£o foram testados</h3>
<div class="paragraph">
<p>√Äs vezes, acontece que a condi√ß√£o atual n√£o possa ser testada, por exemplo, caso ele n√£o seja compilado porque houve um erro que o impedia naquele momento. √â para isso que serve o c√≥digo de encerramento especial 125. Diz ao comando "git bisect run" que o commit atual deve ser marcado como n√£o test√°vel e que outro deve ser selecionado e averiguado.</p>
</div>
<div class="paragraph">
<p>Caso o processo de bisse√ß√£o tenha sido conduzido manualmente, ser√° poss√≠vel utilizar o comando "git bisect skip" para realizar a mesma coisa. (De fato, o c√≥digo de sa√≠da especial 125 faz o comando "git bisect run" utilizar "git bisect skip" em segundo plano.)</p>
</div>
<div class="paragraph">
<p>Ou, caso queira mais controle, poder√° inspecionar a condi√ß√£o atual usando, por exemplo, o comando "git bisect visualize". Ele iniciar√° o gitk (ou o comando "git log" caso a vari√°vel de ambiente <code>DISPLAY</code> n√£o estiver configurada) para ajud√°-lo a encontrar um melhor ponto de bisse√ß√£o.</p>
</div>
<div class="paragraph">
<p>De qualquer forma, caso voc√™ tenha uma sequ√™ncia de commits n√£o test√°veis, pode acontecer que a regress√£o que voc√™ est√° procurando tenha sido introduzido por um destes commits n√£o test√°veis. Nesse caso, n√£o √© poss√≠vel saber com certeza qual o commit introduziu a regress√£o.</p>
</div>
<div class="paragraph">
<p>Portanto, tenha utilizado o comando "git bisect skip" (ou o script de execu√ß√£o encerrou com o c√≥digo especial 125), poder√° obter um resultado como este:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Restam apenas os commits que foram 'ignorados' e faltam testar.
O primeiro commit incorreto pode ser qualquer um destes:
15722f2fa328eaba97022898a305ffc8172db6b1
78e86cf3e850bd755bb71831f42e200626fbd1e0
e15b73ad3db9b48d7d1ade32f8cd23a751fe0ace
070eab2303024706f2924822bfec8b9847e4ac1b
N√£o podemos mais seguir adiante com o bisect!</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_salvando_um_registro_log_e_reproduzindo_o">Salvando um registro log e reproduzindo-o</h3>
<div class="paragraph">
<p>Caso queira exibir para outras pessoas o seu processo de bisse√ß√£o, √© poss√≠vel obter um registro log utilizando, por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect log &gt; bisect_log.txt</pre>
</div>
</div>
<div class="paragraph">
<p>E √© poss√≠vel reproduzi-lo utilizando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect replay bisect_log.txt</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_detalhes_do_git_bisect">Detalhes do "git bisect"</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_algoritmo_da_bisse√ß√£o">Algoritmo da bisse√ß√£o</h3>
<div class="paragraph">
<p>Como o commit do Git forma um grafo ac√≠clico direcionado (DAG), encontrar o melhor commit de bisse√ß√£o para testar em cada etapa n√£o √© t√£o simples. De qualquer forma, Linus encontrou e implementou um algoritmo "de forama verdadeiramente est√∫pida", posteriormente aprimorado por Junio Hamano, que funciona muito bem.</p>
</div>
<div class="paragraph">
<p>Portanto, o algoritmo usado pelo comando "git bisect" para encontrar a melhor bisse√ß√£o do commit quando n√£o h√° commits que foram ignorados √© o seguinte:</p>
</div>
<div class="paragraph">
<p>1) mantenha apenas os commits que:</p>
</div>
<div class="paragraph">
<p>a) s√£o ancestrais do commit "ruim" (incluindo o pr√≥prio commit "ruim"),
b) n√£o s√£o ancestrais de um commit "bom" (excluindo os commits "bons").</p>
</div>
<div class="paragraph">
<p>Significa que nos livramos dos commits que n√£o interessam do DAG.</p>
</div>
<div class="paragraph">
<p>Como por exemplo, caso comecemos com um grafo como este:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>G-Y-G-W-W-W-X-X-X-X
           \ /
            W-W-B
           /
Y---G-W---W
 \ /   \
Y-Y     X-X-X-X

-&gt; o tempo passa neste sentido -&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>onde <em>B</em> √© o commit "ruim", o "G" s√£o os commits "bons" e <em>W</em>, <em>X</em> e <em>Y</em> s√£o outros commits, obteremos o seguinte grafo ap√≥s esta primeira etapa:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>W-W-W
     \
      W-W-B
     /
W---W</pre>
</div>
</div>
<div class="paragraph">
<p>Portanto, apenas os commits <em>W</em> e <em>B</em> ser√£o mantidos. Como os commits <em>X</em> e <em>Y</em> ser√£o removidos pelas regras a) e b) respectivamente, e porque os commits <em>G</em> s√£o removidos pela regra b) tamb√©m.</p>
</div>
<div class="paragraph">
<p>Nota para os usu√°rios do Git, √© equivalente a manter apenas o commit informado por:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git rev-list BAD --not GOOD1 GOOD2...</pre>
</div>
</div>
<div class="paragraph">
<p>Observe tamb√©m que n√£o exigimos que os commits mantidos sejam descendentes de um "bom" commit. Portanto, no exemplo a seguir, os commits <em>W</em> e <em>Z</em> ser√£o mantidas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>G-W-W-W-B
   /
Z-Z</pre>
</div>
</div>
<div class="paragraph">
<p>2) a partir das extremidades "boas" do grafo, associe para cada commit a quantidade de ancestrais que possui mais um</p>
</div>
<div class="paragraph">
<p>Como por exemplo, com o grafo a seguir, onde <em>H</em> √© o commit "ruim" e <em>A</em> e o <em>D</em> s√£o alguns parentes de alguns commits "bons":</p>
</div>
<div class="listingblock">
<div class="content">
<pre>A-B-C
     \
      F-G-H
     /
D---E</pre>
</div>
</div>
<div class="paragraph">
<p>isto nos d√°:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1 2 3
A-B-C
     \6 7 8
      F-G-H
1   2/
D---E</pre>
</div>
</div>
<div class="paragraph">
<p>3) associado para cada commit: min(X, N - X)</p>
</div>
<div class="paragraph">
<p>onde <em>X</em> √© o valor associado ao commit na etapa 2) e <em>N</em> √© a quantidade total dos commits no grafo.</p>
</div>
<div class="paragraph">
<p>No exemplo acima, temos <em>N=8</em>, portanto, isso dar√°:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>1 2 3
A-B-C
     \2 1 0
      F-G-H
1   2/
D---E</pre>
</div>
</div>
<div class="paragraph">
<p>4) o melhor ponto de bisse√ß√£o √© o commit com o maior n√∫mero associado a ele</p>
</div>
<div class="paragraph">
<p>Portanto, no exemplo acima, o melhor ponto de bisse√ß√£o √© o commit <em>C</em>.</p>
</div>
<div class="paragraph">
<p>5) observe que alguns atalhos s√£o implementados para acelerar o algoritmo</p>
</div>
<div class="paragraph">
<p>Como conhecemos o "N" desde o in√≠cio, sabemos que m√≠nimo (X, N - X) n√£o pode ser maior que N/2. Portanto, durante as etapas 2) e 3), se associarmos N/2 a um commit, sabemos que este √© o melhor ponto de bisse√ß√£o. Portanto neste caso, podemos simplesmente parar de processar qualquer outro commit e retorne para o commit atual.</p>
</div>
</div>
<div class="sect2">
<h3 id="_depura√ß√£o_do_algoritmo_da_bisse√ß√£o">Depura√ß√£o do algoritmo da bisse√ß√£o</h3>
<div class="paragraph">
<p>Para qualquer grafo do commit, voc√™ pode ver o n√∫mero associado a cada commit utilizando o comando "git rev-list --bisect-all".</p>
</div>
<div class="paragraph">
<p>Por exemplo, para o grafo acima, o comando seria:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git rev-list --bisect-all BAD --not GOOD1 GOOD2</pre>
</div>
</div>
<div class="paragraph">
<p>geraria algo como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>e15b73ad3db9b48d7d1ade32f8cd23a751fe0ace (dist=3)
15722f2fa328eaba97022898a305ffc8172db6b1 (dist=2)
78e86cf3e850bd755bb71831f42e200626fbd1e0 (dist=2)
a1939d9a142de972094af4dde9a544e577ddef0e (dist=2)
070eab2303024706f2924822bfec8b9847e4ac1b (dist=1)
a3864d4f32a3bf5ed177ddef598490a08760b70d (dist=1)
a41baa717dd74f1180abf55e9341bc7a0bb9d556 (dist=1)
9e622a6dad403b71c40979743bb9d5be17b16bd6 (dist=0)</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_discuss√£o_sobre_o_algoritmo_da_bissec√ß√£o">Discuss√£o sobre o algoritmo da bissec√ß√£o</h3>
<div class="paragraph">
<p>Primeiro vamos definir "melhor ponto de bisse√ß√£o". Digamos que um commt <em>X</em> √© o melhor ponto de bisse√ß√£o ou um melhor commit de bisse√ß√£o caso conhe√ßa a sua condi√ß√£o ("bom" ou "ruim") fornece o m√°ximo de informa√ß√µes poss√≠veis caso a condi√ß√£o do commit seja "bom" ou "ruim".</p>
</div>
<div class="paragraph">
<p>Isto significa que as melhores bisse√ß√£o dos commits s√£o os commits onde a seguinte fun√ß√£o seja m√°xima:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>f(X) = min(information_if_good(X), information_if_bad(X))</pre>
</div>
</div>
<div class="paragraph">
<p>onde <em>information_if_good(X)</em> √© a informa√ß√£o que obtemos caso <em>X</em> seja bom e <em>information_if_bad(X)</em> √© a informa√ß√£o que obtemos caso <em>X</em> seja ruim.</p>
</div>
<div class="paragraph">
<p>Agora vamos supor que exista apenas um "primeiro commit ruim". Isto significa que todos os seus descendentes s√£o "ruins" e todos os outros commits s√£o "bons". E iremos supor que todos os commits t√™m uma probabilidade igual de serem bons ou ruins, ou de serem o primeiro commit incorreto, portanto, conhecer a condi√ß√£o do commit <em>c</em> d√° sempre a mesma quantidade de informa√ß√µes onde quer que estes commits <em>c</em> estejam no grafo e independente do que o <em>c</em> seja. (Portanto, supomos que estes commits, seja por exemplo, em um ramo ou pr√≥ximo a um commit bom ou ruim, n√£o forne√ßam mais ou menos informa√ß√µes).</p>
</div>
<div class="paragraph">
<p>Vamos supor tamb√©m que tenhamos um grafo limpo como um ap√≥s o outro
1) no algoritmo de bisse√ß√£o acima. Isso significa que podemos medir as informa√ß√µes que obtemos em termos quantidade dos commits que podemos remover do grafo.</p>
</div>
<div class="paragraph">
<p>E vamos receber um commit <em>X</em> no grafo.</p>
</div>
<div class="paragraph">
<p>Caso <em>X</em> seja considerado "bom", sabemos que os seus ancestrais s√£o todos "bons", ent√£o queremos dizer que:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>information_if_good(X) = number_of_ancestors(X)  (TRUE)</pre>
</div>
</div>
<div class="paragraph">
<p>E isso √© verdade porque na etapa 1) b) removemos os ancestrais dos "bons" commits.</p>
</div>
<div class="paragraph">
<p>Caso <em>X</em> seja considerado "ruim", sabemos que todos os seus descendentes s√£o "ruins", ent√£o queremos dizer que:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>information_if_bad(X) = number_of_descendants(X)  (WRONG)</pre>
</div>
</div>
<div class="paragraph">
<p>Mas √© errado, porque na etapa 1) a) mantemos apenas os ancestrais dos commits ruins. Ent√£o obtemos mais informa√ß√µes quando um commit √© marcado como "ruim", porque tamb√©m sabemos que os ancestrais do commit "ruim" anterior, n√£o s√£o ancestrais do novo commit "ruim" que n√£o s√£o o primeiro commit incorreto. N√£o sabemos se eles s√£o bons ou ruins, por√©m sabemos que eles n√£o s√£o o primeiro commit incorreto porque n√£o s√£o ancestrais do novo commit "ruim".</p>
</div>
<div class="paragraph">
<p>Portanto, quando um commit √© marcado como "ruim", sabemos que podemos remover todos os commit no grafo, exceto aqueles que s√£o os ancestrais do novo commit "ruim". Isto significa que:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>information_if_bad(X) = N - number_of_ancestors(X)  (TRUE)</pre>
</div>
</div>
<div class="paragraph">
<p>onde <em>N</em> √© a quantidade de commits no grafo (limpos).</p>
</div>
<div class="paragraph">
<p>Portanto, no final, isso significa que, para encontrar as melhores bisse√ß√µes dos commits, devemos maximizar a fun√ß√£o:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>f(X) = min(number_of_ancestors(X), N - number_of_ancestors(X))</pre>
</div>
</div>
<div class="paragraph">
<p>E isso √© bom porque na etapa 2) calculamos <em>number_of_ancestors(X)</em> (a quantidade de ancestrais) e, na etapa 3) calculamos <em>f(X)</em>.</p>
</div>
<div class="paragraph">
<p>Vamos tomar o seguinte grafo como exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>            G-H-I-J
           /       \
A-B-C-D-E-F         O
           \       /
            K-L-M-N</pre>
</div>
</div>
<div class="paragraph">
<p>Caso calculemos a seguinte fun√ß√£o n√£o ideal nela:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>g(X) = min(number_of_ancestors(X), number_of_descendants(X))</pre>
</div>
</div>
<div class="paragraph">
<p>n√≥s temos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>            4 3 2 1
            G-H-I-J
1 2 3 4 5 6/       \0
A-B-C-D-E-F         O
           \       /
            K-L-M-N
            4 3 2 1</pre>
</div>
</div>
<div class="paragraph">
<p>por√©m com o algor√≠timo utilizado pelo <em>git bisect</em> n√≥s temos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>            7 7 6 5
            G-H-I-J
1 2 3 4 5 6/       \0
A-B-C-D-E-F         O
           \       /
            K-L-M-N
            7 7 6 5</pre>
</div>
</div>
<div class="paragraph">
<p>Ent√£o escolhemos <em>G</em>, <em>H</em>, <em>K</em> ou <em>L</em> como o melhor ponto de bisse√ß√£o, que √© melhor que <em>F</em>. Porque, por exemplo, o <em>L</em> √© ruim, saberemos n√£o apenas que <em>L</em>, <em>M</em> e <em>N</em> s√£o ruins, mas tamb√©m que o <em>G</em>, <em>H</em>, <em>I</em> e <em>J</em> n√£o s√£o os primeiros commits ruins (pois supomos que haja apenas um primeiro commit ruim e ele deve ser um ancestral do <em>L</em>).</p>
</div>
<div class="paragraph">
<p>Portanto, o algoritmo atual parece ser o melhor poss√≠vel, dado o que supomos inicialmente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_algoritmo_de_salto">Algoritmo de salto</h3>
<div class="paragraph">
<p>Quando alguns commits forem ignoradas (utilizando o comando "git bisect skip"), o algoritmo de bisse√ß√£o √© o mesmo da etapa 1) a 3). Ent√£o utilizamos aproximadamente as seguintes etapas:</p>
</div>
<div class="paragraph">
<p>6) classifique o commit diminuindo o valor associado</p>
</div>
<div class="paragraph">
<p>7) se o primeiro commit n√£o foi ignorado, podemos retorn√°-lo e parar aqui</p>
</div>
<div class="paragraph">
<p>8) caso contr√°rio, filtre todos os commits ignorados da lista</p>
</div>
<div class="paragraph">
<p>9) use um gerador de n√∫mero pseudo-aleat√≥rio (PRNG) para gerar um n√∫mero aleat√≥rio entre <em>0</em> e <em>1</em></p>
</div>
<div class="paragraph">
<p>10) multiplique este n√∫mero aleat√≥rio com a a sua raiz quadrada para envies√°-lo para 0</p>
</div>
<div class="paragraph">
<p>11) multiplicada o resultado pela quantidade dos commits na lista dos filtrados e obtenha um √≠ndice nesta lista</p>
</div>
<div class="paragraph">
<p>12) retorne o commit ao √≠ndice que foi processado</p>
</div>
</div>
<div class="sect2">
<h3 id="_discuss√£o_sobre_o_algoritmo_de_salto">Discuss√£o sobre o algoritmo de salto</h3>
<div class="paragraph">
<p>Ap√≥s a etapa 7) (no algoritmo <em>skip</em>), poder√≠amos verificar se o segundo commit foi ignorado e retorn√°-lo, se n√£o for o caso. E de fato, este foi o algoritmo que utilizamos quando o comando "git bisect skip" foi desenvolvido no Git vers√£o 1.5.4 (lan√ßado em 1¬∫ de fevereiro de 2008) at√© o Git vers√£o 1.6.4 (lan√ßado em 29 de julho de 2009).</p>
</div>
<div class="paragraph">
<p>Por√©m o Ingo Molnar e o H. Peter Anvin (outro informado desenvolvedor de kernel do linux) reclamaram que √†s vezes os melhores pontos de bisse√ß√£o aconteciam em uma √°rea onde todos os commits eram test√°veis. E neste caso, o usu√°rio foi solicitado a testar muitos commits onde n√£o s√£o poss√≠veis de serem testados, o que poderia ser muito ineficiente.</p>
</div>
<div class="paragraph">
<p>Na verdade, os commits n√£o test√°veis geralmente n√£o s√£o test√°veis porque uma quebra foi introduzida em algum momento, e essa quebra foi corrigida somente depois que muitos outras commits foram introduzidos.</p>
</div>
<div class="paragraph">
<p>Naturalmente, essa quebra n√£o est√° relacionada √† quebra que estamos tentando localizar no grafo do commit. Por√©m isso nos impede de saber se o "mau comportamento" que interessa est√° presente ou n√£o.</p>
</div>
<div class="paragraph">
<p>Portanto, √© fato que os commits pr√≥ximos de um commit onde o teste n√£o possa ser feito t√™m uma alta probabilidade de serem elas mesmas as n√£o test√°veis. Os melhores commits para bisse√ß√£o tamb√©m s√£o frequentemente encontrados juntos (devido ao algoritmo de bisse√ß√£o).</p>
</div>
<div class="paragraph">
<p>√â por isso que √© uma p√©ssima ideia escolher a pr√≥xima melhor bisse√ß√£o do commit que n√£o foi ignorado quando o primeiro tenha sido ignorado.</p>
</div>
<div class="paragraph">
<p>Descobrimos que a maioria dos commits no grafo pode fornecer muitas informa√ß√µes quando s√£o testadas. E os commits que, em m√©dia, n√£o fornecer√£o muita informa√ß√£o s√£o os pr√≥ximos commits bons e ruins.</p>
</div>
<div class="paragraph">
<p>Portanto, ao usar um PRNG com um vi√©s para favorecer os commits longe dos commits bons e ruins parecia ser uma boa escolha.</p>
</div>
<div class="paragraph">
<p>Uma melhoria √≥bvia neste algoritmo seria procurar por um commit que tenha um valor associado pr√≥ximo ao do melhor commit de bisse√ß√£o e que esteja em outra ramifica√ß√£o, antes de utilizar o PRNG. Pois caso este commit exista, √© muito prov√°vel que tamb√©m n√£o seja test√°vel, logo, provavelmente fornecer√° mais informa√ß√µes do que o que foi selecionado aleatoriamente.</p>
</div>
</div>
<div class="sect2">
<h3 id="_verificando_as_bases_mescladas">Verificando as bases mescladas</h3>
<div class="paragraph">
<p>H√° outro ajuste no algoritmo de bisse√ß√£o que n√£o foi descrito no "algoritmo de bisse√ß√£o" acima.</p>
</div>
<div class="paragraph">
<p>Nos exemplos anteriores, supomos que os commits "bons" eram ancestrais do commit "ruim". Por√©m isto n√£o √© um requisito do "git bisect".</p>
</div>
<div class="paragraph">
<p>√â claro que o commit "ruim" n√£o pode ser um ancestral de um commit "bom", porque os ancestrais dos commits bons devem ser "bons". E todos os commits "bons" devem estar relacionadas ao commit "ruim". Eles n√£o podem estar em um ramo que n√£o possua v√≠nculo com o ramo do commit "ruim". Por√©m √© poss√≠vel que um bom commit esteja relacionado a um commit ruim e no entanto, n√£o seja um de seus ancestrais e nem um dos seus descendentes.</p>
</div>
<div class="paragraph">
<p>Como por exemplo, pode haver um ramo "main" (principal) e um ramo "dev" que foi bifurcada no ramo principal em um commit chamado "D" desta maneira:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>A-B-C-D-E-F-G  &lt;--main
       \
        H-I-J  &lt;--dev</pre>
</div>
</div>
<div class="paragraph">
<p>O commit "D" √© chamado de uma "base de mesclagem" para o ramo "main" e "dev" pois √© o melhor ancestral comum destas ramifica√ß√µes para uma mesclagem.</p>
</div>
<div class="paragraph">
<p>Agora, suponha que o commit J seja ruim, que o commit G seja bom e que apliquemos o algoritmo de bisse√ß√£o como foi descrito anteriormente.</p>
</div>
<div class="paragraph">
<p>Conforme descrito na etapa 1) b) do algoritmo de bisse√ß√£o, removemos todos os ancestrais dos commits bons porque eles tamb√©m devem ser bons.</p>
</div>
<div class="paragraph">
<p>Ent√£o, ficar√≠amos com apenas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>H-I-J</pre>
</div>
</div>
<div class="paragraph">
<p>Mas o que acontece caso o primeiro commit incorreto seja o "B" e se foi corrigido no ramo "principal" (main) pelo commit "F"?</p>
</div>
<div class="paragraph">
<p>O resultado dessa bisse√ß√£o seria que descobrir√≠amos que "H" √© o primeiro commit ruim, quando na verdade √© o "B". Portanto, isso seria errado!</p>
</div>
<div class="paragraph">
<p>E sim, na pr√°tica pode acontecer das pessoas que trabalham em um ramo n√£o estejam cientes que as pessoas que trabalham no outro ramo corrigiram um bug! Tamb√©m pode acontecer que F tenha corrigido mais de um bug ou que seja uma revers√£o de algum grande esfor√ßo de desenvolvimento que n√£o estava pronto para ser liberado.</p>
</div>
<div class="paragraph">
<p>De fato, as equipes de desenvolvimento geralmente mant√™m um ramo de desenvolvimento e um ramo de manuten√ß√£o, seria muito f√°cil para eles caso o comando "git bisect" funcionasse quando quisessem dividir uma regress√£o no ramo de desenvolvimento que n√£o est√° no ramo de manuten√ß√£o. Eles devem ser capaz de come√ßar a dividir utilizando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start dev main</pre>
</div>
</div>
<div class="paragraph">
<p>Para ativar esse recurso adicional, quando uma bisse√ß√£o √© iniciada e quando alguns commits bons n√£o s√£o ancestrais do commit ruim, primeiro calculamos a mesclagem das bases entre os commits ruins e os bons, escolhemos estas bases da mesclagem como os primeiros commits que ser√£o averiguados e testados.</p>
</div>
<div class="paragraph">
<p>Caso ocorra de uma base que foi mesclada esteja ruim, o processo de bisse√ß√£o ser√° interrompido com uma mensagem como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>A base da mesclagem BBBBBB √© ruim.
Isto significa que o bug foi corrigido entre BBBBBB e [GGGGGG, ...].</pre>
</div>
</div>
<div class="paragraph">
<p>onde BBBBBB √© o hash sha1 da base de mesclagem ruim e [GGGGGG, &#8230;&#8203;] √© uma lista separada por v√≠rgulas do sha1 do bom commit.</p>
</div>
<div class="paragraph">
<p>Caso algumas das mesclagens das bases sejam ignoradas, o processo de bisse√ß√£o continuar√°, por√©m a seguinte mensagem ser√° impressa para cada mesclagem da base que foi ignorada:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Aviso: a base da mesclagem entre BBBBBB e [GGGGGG,...] deve ser ignorado.
Portanto, n√£o podemos ter certeza de que o primeiro commit ruim esteja entre MMMMMM e BBBBBB.
Continuamos mesmo assim.</pre>
</div>
</div>
<div class="paragraph">
<p>onde BBBBBB √© o hash sha1 do commit ruim, o MMMMMM √© o sha1 da base da mesclagem que √© ignorado e [GGGGGG, &#8230;&#8203;] √© uma lista separada por v√≠rgulas do sha1 dos commits bons.</p>
</div>
<div class="paragraph">
<p>Portanto, caso n√£o haja uma base da mesclagem ruim, o processo de bisse√ß√£o continuar√° normalmente ap√≥s esta etapa.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_melhores_pr√°ticas_para_as_bisse√ß√µes">Melhores pr√°ticas para as bisse√ß√µes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_usando_conjuntos_de_teste_e_o_comando_git_bisect_juntos">Usando conjuntos de teste e o comando <em>git bisect</em> juntos</h3>
<div class="paragraph">
<p>Caso voc√™ possua um conjunto de testes e utiliza o <code>git bisect</code>, torna-se menos importante verificar se todos os testes passam ap√≥s cada confirma√ß√£o. Embora, claro, seja provavelmente uma boa ideia fazer algumas verifica√ß√µes para evitar a quebra de muitas coisas pois isso pode dificultar a bisse√ß√£o dos outros bugs.</p>
</div>
<div class="paragraph">
<p>Voc√™ pode concentrar os teus esfor√ßos para verificar alguns pontos (as vers√µes rc e beta por exemplo) que todos os casos de teste <em>T</em> passam por todas as <em>N</em> configura√ß√µes. E quando alguns testes n√£o passam, voc√™ pode usar "git bisect" (ou melhor, "git bisect run"). Ent√£o voc√™ deve executar a grosso modo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>c * N * T + b * M * log2(M) tests</pre>
</div>
</div>
<div class="paragraph">
<p>onde <em>c</em> √© a quantidade de rodadas de teste (portanto, uma constante pequena) e <em>b</em> √© a propor√ß√£o dos erros por commit(espero que tamb√©m seja uma constante pequena).</p>
</div>
<div class="paragraph">
<p>Ent√£o √© claro que √© muito melhor que O(N * T) vs O(N * T * M) caso testasse tudo ap√≥s cada commit.</p>
</div>
<div class="paragraph">
<p>Isto significa que os conjuntos de testes s√£o bons para evitar que o commit de alguns bugs sejam feitos e tamb√©m s√£o bons para dizer que voc√™ tem alguns bugs. Mas eles n√£o s√£o t√£o bons para dizer onde alguns erros foram introduzidos. Para te dizer isso eficientemente, o comando <em>git bisect</em> √© necess√°rio.</p>
</div>
<div class="paragraph">
<p>A outra coisa interessante dos conjuntos de testes √© que, quando voc√™ tem um, j√° sabe como testar o mau comportamento. Portanto, voc√™ pode usar este conhecimento para criar um novo caso de teste para o comando "git bisect" quando parecer que uma regress√£o existe. Portanto, ser√° mais f√°cil dividir o bug e corrigi-lo. E ent√£o voc√™ pode adicionar o caso de teste que voc√™ acabou de criar ao seu conjunto de testes.</p>
</div>
<div class="paragraph">
<p>Portanto, caso saiba criar casos de teste e dividir em partes, estar√° sujeito a um c√≠rculo virtuoso:</p>
</div>
<div class="paragraph">
<p>mais testes &#8658; mais f√°cil de criar testes &#8658; mais f√°cil de fazer <em>bisect</em> &#8658; mais testes</p>
</div>
<div class="paragraph">
<p>Portanto, os conjuntos de testes e o comando "git bisect", quando utilizadas em conjunto, s√£o ferramentas complementares que s√£o muito poderosas e eficientes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_falhas_na_constru√ß√£o_da_bisse√ß√£o">Falhas na constru√ß√£o da bisse√ß√£o</h3>
<div class="paragraph">
<p>Voc√™ pode facilmente fazer o <em>bisect</em> automaticamente em constru√ß√µes quebradas usando algo como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start BAD GOOD
$ git bisect run make</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_encaminhando_sh_c_alguns_comandos_para_git_bisect_run">Encaminhando sh -c "alguns comandos" para "git bisect run"</h3>
<div class="paragraph">
<p>Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect run sh -c "make || exit 125; ./my_app | grep 'good output'"</pre>
</div>
</div>
<div class="paragraph">
<p>Por outro lado, caso fa√ßa isso com frequ√™ncia, pode valer a pena ter scripts para evitar muita digita√ß√£o.</p>
</div>
</div>
<div class="sect2">
<h3 id="_localizando_regress√µes_de_desempenho">Localizando regress√µes de desempenho</h3>
<div class="paragraph">
<p>Aqui est√° um exemplo do script que √© ligeiramente modificado a partir de um script do mundo real utilizado por Junio Hamano <a href="#4">[4]</a>.</p>
</div>
<div class="paragraph">
<p>Este script pode ser passado atrav√©s de um "git bisect run" para localizar um commit que introduziu uma regress√£o de desempenho:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/bin/sh

# Os erros de compila√ß√£o n√£o me interessam.
make my_app || exit 255

# Estamos verificando se ele para em um per√≠odo de tempo razo√°vel, ent√£o
# deixe correr em segundo plano...

./my_app &gt;log 2&gt;&amp;1 &amp;

# ... e pega a ID do seu processo.
pid=$!

# ... e aguarde o tempo suficiente.
sleep $NORMAL_TIME

# ... e veja se o processo ainda est√° l√°.
if kill -0 $pid
then
        # e se ainda estiver rodando -- isso √© ruim.
        kill $pid; sleep 1; kill $pid;
        exit 1
else
        # Ele j√° terminou (o $pid do processo n√£o existe mais),
        # e n√≥s estamos felizes.
        exit 0
fi</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_seguindo_as_melhores_pr√°ticas_gerais">Seguindo as melhores pr√°ticas gerais</h3>
<div class="paragraph">
<p>Obviamente, √© uma boa ideia n√£o ter commits com altera√ß√µes que conscientemente quebram as coisas, mesmo que os outros commits consigam consertar quebras posteriores.</p>
</div>
<div class="paragraph">
<p>Tamb√©m √© uma boa ideia ao usar qualquer VCS ter apenas uma pequena altera√ß√£o l√≥gica em cada commit.</p>
</div>
<div class="paragraph">
<p>Quanto menores as altera√ß√µes no seu commit, mais eficaz ser√° o "git bisect". E provavelmente voc√™ precisar√° do comando "git bisect", n√£o de primeira pois as pequenas altera√ß√µes s√£o mais f√°ceis de revisar, mesmo que sejam revisadas apenas pelo respons√°vel do envio.</p>
</div>
<div class="paragraph">
<p>Outra boa ideia √© ter boas mensagens para os commits. Eles podem ser muito √∫teis para entender por que algumas altera√ß√µes foram feitas.</p>
</div>
<div class="paragraph">
<p>Estas boas pr√°ticas s√£o muito √∫teis caso voc√™ fa√ßa <em>bisect</em> com muita frequ√™ncia.</p>
</div>
</div>
<div class="sect2">
<h3 id="_evitando_mesclagens_propensas_a_erros">Evitando mesclagens propensas a erros</h3>
<div class="paragraph">
<p>As primeiras mesclagens por si s√≥ podem introduzir algumas regress√µes, mesmo quando a mesclagem n√£o precise de uma resolu√ß√£o de conflitos do c√≥digo-fonte. Isso ocorre porque uma mudan√ßa sem√¢ntica pode ocorrer em um ramo, enquanto o outro ramo n√£o est√° ciente do que aconteceu.</p>
</div>
<div class="paragraph">
<p>Como por exemplo, um ramo pode alterar a sem√¢ntica de uma fun√ß√£o, enquanto o outro ramo adiciona mais chamadas √† mesma fun√ß√£o.</p>
</div>
<div class="paragraph">
<p>Piora muito caso muitos arquivos precisem ser corrigidos por causa de conflitos. √â por isso que estas mesclagens s√£o chamadas de "mesclagens m√°s" (evil merges). Eles podem tornar as regress√µes muito dif√≠ceis de rastrear. Pode at√© ser enganador saber que o primeiro commit ruim, caso seja uma mesclagem deste tipo, porque as pessoas podem pensar que o bug vem de uma m√° resolu√ß√£o de conflito quando se trata de uma altera√ß√£o sem√¢ntica em um ramo.</p>
</div>
<div class="paragraph">
<p>De qualquer forma, "git rebase" pode ser utilizado para linearizar o hist√≥rico. Pode ser utilizado em primeiro lugar, para evitar a mesclagem. Ou pode ser utilizado para dividir um hist√≥rico linear em vez do que n√£o seja linear, pois isso deve fornecer mais informa√ß√µes no caso de uma altera√ß√£o sem√¢ntica em um ramo.</p>
</div>
<div class="paragraph">
<p>As mesclagens tamb√©m podem ser simplificadas utilizando os ramos menores ou ao utilizar muitos t√≥picos das ramifica√ß√µes, em vez de apenas as ramifica√ß√µes das vers√µes mais longas.</p>
</div>
<div class="paragraph">
<p>E os testes podem ser feitos com mais frequ√™ncia nos ramos nas integra√ß√µes especiais como <em>linux-next</em> para o kernel do linux.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adaptando_o_seu_fluxo_de_trabalho">Adaptando o seu fluxo de trabalho</h3>
<div class="paragraph">
<p>Um fluxo de trabalho especial para processar as regress√µes pode dar √≥timos resultados.</p>
</div>
<div class="paragraph">
<p>Aqui est√° um exemplo de um fluxo de trabalho utilizado por Andreas Ericsson:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>escreva, no conjunto de testes, um script de teste que exponha a regress√£o</p>
</li>
<li>
<p>Utilize um "git bisect run" para localizar o commit que introduziu um bug</p>
</li>
<li>
<p>corrija o bug que muitas vezes se torna √≥bvio na etapa anterior</p>
</li>
<li>
<p>faz o commit de ambas as corre√ß√µes e o script de teste (e se necess√°rio, mais testes)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>E aqui est√° o que o Andreas disse sobre este fluxo de trabalho <a href="#5">[5]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Para dar alguns n√∫meros concretos, costum√°vamos ter um relat√≥rio m√©dio para corrigir o ciclo de 142.6 horas (de acordo com nosso rastreador de bugs um tanto estranho que apenas mede o tempo). Desde que nos mudamos para o Git, diminu√≠mos para 16.2 horas. Principalmente porque podemos ficar em cima da corre√ß√£o dos bugs agora e porque todo mundo est√° tentando resolver os bugs (estamos muito orgulhosos de como somos pregui√ßosos em deixar o Git encontrar os bugs para n√≥s). Cada nova vers√£o resulta em ~40% menos bugs (quase certamente devido √† forma como nos sentimos ao escrever testes).</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Claramente, este fluxo de trabalho utiliza o c√≠rculo virtuoso entre os conjuntos de testes e o "git bisect". De fato, torna o procedimento padr√£o para lidar com a regress√£o.</p>
</div>
<div class="paragraph">
<p>Em outras mensagens, Andreas diz que eles tamb√©m utilizam as "melhores pr√°ticas" descritas acima: pequenos commits l√≥gicos, t√≥picos das ramifica√ß√µes, sem mesclagem "do mal",&#8230;&#8203; Todas estas pr√°ticas aprimoram a bisectabilidade do grafo do commit, tornando mais f√°cil e mais √∫til o processo de bisse√ß√£o.</p>
</div>
<div class="paragraph">
<p>Portanto, um bom fluxo de trabalho deve ser projetado em torno dos pontos acima. Isso est√° tornando a divis√£o mais f√°cil, mais √∫til e padronizado.</p>
</div>
</div>
<div class="sect2">
<h3 id="_envolvendo_pessoas_do_controle_de_qualidade_e_se_poss√≠vel_usu√°rios_finais">Envolvendo pessoas do controle de qualidade e se poss√≠vel, usu√°rios finais</h3>
<div class="paragraph">
<p>Um aspecto interessante do comando "git bisect" √© que ele n√£o √© apenas uma ferramenta de desenvolvedor. Ele pode ser usado efetivamente por pessoas do controle de qualidade ou mesmo pelos usu√°rios finais (caso eles tenham acesso ao c√≥digo-fonte ou se puderem ter acesso a todas as compila√ß√µes).</p>
</div>
<div class="paragraph">
<p>Houve uma discuss√£o em um ponto na lista de discuss√£o do kernel do linux sobre se era permitido sempre pedir ao usu√°rio final que fizesse um <em>bisect</em>, foram levantados muitos pontos interessantes apoiando este ponto de vista que sim, √© permitido.</p>
</div>
<div class="paragraph">
<p>Como por exemplo, David Miller escreveu <a href="#6">[6]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>O que as pessoas n√£o entendem √© que esta √© uma situa√ß√£o onde o "princ√≠pio do n√≥ final" se aplica. Quando voc√™ tem recursos limitados (aqui: desenvolvedores) voc√™ n√£o imp√µe a maior parte do √¥nus sobre eles. Em vez disso, voc√™ envia as coisas para o recurso que possui muitos n√≥s finais (aqui: usu√°rios) para que a situa√ß√£o realmente se escale.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Isto significa que geralmente √© "mais barato" se as pessoas do controle de qualidade ou dos usu√°rios finais puderem fazer isso.</p>
</div>
<div class="paragraph">
<p>O interessante tamb√©m √© que os usu√°rios finais que est√£o relatando os bugs (ou das pessoas do controle de qualidade que reproduziram um bug) t√™m acesso ao ambiente onde o bug ocorre. Portanto, eles geralmente podem reproduzir mais facilmente uma regress√£o. E se eles puderem fazer um <em>bisect</em>, mais informa√ß√µes ser√£o extra√≠das do ambiente onde o erro ocorre, o que significa que ser√° mais f√°cil compreender e ent√£o corrigir o bug.</p>
</div>
<div class="paragraph">
<p>Para os projetos de c√≥digo aberto, pode ser uma boa maneira de obter contribui√ß√µes mais √∫teis dos usu√°rios finais e apresent√°-las √†s atividades do controle de qualidade e desenvolvimento.</p>
</div>
</div>
<div class="sect2">
<h3 id="_usando_scripts_complexos">Usando scripts complexos</h3>
<div class="paragraph">
<p>Em alguns casos, como no desenvolvimento do kernel, pode valer a pena desenvolver scripts complexos para poder automatizar completamente a bissetriz.</p>
</div>
<div class="paragraph">
<p>Aqui est√° o que Ingo Molnar diz sobre isso <a href="#7">[7]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Eu tenho um script para bisse√ß√£o totalmente automatizado que trava o processo de boot. Tem origem no "git-bisect run". Eu o executo, ele cria e inicializa os kernels automaticamente e quando a inicializa√ß√£o falha (o script percebe que, por meio do registro log serial, que ele assiste continuamente ou por um tempo limite, caso o sistema n√£o apare√ßa em 10 minutos, √© um kernel "ruim"), o script chama minha aten√ß√£o atrav√©s de um sinal sonoro e eu desligo a caixa de teste. (sim, eu devo usar uma tomada gerenciada para automatiz√°-la 100%)</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="_combinando_os_conjuntos_dos_testes_git_bisect_e_outros_sistemas_juntos">Combinando os conjuntos dos testes, git bisect e outros sistemas juntos</h3>
<div class="paragraph">
<p>Vimos que os conjuntos dos testes e o comando <em>git bisect</em> s√£o muito poderosos quando usados juntos. Pode ser ainda mais poderoso caso possa combin√°-los com outros sistemas.</p>
</div>
<div class="paragraph">
<p>Como por exemplo, alguns conjuntos de testes podem ser executados automaticamente √† noite com algumas configura√ß√µes incomuns (ou mesmo aleat√≥rias). E caso uma regress√£o eja encontrada por um conjunto de testes, o comando "git bisect" poder√° ser iniciado automaticamente e o seu resultado poder√° ser enviado atrav√©s de um e-mail ao autor do primeiro commit ruim encontrado pelo "git bisect", e talvez das outras pessoas tamb√©m. E uma nova entrada no sistema de monitoramento dos bugs tamb√©m pode ser criada de forma autom√°tica.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_o_futuro_da_bisse√ß√£o">O futuro da bisse√ß√£o</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_git_replace">"git replace"</h3>
<div class="paragraph">
<p>Vimos anteriormente que o comando "git bisect skip" agora est√° usando um PRNG para tentar evitar as √°reas no grafo do commit onde o commit n√£o sejam test√°veis. O problema √© que, √†s vezes, o primeiro commit ruim fica em uma √°rea n√£o test√°vel.</p>
</div>
<div class="paragraph">
<p>Para simplificar a discuss√£o, supomos que a √°rea n√£o test√°vel seja uma cadeia simples de commits e que ela foi criada por uma quebra introduzida por um commit (vamos cham√°-lo de <em>BBC</em> para o <em>bisect</em> quebrado do commit) e posteriormente corrigida por outro (vamos cham√°-lo de <em>BFC</em> para o <em>bisect</em> que vai corrigir o commit).</p>
</div>
<div class="paragraph">
<p>Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...-Y-BBC-X1-X2-X3-X4-X5-X6-BFC-Z-...</pre>
</div>
</div>
<div class="paragraph">
<p>onde sabemos que <em>Y</em> √© bom e <em>BFC</em> √© ruim e onde <em>BBC</em> e de <em>X1</em> at√© <em>X6</em> onde os testes n√£o sejam poss√≠veis.</p>
</div>
<div class="paragraph">
<p>Neste caso, se estiver fazendo o bisecting manualmente, o que voc√™ pode fazer √© criar uma ramifica√ß√£o especial que comece logo antes da "BBC". O primeiro commit neste ramo deve ser o "BBC" com o "BFC" compactado nele. E os outros commits no ramo devem ser os commits entre "BBC" e "BFC" reconstru√≠dos no primeiro commit do ramo e depois o commit ap√≥s o BFC tamb√©m ter sido reconstru√≠do.</p>
</div>
<div class="paragraph">
<p>Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>      (BBC+BFC)-X1'-X2'-X3'-X4'-X5'-X6'-Z'
     /
...-Y-BBC-X1-X2-X3-X4-X5-X6-BFC-Z-...</pre>
</div>
</div>
<div class="paragraph">
<p>onde os commits citados com ' foram reconstru√≠dos na sua base (rebased).</p>
</div>
<div class="paragraph">
<p>Voc√™ pode criar facilmente um ramo com o Git usando reconstru√ß√£o interativa.</p>
</div>
<div class="paragraph">
<p>Utilizando por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git rebase -i Y Z</pre>
</div>
</div>
<div class="paragraph">
<p>e depois mover o <em>BFC</em> ap√≥s o <em>BBC</em> e esmag√°-lo.</p>
</div>
<div class="paragraph">
<p>Depois disso, √© poss√≠vel come√ßar a dividir normalmente no novo ramo e eventualmente, encontrar o primeiro commit com problemas.</p>
</div>
<div class="paragraph">
<p>Por exemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git bisect start Z' Y</pre>
</div>
</div>
<div class="paragraph">
<p>Caso esteja utilizando o comando <code>git bisect run</code>, √© poss√≠vel utilizar a mesma corre√ß√£o manual acima e em seguida, iniciar outro comando <code>git bisect run</code> no ramo especial. Ou como diz na p√°gina do manual <code>git bisect</code>, o script passado ao <code>git bisect run</code> pode aplicar um patch antes de compilar e testar o software <a href="#8">[8]</a>. O patch deve transformar um commit atual n√£o test√°vel em um test√°vel. Portanto, o teste resultar√° em "bom" ou "ruim" e o comando <code>git bisect</code> ser√° capaz de encontrar o primeiro commit que estiver ruim. O script n√£o deve se esquecer de remover o patch assim que o teste for conclu√≠do antes de encerrar o script.</p>
</div>
<div class="paragraph">
<p>(Observe que, em vez de um patch, √© poss√≠vel utilizar o comando "git cherry-pick BFC" para aplicar a corre√ß√£o e neste caso, utilizar o comando "git reset --hard HEAD^" para reverter a escolha seletiva ap√≥s o teste e antes de retornar do script.)</p>
</div>
<div class="paragraph">
<p>Por√©m as maneiras demonstradas acima para solucionar as √°reas n√£o test√°veis s√£o um pouco atrapalhadas. Utilizar os ramos especiais √© bom porque estas ramifica√ß√µes podem ser compartilhadas pelos desenvolvedores como ramos comuns, por√©m o risco √© que as pessoas obtenham muitos ramos. E isso interrompe o fluxo de trabalho normal "git bisect". Portanto, caso queira utilizar o "git bisect run" automaticamente, precisar√° adicionar um c√≥digo especial ao seu script para reiniciar a bisse√ß√£o nos ramos especiais.</p>
</div>
<div class="paragraph">
<p>De qualquer forma, pode-se notar no exemplo do ramo especial acima que os commit Z' e Z devem apontar para a mesma condi√ß√£o do c√≥digo-fonte (a mesma "√°rvore" da linguagem git). Isso ocorre porque Z' resulta da aplica√ß√£o das mesmas altera√ß√µes que Z em uma ordem ligeiramente diferente.</p>
</div>
<div class="paragraph">
<p>Portanto, se pud√©ssemos "substituir" <em>Z</em> por <em>Z</em> quando fazemos o <em>bisect</em>, n√£o precisar√≠amos adicionar nada em um script. Funcionaria apenas para qualquer pessoa no projeto que compartilhasse as ramifica√ß√µes especiais e as substitui√ß√µes.</p>
</div>
<div class="paragraph">
<p>Com o exemplo acima, isso daria:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>      (BBC+BFC)-X1'-X2'-X3'-X4'-X5'-X6'-Z'-...
     /
...-Y-BBC-X1-X2-X3-X4-X5-X6-BFC-Z</pre>
</div>
</div>
<div class="paragraph">
<p>√â por isso que o comando "git replace" foi criado. Tecnicamente, ele armazena as substitui√ß√µes das refs na hierarquia "refs/replace/". Estas refs s√£o como ramifica√ß√µes (que s√£o armazenadas em "refs/heads/") ou nas tags (que s√£o armazenadas em "refs/tags"), isso significa que eles podem ser automaticamente compartilhados como ramifica√ß√µes ou tags entre os desenvolvedores.</p>
</div>
<div class="paragraph">
<p>O comando "git replace" √© um mecanismo muito poderoso. Pode ser utilizado para corrigir os commits no hist√≥rico j√° lan√ßado, por exemplo, alterar a mensagem do commit ou o autor do mesmo. E tamb√©m pode ser utilizado em vez dos "enxertos" do git para vincular um reposit√≥rio a um outro reposit√≥rio antigo.</p>
</div>
<div class="paragraph">
<p>De fato, √© este o √∫ltimo recurso que o "vendeu" para a comunidade Git, agora est√° no ramo "master" do reposit√≥rio Git do Git e deve ser lan√ßado no Git 1.6.5 em outubro ou novembro de 2009.</p>
</div>
<div class="paragraph">
<p>Um problema com o comando "git replace" √© que ele atualmente armazena todas as substitui√ß√µes refs no "refs/replace/", mas talvez seja melhor caso as substitui√ß√µes das refs de que s√£o √∫teis apenas para a bisse√ß√£o estivessem no "refs/replace/bisect/". Dessa maneira, a reposi√ß√£o das refs poderiam ser usados apenas para fazer a bisse√ß√£o, enquanto as outras refs diretamente em "refs/replace/" seriam utilizadas quase que o tempo todo.</p>
</div>
</div>
<div class="sect2">
<h3 id="_erros_espor√°dicos_da_bisse√ß√£o">Erros espor√°dicos da bisse√ß√£o</h3>
<div class="paragraph">
<p>Outra poss√≠vel melhoria do "git bisect" seria adicionar opcionalmente alguma redund√¢ncia aos testes que forem realizados, para que fosse mais confi√°vel durante o rastreio de erros espor√°dicos.</p>
</div>
<div class="paragraph">
<p>Isso foi solicitado por alguns desenvolvedores do kernel porque alguns erros chamados espor√°dicos n√£o aparecem em todas as compila√ß√µes porque s√£o muito dependentes do que √© gerado pelo compilador.</p>
</div>
<div class="paragraph">
<p>A ideia √© que a cada tr√™s testes por exemplo, o comando "git bisect" possa solicitar ao usu√°rio que teste um commit que j√° foi considerado "bom" ou "ruim" (porque um de seus descendentes ou um dos seus ancestrais tenha sido encontrado como sendo "bom" ou "ruim", respectivamente). Caso um commit tenha sido previamente classificado incorretamente, a bisse√ß√£o poder√° ser interrompida mais cedo, antes que muitos erros possam ser cometidos. Em seguida, o usu√°rio ter√° que verificar o que aconteceu e reiniciar a bisse√ß√£o usando um registro log fixo do <em>bisect</em>.</p>
</div>
<div class="paragraph">
<p>J√° existe um projeto chamado <em>BBChop</em> criado por Ealdwulf Wuffinga no Github que faz algo assim usando a Teoria Bayesiana de Pesquisa <a href="#9">[9]</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>O BBChop √© como o comando <em>git bisect</em> (ou equivalente), mas funciona quando o seu bug for intermitente. Ou seja, funciona na presen√ßa dos falsos negativos (quando uma vers√£o funcione embora contenha o erro). Assume que n√£o h√° falsos positivos (em princ√≠pio, a mesma abordagem funcionaria, por√©m adicion√°-la pode n√£o ser trivial).</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Por√©m o <em>BBChop</em> √© independente de qualquer VCS e seria mais f√°cil para os usu√°rios do Git ter algo integrado no Git.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclus√£o">Conclus√£o</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vimos que as regress√µes s√£o um problema importante e que o comando "git bisect" possui recursos interessantes que complementam as boas pr√°ticas e outras ferramentas, especialmente os conjuntos de testes, que geralmente s√£o usados para combater as regress√µes. Mas pode ser necess√°rio alterar alguns fluxos de trabalho e h√°bitos (ruins) para tirar o m√°ximo proveito disso.</p>
</div>
<div class="paragraph">
<p>Algumas melhorias nos algoritmos dentro do comando "git bisect" s√£o poss√≠veis e alguns novos recursos podem ajudar em alguns casos, por√©m o comando "git bisect" em geral j√° funciona muito bem, √© muito usado e j√° √© muito √∫til. Para apoiar essa √∫ltima afirma√ß√£o, vamos dar a palavra final ao Ingo Molnar, quando o autor lhe perguntou quanto tempo ele acha que o comando "git bisect" o salva quando ele o utiliza:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><em>muito</em>.</p>
</div>
<div class="paragraph">
<p>Cerca de dez anos atr√°s, eu fiz minha primeira "bisse√ß√£o" de uma fila de patches do Linux. Isso foi antes dos dias do Git (e mesmo antes do "BitKeeper"). Eu literalmente passei os dias resolvendo os patches, criando o que em ess√™ncia eram compromissos independentes que eu acho que estavam relacionados com este bug.</p>
</div>
<div class="paragraph">
<p>Foi uma ferramenta de √∫ltimo recurso absoluta. Prefiro passar dias olhando a sa√≠da do <em>printk</em> do que fazer uma <em>bisse√ß√£o dos patches</em> manualmente.</p>
</div>
<div class="paragraph">
<p>Com o Git bisect, √© f√°cil: no melhor dos casos, √© poss√≠vel obter uma bisse√ß√£o do kernel com ~15 passos entre 20 a 30 minutos de maneira automatizada. Mesmo com ajuda manual ou ao dividir v√°rios bugs acumulados, raramente leva mais de uma hora.</p>
</div>
<div class="paragraph">
<p>Na verdade, √© inestim√°vel porque existem bugs que eu nem tentaria depurar caso n√£o fosse pelo comando <code>git bisect</code>. No passado, havia padr√µes de bug que eram imediatamente in√∫teis para se depurar - na melhor das hip√≥teses eu poderia enviar a assinatura da falha/bug para o <em>lkml</em> e esperar que algu√©m pudesse pensar em algo.</p>
</div>
<div class="paragraph">
<p>E ainda que uma bisse√ß√£o falhe, hoje ela nos diz algo valioso sobre o bug: que √© n√£o determin√≠stico - depende do tempo ou do layout da imagem do kernel.</p>
</div>
<div class="paragraph">
<p>Portanto, o comando <em>git bisect</em> √© uma bondade incondicional e fique √† vontade para citar isso ;-)</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_agradecimentos">Agradecimentos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Meus agradecimentos ao Junio Hamano por sua ajuda na revis√£o deste documento, por revisar os patches que enviei para a lista de discuss√£o do Git, por discutir algumas ideias e por me ajudar a melhor√°-las, por melhorar muito o "git bisect" e por seu incr√≠vel trabalho em manter e desenvolvendo o Git.</p>
</div>
<div class="paragraph">
<p>Meus agradecimentos ao Ingo Molnar por me fornecer informa√ß√µes muito √∫teis que aparecem neste artigo, por comentar este artigo, pelas suas sugest√µes para melhorar o "git bisect" e por evangelizar o "git bisect" nas listas de discuss√£o do kernel do linux.</p>
</div>
<div class="paragraph">
<p>Meus agradecimentos ao Linus Torvalds por inventar, desenvolver e evangelizar "git bisect", Git e o Linux.</p>
</div>
<div class="paragraph">
<p>Meus agradecimentos a muitas outras √≥timas pessoas que ajudaram de um jeito ou de outro quando eu trabalhei no Git, especialmente ao Andreas Ericsson, Johannes Schindelin, H. Peter Anvin, Daniel Barkalow, Bill Lear, John Hawley, Shawn O. Pierce, Jeff King, Sam Vilain, Jon Seymour.</p>
</div>
<div class="paragraph">
<p>Meus agradecimentos ao comit√™ do programa Linux-Kongress por escolher o autor para dar uma palestra e por publicar este artigo.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_refer√™ncias">Refer√™ncias</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>[[[1]]] <a href="https://www.nist.gov/sites/default/files/documents/director/planning/report02-3.pdf"><em>The Economic Impacts of Inadequate Infratructure for Software Testing</em>. Nist Planning Report 02-3</a>, Consulte o Resumo Executivo e o Cap√≠tulo 8.</p>
</li>
<li>
<p>[[[2]]] <a href="http://www.oracle.com/technetwork/java/codeconvtoc-136057.html"><em>Code Conventions for the Java Programming Language</em>. Sun Microsystems.</a></p>
</li>
<li>
<p>[[[3]]] <a href="https://en.wikipedia.org/wiki/Software_maintenance"><em>Manuten√ß√£o do Software</em>. Wikipedia.</a></p>
</li>
<li>
<p>[[[4]]] <a href="https://lore.kernel.org/git/7vps5xsbwp.fsf_-_@assigned-by-dhcp.cox.net/">Junio C Hamano. <em>A Hist√≥ria de sucesso de um bisect automatizado</em>.</a></p>
</li>
<li>
<p>[[[5]]] <a href="https://lwn.net/Articles/317154/">Christian Couder. <em>Um bisect totalmente automatizado com "git bisect run"</em>. LWN.net.</a></p>
</li>
<li>
<p>[[[6]]] <a href="https://lwn.net/Articles/277872/">Jonathan Corbet. <em>A bisse√ß√£o divide usu√°rios e os desenvolvedores</em>. LWN.net.</a></p>
</li>
<li>
<p>[[[7]]] <a href="https://lore.kernel.org/lkml/20071207113734.GA14598@elte.hu/">Ingo Molnar. <em>Re: BUG 2.6.23-rc3 can&#8217;t see sd partitions on Alpha</em>. Linux-kernel mailing list.</a></p>
</li>
<li>
<p>[[[8]]] <a href="https://www.kernel.org/pub/software/scm/git/docs/git-bisect.html">Junio C Hamano and the git-list. <em>git-bisect(1) P√°gina do Manual</em>. Arquivos do Linux Kernel.</a></p>
</li>
<li>
<p>[[[9]]] <a href="https://github.com/Ealdwulf/bbchop">Ealdwulf. <em>bbchop</em>. GitHub.</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-03-18 22:29:37 +0100
</div>
</div>
</body>
</html>