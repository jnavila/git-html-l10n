<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="Asciidoctor 2.0.12"/>
<title>git-fast-import(1)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"/>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="manpage">
<div id="header">
<h1>git-fast-import(1) Manual Page</h1>
<h2 id="_nome">NOME</h2>
<div class="sectionbody">
<p>git-fast-import - Estrutura para os importadores de dados rápidos do Git</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_resumo">RESUMO</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content">frontend | <em>git fast-import</em> [&lt;opções&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_descrição">DESCRIÇÃO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Este programa geralmente não é o que o usuário final deseja executar diretamente. A maioria dos usuários finais deseja usar um dos programas front-end já existentes, que analisa um tipo específico de fonte estrangeira e alimenta o conteúdo armazenado lá para <em>git fast-import</em>.</p>
</div>
<div class="paragraph">
<p>O <code>fast-import</code> lê um fluxo misto de comandos e dados na entrada padrão e grava um ou mais pacote de arquivos diretamente no repositório atual. Quando um "EOF" é recebido na entrada padrão, a importação rápida grava as referências atualizadas das ramificações e tags, atualizando completamente o repositório atual com os dados importados recentemente.</p>
</div>
<div class="paragraph">
<p>A estrutura <code>fast-import</code> em si pode importar para um repositório vazio (um que já foi inicializado por <em>git init</em>) ou atualizar de forma incremental em um repositório preenchido já existente. Caso as importações incrementais sejam ou não compatíveis com determinada fonte estrangeira específica, isso vai depender do programa de front-end utilizado.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opções">OPÇÕES</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">--force</dt>
<dd>
<p>Impor a atualização das ramificações existentes que foram alteradas , ainda que os commits sejam perdidos (como um novo commit que não contenha o commit antigo).</p>
</dd>
<dt class="hdlist1">--quiet</dt>
<dd>
<p>Desative a saída exibida por <code>--stats</code>, fazendo com que o <code>fast-import</code> seja silenciado quando for bem-sucedido. No entanto, caso o fluxo de importação tenha diretivas destinadas a exibir a saída do usuário (diretivas <code>progress</code> por exemplo), as mensagens coincidentes ainda serão exibidas.</p>
</dd>
<dt class="hdlist1">--stats</dt>
<dd>
<p>Exiba algumas estatísticas básicas sobre os objetos que a importação rápida criou, os arquivos do pacote em que foram armazenados e a memória utilizado por <code>fast-import</code> durante essa execução. É predefinido que esta saída seja exibida, mas pode ser desativado com <code>--quiet</code>.</p>
</dd>
<dt class="hdlist1">--allow-unsafe-features</dt>
<dd>
<p>Muitas opções na linha de comando podem ser informadas como parte do próprio fluxo de importação rápida, utilizando os comandos <code>feature</code> ou <code>option</code>. No entanto, algumas destas opções não são seguras (por exemplo, permitindo que a importação rápida acesse o sistema de arquivos fora do repositório). É predefinido que estas opções estão desabilitadas, porém podem ser permitidas ao utilizar essa opção na linha de comandos. Atualmente, isso afeta apenas os comandos de recurso <code>export-marks</code>,` import-marks` e <code>import-marks-if-exist</code>.</p>
<div class="literalblock">
<div class="content">
<pre>Ative esta opção apenas caso confie no programa que gera o fluxo de importação rápida! Esta opção é ativada automaticamente para os auxiliares remotos que usem o recurso `import`, pois eles já são confiáveis para executar o seu próprio código.</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_opções_para_front_ends">Opções para Front-ends</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--cat-blob-fd=&lt;fd&gt;</dt>
<dd>
<p>Escreva as respostas para <code>get-mark</code>, <code>cat-blob</code> e do <code>ls</code> das consultas no descritor do arquivo &lt;fd&gt; em vez do <code>stdout</code>. Permite que a saída <code>progress</code> destinada ao usuário final seja separada de uma outra saída.</p>
</dd>
<dt class="hdlist1">--date-format=&lt;fmt&gt;</dt>
<dd>
<p>Especifique o tipo das datas que o frontend fornecerá para o <code>fast-import</code> nos comandos <code>author</code>, <code>committer</code> e <code>tagger</code>. Consulte &#8220;Formatos de data&#8221; abaixo para obter mais detalhes sobre quais os formatos são compatíveis e sua respectiva sintaxe.</p>
</dd>
<dt class="hdlist1">--done</dt>
<dd>
<p>Termine com erro caso não haja um comando <code>done</code> no final do fluxo. Essa opção pode ser útil para detectar os erros que fazem com que o front-end seja encerrado antes de começar a gravar um fluxo.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_localizações_dos_arquivos_de_marcação">Localizações dos arquivos de marcação</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--export-marks=&lt;arquivo&gt;</dt>
<dd>
<p>Despeja a tabela de marcações internas em &lt;arquivo&gt; quando concluída. As marcações são escritas uma por linha como <code>:markid SHA-1</code>. Os front-ends podem usar este arquivo para validar as importações depois que forem concluídas ou para salvar a tabela de marcações nas execuções incrementais. Como o &lt;arquivo&gt; é aberto e truncado apenas no ponto de verificação (ou conclusão), o mesmo caminho também pode ser passado com segurança para <code>--import-marks</code>.</p>
</dd>
<dt class="hdlist1">--import-marks=&lt;arquivo&gt;</dt>
<dd>
<p>Antes de processar qualquer entrada, carregue as marcações usadas no &lt;arquivo&gt;. O arquivo de entrada deve existir, ser legível e usar o mesmo formato produzido por <code>--export-marks</code>. As múltiplas opções podem ser informadas para importar mais de um conjunto de marcas. Caso uma marcação seja definida com valores diferentes, o último arquivo vence.</p>
</dd>
<dt class="hdlist1">--import-marks-if-exists=&lt;arquivo&gt;</dt>
<dd>
<p>Como <code>--import-marks</code> porém caso não exista, em vez de exibir um erro, ignora silenciosamente o arquivo.</p>
</dd>
<dt class="hdlist1">--[no-]relative-marks</dt>
<dd>
<p>Após especificar <code>--relative-marks</code>, os caminhos especificados com <code>--import-marks=</code> e <code>--export-marks=</code> são relativos a um diretório interno no repositório atual. No <code>git-fast-import</code>, isso significa que os caminhos são relativos ao diretório <code>.git/info/fast-import</code>. No entanto, outros importadores podem usar um local diferente.</p>
<div class="paragraph">
<p>Marcações relativas ou não podem ser combinadas entrelaçando <code>--(no-)-relative-marks</code> com a opção <code>--(import|export)-marks=</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_reescrita_do_submódulo">Reescrita do submódulo</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--rewrite-submodules-from=&lt;nome&gt;:&lt;arquivo&gt;</dt>
<dt class="hdlist1">--rewrite-submodules-to=&lt;nome&gt;:&lt;arquivo&gt;</dt>
<dd>
<p>Reescreve a ID dos objetos no submódulo especificado através do &lt;nome&gt; dos valores usados a partir de um &lt;arquivo&gt; para aqueles usados para o &lt;arquivo&gt;. As marcações de origem deveriam ter sido criadas por pelo comando <code>git fast-export</code> e as marcações to deveriam ter sido criadas pelo <code>git fast-import</code> durante a importação do mesmo submódulo.</p>
<div class="paragraph">
<p>O &lt;nome&gt; pode ser qualquer sequência arbitrária que não contenha um caractere com dois pontos, porém o mesmo valor deve ser utilizado com as duas opções ao definir as marcações correspondentes. Os vários submódulos podem ser definidos com valores diferentes para &lt;nome&gt;. É um erro não utilizar estas opções nos pares correspondentes.</p>
</div>
<div class="paragraph">
<p>Estas opções são úteis principalmente durante a conversão de um repositório através de um algoritmo hash para o outro; sem eles, a importação rápida irá falhar caso encontre um submódulo porque não há como gravar a ID do objeto no novo algoritmo hash.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_ajuste_de_desempenho_e_compactação">Ajuste de desempenho e compactação</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">--active-branches=&lt;n&gt;</dt>
<dd>
<p>Número máximo de ramificações para manter ativo de uma só vez. Consulte &#8216;` Utilização da memória '&#8217; abaixo para mais informações. A predefinição é 5.</p>
</dd>
<dt class="hdlist1">--big-file-threshold=&lt;n&gt;</dt>
<dd>
<p>O tamanho máximo de uma bolha para o qual o <code>fast-import</code> tentará criar um delta expressado em bytes. A predefinição é 512m (512 MiB). Alguns importadores podem diminuir isso em sistemas com menos memória.</p>
</dd>
<dt class="hdlist1">--depth=&lt;n&gt;</dt>
<dd>
<p>Profundidade delta máxima, para a "deltificação" da bolha e da árvore. A predefinição é 50.</p>
</dd>
<dt class="hdlist1">--export-pack-edges=&lt;arquivo&gt;</dt>
<dd>
<p>Depois de criar um pacote de arquivo, imprima uma linha de dados em <code>&lt;arquivo&gt;</code>, listando o nome do arquivo e o último commit em cada ramo que foi gravado neste pacote. Estas informações podem ser úteis após a importação de projetos cujo conjunto total de objetos exceda o limite de 4 GiB, pois estes commits podem ser utilizados como pontos de extremidade durante as chamadas para o <em>git pack-objects</em>.</p>
</dd>
<dt class="hdlist1">--max-pack-size=&lt;n&gt;</dt>
<dd>
<p>Tamanho máximo de cada pacote de arquivo. A predefinição é sem limites.</p>
</dd>
<dt class="hdlist1">fastimport.unpackLimit</dt>
<dd>
<p>Consulte <a href="git-config.html">git-config(1)</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_desempenho">DESEMPENHO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O design do <code>fast-import</code> permite a importação de grandes projetos com uma quantidade mínima do consumo da memória e do tempo de processamento. Supondo que o front-end seja capaz de acompanhar e alimentar o <code>fast-import</code> com um fluxo constante de dados, os tempos de importação para os projetos com mais de 10+ anos de história e com mais de 100.000+ commits individuais geralmente são concluídos entre uma a duas horas com um hardware modesto (~$2.000 USD).</p>
</div>
<div class="paragraph">
<p>A maioria dos gargalos parece estar no acesso a dados de origem estrangeira (a fonte simplesmente não pode extrair as revisões com a rapidez suficiente) ou no E/S do disco (o <code>fast-import</code> grava tão rápido quanto o disco aceitar). As importações serão executadas o mais rapidamente caso os dados de origem sejam armazenados em uma unidade diferente do repositório de destino Git (devido a menor contenção de E/S).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custo_de_desenvolvimento">CUSTO DE DESENVOLVIMENTO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Um front-end típico para <code>fast-import</code> tende a pesar aproximadamente 200 linhas de código Perl/Python/Ruby. A maioria dos desenvolvedores conseguiu criar importadores ativos em apenas algumas horas, mesmo que seja a sua primeira exposição ao <code>fast-import</code> e às vezes, até ao Git. Esta é uma situação ideal, já que a maioria das ferramentas de conversão é descartável (utilize uma vez e nunca mais se preocupe).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operação_em_paralelo">OPERAÇÃO EM PARALELO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Como <code>git push</code> ou <code>git fetch</code>, as importações manipuladas pelo <code>fast-import</code> são seguras para serem executadas juntamente com as invocações paralelas <code>git repack -a -d</code> ou <code>git gc</code> ou qualquer outra operação Git (incluindo <code>git prune</code>, objetos soltos nunca são utilizados por <code>fast-import</code>).</p>
</div>
<div class="paragraph">
<p>O <code>fast-import</code> não bloqueia a ramificação ou "tag refs" que está sendo importando ativamente. Após a importação, durante a sua fase de atualização do "ref", o <code>fast-import</code> testa cada "ref" em cada ramo existente para verificar se a atualização será uma atualização de avanço rápido (o commit armazenado no "ref" está contida no novo histórico do commit a ser gravado). Se a atualização não for uma atualização rápida, a importação rápida pulará a atualização "ref" e em vez disso, imprimirá uma mensagem de aviso. A importação rápida sempre tentará atualizar todas as ramificações refs e não para na primeira falha.</p>
</div>
<div class="paragraph">
<p>As atualizações das ramificações podem ser impostas com a opção <code>--force</code>, mas é recomendável que isso seja utilizado apenas em um repositório silencioso. O uso da opção <code>--force</code> não é necessário para uma importação inicial para um repositório vazio.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discussão_técnica">DISCUSSÃO TÉCNICA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>O <code>fast-import</code> monitora um conjunto de ramificações na memória. Durante o processo de importação, qualquer ramo pode ser criado ou modificado a qualquer momento, enviando um comando <code>commit</code> no fluxo de entrada. Este design permite que um programa front-end processe uma quantidade ilimitada de ramificações simultâneas, gerando commits na ordem em que estão disponíveis a partir dos dados da origem. Isso também simplifica consideravelmente os programas de interface.</p>
</div>
<div class="paragraph">
<p>O <code>fast-import</code> não usa ou altera o diretório de trabalho atual ou qualquer outro arquivo dentro dele. (No entanto, atualiza o repositório Git atual, conforme referenciado por <code>GIT_DIR</code>.) Portanto, um front-end de importação pode usar o diretório de trabalho para os seus próprios propósitos, como extrair as revisões dos arquivos das fontes estrangeiras. Essa ignorância do diretório de trabalho também permite que o <code>fast-import</code> seja executado muito rapidamente, pois não é necessário executar nenhuma operação dispendiosa de atualização de arquivo ao alternar entre as ramificações.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_formato_de_entrada">FORMATO DE ENTRADA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Com exceção dos dados brutos do arquivo (que o Git não interpreta), o formato de entrada do <code>fast-import</code> é baseado em texto (ASCII). Esse formato baseado em texto simplifica o desenvolvimento e a depuração dos programas front-end, especialmente quando uma linguagem de nível superior, como o Perl, Python ou Ruby, está sendo utilizado.</p>
</div>
<div class="paragraph">
<p>O <code>fast-import</code> é muito rigoroso quanto à sua entrada. Quando dissermos SP, queremos dizer <strong>exatamente</strong> um espaço. Da mesma forma, <code>LF</code> significa uma alimentação de linha (apenas uma) e <code>HT</code> uma guia horizontal (apenas uma). O fornecimento de caracteres de espaço adicionais causará resultados inesperados, como os nomes dos ramos ou nomes dos arquivos com espaços à esquerda ou à direita em seu nome, ou o encerramento antecipado do <code>fast-import</code> quando encontrar uma entrada inesperada.</p>
</div>
<div class="sect2">
<h3 id="_comentários_do_fluxo">Comentários do fluxo</h3>
<div class="paragraph">
<p>Para ajudar na depuração de front-ends, o <code>fast-import</code> ignora qualquer linha que comece com <code>#</code> (ASCII libra/hash) até, e incluindo, a linha que termina com <code>LF</code>. Uma linha de comentário pode conter qualquer sequência de bytes que não contenha um <code>LF</code> e, portanto, pode ser utilizado para incluir qualquer informação detalhada de depuração que possa ser específica do front-end e útil ao inspecionar um fluxo de dados do <code>fast-import</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_formatos_de_data">Formatos de data</h3>
<div class="paragraph">
<p>Os seguintes formatos são compatíveis. Um front-end deve selecionar o formato que será utilizado para essa importação, passando o nome do formato na opção da linha de comando <code>--date-format=&lt;fmt&gt;</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>raw</code></dt>
<dd>
<p>Este é o formato nativo do Git que é <code>&lt;tempo&gt; SP &lt;offutc&gt;</code>. Também é o formato predefinido do <code>fast-import</code>, caso <code>--date-format</code> não seja utilizado.</p>
<div class="paragraph">
<p>A hora do evento é especificado através de <code>&lt;tempo&gt;</code> como o número de segundos desde a época UNIX (meia-noite de 1º de janeiro de 1970, UTC) e é gravado como um número inteiro decimal ASCII.</p>
</div>
<div class="paragraph">
<p>A compensação local é determinado através de <code>&lt;offutc&gt;</code> como uma compensação positiva ou negativa do UTC. Por exemplo, EST (que fica há 5 horas atrás do UTC) seria expresso em <code>&lt;tz&gt;</code> por &#8220;-0500&#8221; enquanto o UTC é &#8220;+0000&#8221;. A compensação local não afeta o <code>&lt;tempo&gt;</code>; é utilizado apenas como um aviso para ajudar as rotinas de formatação a exibir o registro de data e hora.</p>
</div>
<div class="paragraph">
<p>Caso uma compensação local não esteja disponível no material de origem, utilize &#8220;+0000&#8221; ou a compensação local mais comum. Por exemplo, muitas organizações têm um repositório CVS que só foi acessado por usuários localizados no mesmo local e fuso horário. Nesse caso, uma compensação razoável do UTC pode ser assumida.</p>
</div>
<div class="paragraph">
<p>Diferente do formato <code>rfc2822</code>, que é muito rigoroso. Qualquer variação na formatação fará com que o fast-import rejeite o valor e algumas verificações de sanidade com valores numéricos também possam ser executadas.</p>
</div>
</dd>
<dt class="hdlist1"><code>raw-permissive</code></dt>
<dd>
<p>Isto é o mesmo que <code>raw</code>, exceto que as verificações de sanidade não são realizadas na época numérica e no desvio do fuso horário local. Isto pode ser útil ao tentar filtrar ou importar um histórico já existente com por exemplo, valores falsos do fuso horário.</p>
</dd>
<dt class="hdlist1"><code>rfc2822</code></dt>
<dd>
<p>Este é o formato de email padrão, conforme está descrito pela RFC 2822.</p>
<div class="paragraph">
<p>Um valor de exemplo é &#8220;Ter 6 de fevereiro 11:22:18 2007 -0500&#8221;. O analisador do Git é preciso, porém um pouco tolerante. É o mesmo analisador utilizado pelo <em>git am</em> ao aplicar os patches recebidos de email.</p>
</div>
<div class="paragraph">
<p>Algumas cadeias de caracteres (strings) malformadas podem ser aceitas como datas válidas. Em alguns desses casos, o Git ainda poderá obter a data correta da cadeia de caracteres. Também existem alguns tipos de cadeia de caracteres malformados que o Git analisará incorretamente e, no entanto, ainda assim o considerará válido. As sequências que estiverem seriamente malformadas serão rejeitadas.</p>
</div>
<div class="paragraph">
<p>Diferentemente do formato <code>bruto</code> acima, as informações de compensação do fuso horário/UTC contidas em uma sequência de datas RFC 2822, são utilizadas para ajustar o valor da data para UTC antes do armazenamento. Portanto, é importante que essas informações sejam as mais precisas possíveis.</p>
</div>
<div class="paragraph">
<p>Caso o material de origem utilize datas no formato RFC 2822, o front-end deve permitir que o <code>fast-import</code> manipule a análise a conversão (em vez de tentar fazer isso sozinho), pois o analisador do Git foi bem testado em um ambiente natural.</p>
</div>
<div class="paragraph">
<p>Os front-end devem preferir o formato <code>raw</code> (bruto) caso o material de origem já utilize o formato UNIX, pode ser atrativo fornecer datas nesse formato, ou o seu formato é facilmente convertível, pois não há ambiguidade na análise.</p>
</div>
</dd>
<dt class="hdlist1"><code>now</code></dt>
<dd>
<p>Sempre utilize a hora e o fuso horário atual. O literal <code>now</code> sempre deve ser informado em <code>&lt;quando&gt;</code>.</p>
<div class="paragraph">
<p>Este é um formato de brinquedo. A hora e o fuso horário atual deste sistema são sempre copiados para a cadeia de identidade no momento em que são criados pelo <code>fast-import</code>. Não há como especificar um horário ou fuso horário diferente.</p>
</div>
<div class="paragraph">
<p>Esse formato em particular é informado para implementação curta e pode ser útil para um processo onde se deseja criar um novo commit imediatamente, sem a necessidade de usar um diretório ativo ou <code>git update-index</code>.</p>
</div>
<div class="paragraph">
<p>Caso o <code>autor</code> e o <code>committer</code> sejam utilizados de forma separadas em um <code>commit</code>, os registro de data e hora podem não coincidir, pois o relógio do sistema será pesquisado duas vezes (uma vez para cada comando). A única maneira de garantir que as informações de identidade do autor e de quem fez o commit tenham o mesmo registro de data e hora é omitir o <code>autor</code> (copiando assim do <code>committer</code>) ou usar um formato de data diferente de <code>now</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_comandos">Comandos</h3>
<div class="paragraph">
<p>O fast-import aceita vários comandos para atualizar o repositório atual e controlar o processo de importação. Discussões mais detalhadas (com exemplos) de cada comando virão depois.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>commit</code></dt>
<dd>
<p>Cria uma nova ramificação ou atualiza uma ramificação existente, criando um novo commit e atualizando a ramificação para apontar para o commit recém criado.</p>
</dd>
<dt class="hdlist1"><code>tag</code></dt>
<dd>
<p>Cria um objeto "tag" anotado a partir de um commit ou ramificação existente. As tags <code>lightweight</code> (ou leves) não são compatíveis com este comando, pois não são recomendadas para registrar os pontos importantes de tempo.</p>
</dd>
<dt class="hdlist1"><code>reset</code></dt>
<dd>
<p>Redefina uma ramificação existente (ou uma nova ramificação) para determinada revisão. Este comando deve ser utilizado para alterar uma ramificação para uma revisão específica sem fazer um commit nela.</p>
</dd>
<dt class="hdlist1"><code>blob</code></dt>
<dd>
<p>Converta os dados brutos do arquivo em uma bolha, para uso futuro em um comando <code>commit</code>. Este comando é opcional, não sendo necessário para executar uma importação.</p>
</dd>
<dt class="hdlist1"><code>alias</code></dt>
<dd>
<p>Registre que uma marca se refere a um determinado objeto sem antes criar qualquer objeto novo. O uso de --import-marks e referindo-se a marcas ausentes fará com que a importação rápida falhe de modo que os pseudônimos possam fornecer uma maneira de definir os compromissos podados de outra forma a um valor válido (por exemplo, o ancestral não podado mais próximo).</p>
</dd>
<dt class="hdlist1"><code>checkpoint</code></dt>
<dd>
<p>Impõem o uso de <code>fast-import</code> para fechar o arquivo de pacotes atual, gerar seu "checksum", seu índice SHA-1 e iniciar um novo pacote de arquivo. Este comando é opcional, não sendo necessário para executar uma importação.</p>
</dd>
<dt class="hdlist1"><code>progress</code></dt>
<dd>
<p>Faz com que o <code>fast-import</code> faça um eco da linha inteira para sua própria saída padrão. Este comando é opcional, não sendo necessário para executar uma importação.</p>
</dd>
<dt class="hdlist1"><code>done</code></dt>
<dd>
<p>Faz a marcação do fim do fluxo. Este comando é opcional, a menos que o recurso <code>done</code> tenha sido solicitado utilizando a opção de linha de comando` --done` ou o comando <code>feature done</code>.</p>
</dd>
<dt class="hdlist1"><code>get-mark</code></dt>
<dd>
<p>Faz com que o <code>fast-import</code> imprima o SHA-1 correspondente a uma marcação no descritor do arquivo definido com <code>--cat-blob-fd</code> ou <code>stdout</code> caso não tenha sido especificado.</p>
</dd>
<dt class="hdlist1"><code>cat-blob</code></dt>
<dd>
<p>Faz com que o <code>fast-import</code> imprima uma bolha no formato <em>cat-file --batch</em> no descritor do arquivo definido com <code>--cat-blob-fd</code> ou <code>stdout</code> caso não tenha sido especificado.</p>
</dd>
<dt class="hdlist1"><code>ls</code></dt>
<dd>
<p>Faz com que o <code>fast-import</code> imprima uma linha que descreve uma entrada do diretório no formato <code>ls-tree</code> para o descritor do arquivo definido com <code>--cat-blob-fd</code> ou <code>stdout</code> caso não tenha sido especificado.</p>
</dd>
<dt class="hdlist1"><code>feature</code></dt>
<dd>
<p>Ativa o recurso especificado. Isso requer que o <code>fast-import</code> ofereça compatibilidade ao recurso especificado, caso contrário, que seja abortado.</p>
</dd>
<dt class="hdlist1"><code>option</code></dt>
<dd>
<p>Especifique qualquer uma das opções listadas em <code>OPTIONS</code> que não alterem a semântica do fluxo para atender às necessidades do front-end. Este comando é opcional, não sendo necessário para executar uma importação.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_commit"><code>commit</code></h3>
<div class="paragraph">
<p>Crie ou atualize uma ramificação com um novo commit, registrando uma alteração lógica no projeto.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'commit' SP &lt;ref&gt; LF
        mark?
        original-oid?
        ('author' (SP &lt;nome&gt;)? SP LT &lt;e-mail&gt; GT SP &lt;quando&gt; LF)?
        'committer' (SP &lt;nome&gt;)? SP LT &lt;e-mail&gt; GT SP &lt;quando&gt; LF
        ('encoding' SP &lt;codificação&gt;)?
        data
        ('from' SP &lt;commit-ish&gt; LF)?
        ('merge' SP &lt;commit-ish&gt; LF)*
        (filemodify | filedelete | filecopy | filerename | filedeleteall | notemodify)*
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;ref&gt;</code> é o nome do ramo no qual o commit deve ser feito. Normalmente, os nomes dos ramos são prefixados com <code>refs/heads/</code> no Git, portanto, a importação do símbolo do ramo CVS <code>RELENG-1_0</code> utilizaria <code>refs/heads/RELENG-1_0</code> como o valor de <code>&lt;ref&gt;</code>. O valor de <code>&lt;ref&gt;</code> deve ser um "refname" válido no Git. Como <code>LF</code> não é válido em um "refname" do Git, nenhuma sintaxe de aspas ou de escape é compatível aqui.</p>
</div>
<div class="paragraph">
<p>Um comando de marcação <code>mark</code> pode aparecer opcionalmente, solicitando ao <code>fast-import</code> para salvar uma referência ao commit recém-criado para uso futuro através do front-end (veja abaixo). É muito comum que os front-ends marquem cada commit criado, permitindo assim a criação futura de ramificações a partir de qualquer commit importado.</p>
</div>
<div class="paragraph">
<p>O comando <code>data</code> após o <code>committer</code> deve suprir a mensagem do commit (veja abaixo a sintaxe do comando <code>data</code>). Para importar uma mensagem vazia de commit, utilize os dados com 0 de comprimento. As mensagens do commit são de livre formato e não são interpretadas pelo Git. Atualmente, elas devem ser codificadas em UTF-8, pois o <code>fast-import</code> não permite que outras codificações sejam utilizadas.</p>
</div>
<div class="paragraph">
<p>Zero ou mais comandos como <code>filemodify</code>, <code>filedelete</code>, <code>filecopy</code>, <code>filerename</code>, <code>filedeleteall</code> e <code>notemodify</code> podem ser incluídos para atualizar o conteúdo do ramo antes de criar o commit. Estes comandos podem ser utilizados em qualquer ordem. No entanto, é recomendado que um comando <code>filedeleteall</code> preceda todos os comandos <code>filemodify</code>, <code>filecopy</code>, <code>filerename</code> e <code>notemodify</code> no mesmo commit, já que <code>filedeleteall</code> limpa a ramificação (veja abaixo).</p>
</div>
<div class="paragraph">
<p>O <em>LF</em> após o comando é opcional (costumava ser obrigatório). Observe que por razões de retrocompatibilidade, caso o commit termine com um comando <code>data</code> (ou seja, não tiver nenhum comando <code>from</code>, <code>merge</code>, <code>filemodify</code>, <code>filedelete</code>, <code>filecopy</code>, <code>filerename</code>, <code>filedeleteall</code> ou <code>notemodify</code>) então dois comandos <em>LF</em> podem aparecer no final do comando em vez de apenas um.</p>
</div>
<div class="sect3">
<h4 id="_author"><code>author</code></h4>
<div class="paragraph">
<p>Um comando <code>autor</code> pode opcionalmente aparecer, caso as informações do autor puderem diferir das informações de quem fez o commit. Caso o <code>autor</code> seja omitido, então o <code>fast-import</code> usará automaticamente as informações de quem fez o commit para a parte relaiva ao autor do commit. Veja abaixo uma descrição dos campos em <code>autor</code>, pois são idênticos aos do <code>committer</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_committer"><code>committer</code></h4>
<div class="paragraph">
<p>O comando <code>committer</code> indica quem foi que fez o commit e quando foi feito.</p>
</div>
<div class="paragraph">
<p>Aqui <code>&lt;nome&gt;</code> é o nome de exibição da pessoa (&#8220;Com M Itter&#8221; por exemplo) and <code>&lt;e-mail&gt;</code> é o endereço de e-mail da pessoa(&#8220;cm@example.com&#8221;). <code>LT</code> e <code>GT</code> são os símbolos literais menores que (<code>\x3c</code>) e maiores que (<code>\x3e</code>). Isso é necessário para delimitar o endereço de e-mail dos outros campos na linha. Observe que <code>&lt;nome&gt;</code> e <code>&lt;e-mail&gt;</code> são de forma livre e podem conter qualquer sequência de bytes, exceto <code>LT</code>,` GT` e <code>LF</code>. <code>&lt;nome&gt;</code> é codificada em UTF-8.</p>
</div>
<div class="paragraph">
<p>A hora da alteração é usada por <code>&lt;quando&gt;</code> utilizando o formato de data selecionado pela opção da linha de comando <code>--date-format=&lt;fmt&gt;</code>. Consulte &#8220;Formatos de data&#8221; acima para obter o conjunto de formatos compatíveis e a sua sintaxe.</p>
</div>
</div>
<div class="sect3">
<h4 id="_encoding"><code>encoding</code></h4>
<div class="paragraph">
<p>O comando opcional <code>encoding</code> indica a codificação da mensagem do commit. A maioria dos commits são UTF-8 e a codificação é omitida, porém isso permite importar as mensagens dos commits para o git sem que primeiro seja necessário recodificá-las.</p>
</div>
</div>
<div class="sect3">
<h4 id="_from"><code>from</code></h4>
<div class="paragraph">
<p>O comando <code>from</code> é utilizado para especificar o commit para inicializar esta ramificação. Esta revisão será o primeiro ancestral do novo commit. O estado da árvore construída neste commit começará com a condição no commit <code>from</code> e será alterado pelas alterações do conteúdo deste commit.</p>
</div>
<div class="paragraph">
<p>Omitir o comando <code>from</code> no primeiro commit de uma nova ramificação fará com que o <code>fast-import</code> crie este commit sem antecessor. Isso tende a ser desejado apenas para o commit inicial de um projeto. Caso o front-end crie todos os arquivos do zero ao criar uma nova ramificação, um comando <code>merge</code> poderá ser utilizado em vez de <code>from</code> para iniciar o commit com uma árvore vazia. Omitir o comando <code>from</code> em ramificações existentes é geralmente desejado, pois o commit atual neste ramo é automaticamente assumido como o primeiro antecessor do novo commit.</p>
</div>
<div class="paragraph">
<p>Como <code>LF</code> não é válido em uma referência de nome do Git ou em uma expressão SHA-1, nenhuma sintaxe de citação ou escape é compatível com <code>&lt;commit-ish&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Aqui <code>&lt;commit-ish&gt;</code> é qualquer um dos seguintes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>O nome de uma ramificação existente já na tabela de ramificações internas do <code>fast-import</code>. Caso o <code>fast-import</code> não saiba o nome, ele será tratado como uma expressão SHA-1.</p>
</li>
<li>
<p>A marcação de referência, <code>:&lt;idnum&gt;</code>, onde <code>&lt;idnum&gt;</code> seja o número da marcação.</p>
<div class="paragraph">
<p>O motivo do <code>fast-import</code> utilizar <code>:</code> para indicar uma marcação de referência, este caractere não é legal com um nome do ramo do Git. O <code>:</code> principal facilita a distinção entre a marcação 42 (<code>:42</code>) e a ramificação 42 (<code>42</code> ou <code>refs/heads/42</code>), ou um SHA-1 abreviado que passou a consistir apenas em dígitos com base 10.</p>
</div>
<div class="paragraph">
<p>As marcações devem ser declaradas (através de <code>mark</code>) antes de poderem ser utilizadas.</p>
</div>
</li>
<li>
<p>Um commit completo com 40 bytes ou um SHA-1 abreviado em hexadecimal.</p>
</li>
<li>
<p>Qualquer expressão Git SHA-1 válido que resolva para um commit. Consulte &#8220;DEFININDO AS REVISÕES&#8221; em <a href="gitrevisions.html">gitrevisions(7)</a> para mais detalhes.</p>
</li>
<li>
<p>O SHA-1 nulo especial (40 zeros) especifica que a ramificação deve ser removida.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>O caso especial de reiniciar uma importação incremental do valor atual do ramo deve ser escrito como:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>        from refs/heads/branch^0</pre>
</div>
</div>
<div class="paragraph">
<p>O sufixo <code>^0</code> é necessário, pois a importação rápida não permite que uma ramificação inicie por si mesma e a ramificação é criada na memória antes que o comando <code>from</code> seja lido pela entrada. Adicionar o <code>^0</code> irá impor que o <code>fast-import</code> resolva o commit através da biblioteca de análise de revisão do Git, em vez de sua tabela de ramificação interna, carregando assim o valor existente do ramo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_merge"><code>merge</code></h4>
<div class="paragraph">
<p>Inclui um commit ancestral adicional. O link de ancestralidade adicional não altera a maneira como o estado da árvore é construído nesse commit. Caso o comando <code>from</code> seja omitido durante a criação de uma nova ramificação, o primeiro commit` merge` será o primeiro ancestral do commit atual, e o ramo começará sem arquivos. Um número ilimitado de comandos <code>merge</code> por commit é permitido pelo <code>fast-import</code>, estabelecendo assim uma mesclagem n-way.</p>
</div>
<div class="paragraph">
<p>Aqui <code>&lt;commit-ish&gt;</code> é qualquer uma das expressões de especificação de um commit também aceitas por <code>from</code> (veja acima).</p>
</div>
</div>
<div class="sect3">
<h4 id="_filemodify"><code>filemodify</code></h4>
<div class="paragraph">
<p>Incluído no comando <code>commit</code> para adicionar um novo arquivo ou alterar o conteúdo de um arquivo existente. Este comando possui dois meios diferentes de especificar o conteúdo do arquivo.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Formato de dados externos</dt>
<dd>
<p>O conteúdo dos dados para o arquivo já foi informado por um comando <code>blob</code> (bolha) anterior. O front-end só precisa conectá-lo.</p>
<div class="literalblock">
<div class="content">
<pre>        'M' SP &lt;modo&gt; SP &lt;dataref&gt; SP &lt;caminho&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Aqui geralmente <code>&lt;dataref&gt;</code> deve ser uma marcação de referência (<code>:&lt;idnum&gt;</code>) definida por um comando <code>blob</code> ou um SHA-1 completo com 40 bytes de um objeto bolha já existente no Git. Caso o <code>&lt;modo&gt;</code> seja <code>040000`</code> então <code>&lt;dataref&gt;</code> deve ser o SHA-1 completo com 40 bytes de um objeto existente na árvore Git ou uma marcação de referência definida com <code>--import-marks</code>.</p>
</div>
</dd>
<dt class="hdlist1">Formato de dados em linha</dt>
<dd>
<p>O conteúdo dos dados para o arquivo ainda não foi informado. O front-end deseja fornecê-lo como parte deste comando de modificação.</p>
<div class="literalblock">
<div class="content">
<pre>        'M' SP &lt;modo&gt; SP 'inline' SP &lt;caminho&gt; LF
        dado</pre>
</div>
</div>
<div class="paragraph">
<p>Veja abaixo uma descrição detalhada do comando <code>data</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Nos dois formatos o <code>&lt;modo&gt;</code> é o tipo de entrada do arquivo em formato octal. O Git é compatível apenas com os seguintes modos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>100644</code> ou <code>644</code>: um arquivo normal (não executável). A maioria dos arquivos na maioria dos projetos utiliza este modo. Em caso de dúvida, é isso mesmo que deve ser utilizado.</p>
</li>
<li>
<p><code>100755</code> ou <code>755</code>: Um arquivo normal, porém executável.</p>
</li>
<li>
<p><code>120000</code>: um link simbólico, o conteúdo do arquivo será o destino do link.</p>
</li>
<li>
<p><code>160000</code>: Um gitlink SHA-1 do objeto referindo-se a um commit em outro repositório. Os links Git podem ser especificados apenas pelo SHA ou por meio de uma marcação do commit. Eles são utilizados para implementar os submódulos.</p>
</li>
<li>
<p><code>040000</code>: um subdiretório. Os subdiretórios podem ser especificados apenas pelo SHA ou através de uma marcação de árvore definida com <code>--import-marks</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nos dois formatos o <code>&lt;caminho&gt;</code> é o caminho completo do arquivo a ser adicionado (caso ainda não exista) ou modificado (caso já exista).</p>
</div>
<div class="paragraph">
<p>Uma cadeia de caracteres <code>&lt;caminho&gt;</code> deve usar separadores de diretório no estilo UNIX (barra <code>/</code>), pode conter qualquer byte que não seja <code>LF</code> e não deve começar com aspas duplas (<code>"</code>).</p>
</div>
<div class="paragraph">
<p>Um caminho pode usar aspas no estilo C; é aceito em todos os casos e obrigatório caso o nome do arquivo comece com duas aspas ou tenha um <code>LF</code>. Na citação no estilo C, o nome completo deve estar entre duas aspas e qualquer caractere <code>LF</code>, barra invertida ou duas aspas deve ser escapado precedendo-os com uma barra invertida (<code>"caminho/com\n, \\ e \"nele"</code> por exemplo).</p>
</div>
<div class="paragraph">
<p>O valor de <code>&lt;caminho&gt;</code> deve estar em forma canônica. Ou seja, não deve:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contém um componente de diretório vazio (<code>foo//bar</code> é inválido por exemplo),</p>
</li>
<li>
<p>termina com um separador de diretório (<code>foo/</code> é inválido por exemplo),</p>
</li>
<li>
<p>comece com um separador de diretório (<code>/foo</code> é inválido por exemplo),</p>
</li>
<li>
<p>tem o componente especial <code>.</code> ou <code>..</code> (<code>foo/./bar</code> e <code>foo/../bar</code> são inválidos por exemplo).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A raiz da árvore pode ser representada por uma cadeia de caracteres vazios como <code>&lt;caminho&gt;</code>.</p>
</div>
<div class="paragraph">
<p>É recomendável que o <code>&lt;caminho&gt;</code> seja sempre codificado utilizando UTF-8.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filedelete"><code>filedelete</code></h4>
<div class="paragraph">
<p>Incluído no comando <code>commit</code> para remover um arquivo ou excluir recursivamente um diretório inteiro do ramo. Caso a remoção do arquivo ou diretório deixar o seu diretório de origem vazio, o diretório de origem também será automaticamente removido. Isso faz segue na árvore até que o primeiro diretório não vazio ou até que chegue até a raiz.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'D' SP &lt;caminho&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>aqui o <em>&lt;caminho&gt;</em> é o caminho completo do arquivo ou subdiretório que será removido do ramo. Consulte <code>filemodify</code> acima para obter uma descrição mais detalhada sobre <code>&lt;caminho&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filecopy"><code>filecopy</code></h4>
<div class="paragraph">
<p>Recursivamente copie um arquivo ou subdiretório existente para um local diferente dentro do ramo. O arquivo ou diretório existente deve existir. Caso o destino exista, ele será completamente substituído pelo conteúdo copiado da fonte.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'C' SP &lt;caminho&gt; SP &lt;caminho&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>aqui o primeiro <code>&lt;caminho&gt;</code> é o local de origem e o segundo <code>&lt;caminho&gt;</code> é o destino. Consulte <code>filemodify</code> acima para uma descrição detalhada de como pode ser o <code>&lt;caminho&gt;</code>. O caminho deve ser citado para usar um caminho de origem que contenha <code>SP</code>.</p>
</div>
<div class="paragraph">
<p>Um comando <code>filecopy</code> entra em vigor imediatamente. Depois que o local de origem tenha sido copiado para o destino, quaisquer comandos futuros aplicados ao local de origem não afetarão o destino da cópia.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filerename"><code>filerename</code></h4>
<div class="paragraph">
<p>Renomeia um arquivo ou subdiretório existente para um local diferente dentro do ramo. O arquivo ou diretório existente deve existir. Caso o destino exista, ele será substituído pelo diretório de origem.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'R' SP &lt;caminho&gt; SP &lt;caminho&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>aqui o primeiro <code>&lt;caminho&gt;</code> é o local de origem e o segundo <code>&lt;caminho&gt;</code> é o destino. Consulte <code>filemodify</code> acima para uma descrição detalhada de como pode ser o <code>&lt;caminho&gt;</code>. O caminho deve ser citado para usar um caminho de origem que contenha <code>SP</code>.</p>
</div>
<div class="paragraph">
<p>Um comando <code>filerename</code> entra em vigor imediatamente. Depois que o local de origem for renomeado para o destino, quaisquer comandos futuros aplicados ao local de origem criarão novos arquivos e não afetarão o destino da renomeação.</p>
</div>
<div class="paragraph">
<p>Observe que um <code>filename</code> é o mesmo que um` filecopy` seguido de um <code>filedelete</code> do local de origem. Há uma pequena vantagem de desempenho em usar o <code>filename</code>, mas a vantagem é tão pequena que nunca vale a pena tentar converter um par de exclusão/adição no material de origem em uma renomeação para o <code>fast-import</code>. Este comando <code>filerename</code> é informado apenas para simplificar os front-ends que já possuam informações de renomeação e não querem se decompor em um <code>filecopy</code> seguido de um <code>filedelete</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_filedeleteall"><code>filedeleteall</code></h4>
<div class="paragraph">
<p>Incluído no comando <code>commit</code> para remover todos os arquivos (e também todos os diretórios) do ramo. Este comando redefine a estrutura interna do ramo para que exista nenhum arquivo nele, permitindo que o "front-end" adicione posteriormente todos os arquivos interessantes do zero.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'deleteall' LF</pre>
</div>
</div>
<div class="paragraph">
<p>Este comando é extremamente útil caso o front-end não soiba (ou não quer saber) quais são os arquivos estão atualmente no ramo e, portanto, não conseguir gerar os comandos <code>filedelete</code> adequados para atualizar o conteúdo.</p>
</div>
<div class="paragraph">
<p>A emissão de um arquivo ʻfiledeleteall` seguido dos comandos necessários <code>filemodify</code> para definir o conteúdo correto e produzirá os mesmos resultados que o envio apenas dos comandos necessários <code>filemodify</code> e <code>filedelete</code>. A abordagem <code>filedeleteall</code> pode, no entanto, exigir que o <code>fast-import</code> para usar um pouco mais de memória por ramificação ativa (menos de 1 MiB para projetos ainda maiores); portanto, os front-ends que podem obter facilmente apenas aos caminhos afetados para um commit são incentivados a fazê-lo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_notemodify"><code>notemodify</code></h4>
<div class="paragraph">
<p>Incluído em um comando <code>commit</code> <code>&lt;notes_ref&gt;</code> para adicionar uma nova nota anotando um <code>&lt;commit-ish&gt;</code> ou alterar este conteúdo da anotação. Internamente, é semelhante ao arquivo modificado 100644 no caminho <code>&lt;commit-ish&gt;</code> (talvez dividido em subdiretórios). Não é aconselhável usar outros comandos para escrever na árvore <code>&lt;notes_ref&gt;</code>, exceto <code>filedeleteall</code> para excluir todas as anotações existentes nessa árvore. Este comando possui dois meios diferentes de especificar o conteúdo da anotação.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Formato de dados externos</dt>
<dd>
<p>O conteúdo dos dados para a anotação já foi informado por um comando <code>blob</code> anterior. O front-end só precisa conectá-lo ao commit que deve ser anotado.</p>
<div class="literalblock">
<div class="content">
<pre>        'N' SP &lt;dataref&gt; SP &lt;commit-ish&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Aqui <code>&lt;dataref&gt;</code> pode ser uma marcação de referência (<code>:&lt;idnum&gt;</code>) definida por um comando <code>blob</code> anterior ou um SHA-1 completo com 40 bytes de um objeto bolha existente.</p>
</div>
</dd>
<dt class="hdlist1">Formato de dados em linha</dt>
<dd>
<p>O conteúdo dos dados da anotação ainda não foi informado. O front-end deseja fornecê-lo como parte deste comando de modificação.</p>
<div class="literalblock">
<div class="content">
<pre>        'N' SP 'inline' SP &lt;commit-ish&gt; LF
        dado</pre>
</div>
</div>
<div class="paragraph">
<p>Veja abaixo uma descrição detalhada do comando <code>data</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Nos dois formatos, <code>&lt;commit-ish&gt;</code> é qualquer uma das expressões de especificação do commit também aceitos por <code>from</code> (veja acima).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mark"><code>mark</code></h3>
<div class="paragraph">
<p>Organiza <code>fast-import</code> para salvar uma referência ao objeto atual, permitindo que o front-end recupere este objeto em um momento futuro, sem conhecer o seu SHA-1. Aqui, o objeto atual é o comando de criação do objeto no qual o comando <code>mark</code> aparece. Pode ser <code>commit</code>, <code>tag</code> e <code>blob</code>, mas <code>commit</code> é o uso mais comum.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'mark' SP ':' &lt;idnum&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;idnum&gt;</code> é o número atribuído pelo front-end a esta marcação. O valor de <code>&lt;idnum&gt;</code> é expresso como um número ASCII decimal inteiro. O valor 0 é reservado e não pode ser utilizado como uma marcação. Somente os valores maiores ou iguais a 1 podem ser utilizados como marcação.</p>
</div>
<div class="paragraph">
<p>As novas marcações são criadas automaticamente. As marcações existentes podem ser movidas para um outro objeto simplesmente reutilizando o mesmo <code>&lt;idnum&gt;</code> em outro comando <code>mark</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_original_oid"><code>original-oid</code></h3>
<div class="paragraph">
<p>Fornece o nome do objeto no sistema de controle de origem original. o <code>fast-import</code> simplesmente ignorará esta diretiva, porém os processos de filtro que operam e modificam o fluxo antes de alimentar o <code>fast-import</code> podem ter usos para essas informações</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'original-oid' SP &lt;identificador-do-objeto&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;identificador-do-objeto&gt;</code> é qualquer cadeia de caracteres que não contenha LF.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tag"><code>tag</code></h3>
<div class="paragraph">
<p>Cria uma tag anotada referente a um commit específico. Para criar tags <code>leve</code> (não anotadas), consulte o comando <code>reset</code> abaixo.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'tag' SP &lt;nome&gt; LF
        mark?
        'from' SP &lt;commit-ish&gt; LF
        original-oid?
        'tagger' (SP &lt;nome&gt;)? SP LT &lt;e-mail&gt; GT SP &lt;quando&gt; LF
        data</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;nome&gt;</code> é o nome da tag a ser criada.</p>
</div>
<div class="paragraph">
<p>Os nomes das tags são prefixados automaticamente com <code>refs/tags/</code> quando armazenados no Git, portanto, a importação do símbolo do ramo CVS <code>RELENG-1_0-FINAL</code> usaria apenas <code>RELENG-1_0-FINAL</code> para <code>&lt;nome&gt;</code> e o <code>fast-import</code> irá escrever um <code>ref</code> correspondente como <code>refs/tags/RELENG-1_0-FINAL</code>.</p>
</div>
<div class="paragraph">
<p>O valor de <code>&lt;nome&gt;</code> deve ser um <code>refname</code> válido no Git e portanto, pode conter barras. Como <code>LF</code> não é válido em um "refname" do Git, nenhuma sintaxe de aspas ou de escape é compatível aqui.</p>
</div>
<div class="paragraph">
<p>O comando <code>from</code> é o mesmo que no comando <code>commit</code>; veja acima para detalhes.</p>
</div>
<div class="paragraph">
<p>O comando <code>tagger</code> usa o mesmo formato que <code>committer</code> dentro de <code>commit</code>; veja novamente acima para obter detalhes.</p>
</div>
<div class="paragraph">
<p>O comando <code>data</code> após o <code>tagger</code> deve fornecer a mensagem anotada do tag (veja abaixo a sintaxe do comando <code>data</code>). Para importar uma mensagem de tag vazia, utilize dados com 0 de comprimento. As mensagens de tag são de forma livre e não são interpretados pelo Git. Atualmente, elas devem ser codificadas em UTF-8, pois o <code>fast-import</code> não permite que outras codificações sejam utilizadas.</p>
</div>
<div class="paragraph">
<p>A assinatura de tags anotadas durante a importação com <code>fast-import</code> não é compatível. Não é recomendável tentar incluir na sua própria assinatura PGP/GPG, pois o front-end não tem (facilmente) acesso ao conjunto completo de bytes que normalmente entra nessa assinatura. Caso a assinatura seja necessária, crie tags <code>leve</code> a partir do <code>fast-import</code> com <code>reset</code> e crie as versões anotadas dessas tags desconectadas com o processo predefinido <em>git tag</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reset"><code>reset</code></h3>
<div class="paragraph">
<p>Cria (ou recria) a ramificação nomeada, iniciando opcionalmente a partir de uma revisão específica. O comando <code>reset permite que um front-end emita um novo comando `from</code> para uma ramificação existente ou crie uma nova ramificação a partir de um commit existente sem criar um novo commit.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'reset' SP &lt;ref&gt; LF
        ('from' SP &lt;commit-ish&gt; LF)?
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Para uma descrição detalhada sobre <code>&lt;ref&gt;</code> e <code>&lt;commit-ish&gt;</code> veja acima em <code>commit</code> e` from`.</p>
</div>
<div class="paragraph">
<p>O <code>LF</code> após o comando é opcional (costumava ser necessário).</p>
</div>
<div class="paragraph">
<p>O comando <code>reset</code> também pode ser utilizado para criar tags leves (não anotadas). Por exemplo:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>reset refs/tags/938
from :938</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>criaria a tag <code>leve</code> <code>refs/tags/938</code> se referindo a qualquer marcação do commit <code>:938</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_blob"><code>blob</code></h3>
<div class="paragraph">
<p>Solicita a gravação de uma revisão do arquivo no pacote do arquivo. A revisão não está conectada a nenhum commit; essa conexão deve ser formada com um comando <code>commit</code> subsequente referenciando a bolha através de uma marcação atribuída.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'blob' LF
        mark?
        original-oid?
        dado</pre>
</div>
</div>
<div class="paragraph">
<p>O comando <code>mark</code> é opcional aqui, pois alguns front-ends optaram por gerar o SHA-1 do Git para a bolha por conta própria e alimentá-la diretamente para o <code>commit</code>. No entanto, normalmente é mais trabalhoso do que vale a pena, pois as marcas são baratas de armazenar e fáceis de usar.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data"><code>data</code></h3>
<div class="paragraph">
<p>Fornece os dados brutos (para uso como o conteúdo bolha/arquivo, as mensagens do commit ou as mensagens de anotação das tags) para o <code>fast-import</code>. Os dados podem ser informados utilizando uma contagem exata de bytes ou delimitados por uma linha final. Os front-ends reais destinados para conversões de qualidade de produção devem sempre usar o formato exato de contagem de bytes, pois são mais robustos e têm um melhor desempenho. O formato delimitado destina-se principalmente ao teste de importação rápida.</p>
</div>
<div class="paragraph">
<p>As linhas de comentário que aparecem na parte <code>&lt;raw&gt;</code> dos comandos <code>data</code> sempre são consideradas parte do corpo dos dados e portanto, nunca são ignoradas pelo <code>fast-import</code>. Isso torna seguro importar qualquer conteúdo do arquivo/mensagem cujas linhas possam começar com <code>#</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Formato exato de contagem de bytes</dt>
<dd>
<p>O front-end deve especificar a quantidade de bytes dos dados.</p>
<div class="literalblock">
<div class="content">
<pre>        'data' SP &lt;count&gt; LF
        &lt;raw&gt; LF?</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;count&gt;</code> é a quantidade exato de bytes que aparece em <code>&lt;raw&gt;</code>. O valor <code>&lt;count&gt;</code> é expressado como um número ASCII decimal inteiro. O <code>LF</code> em ambos os lados de <code>&lt;raw&gt;</code> não está incluído em <code>&lt;count&gt;</code> e não será incluído nos dados importados.</p>
</div>
<div class="paragraph">
<p>O <code>LF</code> após <code>&lt;raw&gt;</code> é opcional (costumava ser necessário), mas recomendado. A inclusão sempre facilita a depuração de um fluxo do <code>fast-import</code>, pois o próximo comando sempre inicia na coluna 0 da próxima linha, ainda que <code>&lt;raw&gt;</code> não termine com um <code>LF</code>.</p>
</div>
</dd>
<dt class="hdlist1">Formato delimitado</dt>
<dd>
<p>Uma cadeia de caracteres delimitadora é utilizada para marcar o final dos dados. O <code>fast-import</code> calculará o comprimento pesquisando pelo delimitador. Esse formato é útil principalmente para testes e não é recomendado para dados reais.</p>
<div class="literalblock">
<div class="content">
<pre>        'data' SP '&lt;&lt;' &lt;delim&gt; LF
        &lt;raw&gt; LF
        &lt;delim&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>onde <code>&lt;delim&gt;</code> é a cadeia de caracteres escolhida para a delimitação. A cadeia de caracteres <code>&lt;delim&gt;</code> não deve aparecer em uma linha sozinha dentro de <code>&lt;raw&gt;</code>, pois o <code>fast-import</code> pensará que os dados terminam mais cedo do que realmente terminam. O <code>LF</code> imediatamente após <code>&lt;raw&gt;</code> faz parte de <code>&lt;raw&gt;</code>. Essa é uma das limitações do formato delimitado, é impossível fornecer um bloco de dados que não tenha um <code>LF</code> como o seu último byte.</p>
</div>
<div class="paragraph">
<p>O <code>LF</code> após <code>&lt;delim&gt; LF</code> é opcional (costumava ser necessário).</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_alias"><code>alias</code></h3>
<div class="paragraph">
<p>Registre que uma marcação se refere a um determinado objeto sem criar primeiro nenhum novo objeto.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'alias' LF
        mark
        'to' SP &lt;commit-ish&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Para uma descrição detalhada do <code>&lt;commit-ish&gt;</code> veja acima em <code>from</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_checkpoint"><code>checkpoint</code></h3>
<div class="paragraph">
<p>Impõem o <code>fast-import</code> a fechar o arquivo de pacote atual, iniciar um novo e salvar todas os <code>refs</code>, tags e marcas das ramificações atuais.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'checkpoint' LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>Observe que o <code>fast-import</code> alterna automaticamente os arquivos do pacote quando o arquivo do pacote atual alcance <code>--max-pack-size</code> ou 4 GiB, o que for menor. Durante uma troca automática do pacote de arquivos <code>fast-import não atualiza os `refs</code>, tags ou marcações do ramo.</p>
</div>
<div class="paragraph">
<p>Como um <code>checkpoint</code> pode exigir uma quantidade significativa de tempo de CPU e E/S de disco (para calcular a soma de verificação SHA-1 do pacote geral, gerar o arquivo do índice correspondente e atualizar as <code>refs</code>), pode levar vários minutos para um único comando <code>checkpoint</code> para concluir.</p>
</div>
<div class="paragraph">
<p>Os front-end podem optar por emitir <code>checkpoints</code> durante as importações extremamente grandes e de execução demorada, ou quando precisam permitir que outro processo do Git acesse uma ramificação. No entanto, dado que um repositório do Subversion com 30 GiB pode ser carregado no Git através do <code>fast-import</code> em cerca de 3 horas, talvez não seja necessário um <code>checkpoint</code> explícito.</p>
</div>
<div class="paragraph">
<p>O <code>LF</code> após o comando é opcional (costumava ser necessário).</p>
</div>
</div>
<div class="sect2">
<h3 id="_progress"><code>progress</code></h3>
<div class="paragraph">
<p>Faz com que o <code>fast-import</code> imprima toda a linha <code>progress</code> sem modificação em seu canal de saída predefinido (descritor do arquivo 1) quando o comando é processado a partir do fluxo de entrada. Caso contrário, o comando não tem impacto na importação atual ou em qualquer outro estado interno do <code>fast-import</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'progress' SP &lt;any&gt; LF
        LF?</pre>
</div>
</div>
<div class="paragraph">
<p>A parte <code>&lt;any&gt;</code> do comando pode conter qualquer sequência de bytes que não contenha um <code>LF</code>. O <code>LF</code> após o comando é opcional. Os chamadores podem desejar processar a saída por meio de uma ferramenta como sed para remover a parte principal da linha, por exemplo:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>frontend | git fast-import | sed 's/^progress //'</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A colocação de um comando <code>progress</code> imediatamente após um <code>checkpoint</code> informará ao leitor quando o <code>checkpoint</code> seja concluído e ele poderá acessar com segurança os <code>refs</code> que o <code>fast-import</code> atualizaram.</p>
</div>
</div>
<div class="sect2">
<h3 id="_get_mark"><code>get-mark</code></h3>
<div class="paragraph">
<p>Faz com que o <code>fast-import</code> imprima o SHA-1 correspondente a uma marcação em <code>stdout</code> ou ao descritor de arquivo previamente organizado com o argumento <code>--cat-blob-fd</code>. Caso contrário, o comando não tem impacto na importação atual; seu objetivo é recuperar o SHA-1s que commits posteriores podem querer se referir em suas mensagens de commit.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'get-mark' SP ':' &lt;idnum&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>Consulte &#8220;RESPOSTAS AOS COMANDOS&#8221; abaixo para obter detalhes sobre como ler esta saída com segurança.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cat_blob"><code>cat-blob</code></h3>
<div class="paragraph">
<p>Faz com que o <code>fast-import</code> imprima uma bolha em um descritor do arquivo previamente organizado com o argumento <code>--cat-blob-fd</code>. Caso contrário, o comando não tem impacto na importação atual; o seu principal objetivo é recuperar as bolhas que podem estar na memória do <code>fast-import</code>, mas não acessíveis no repositório de destino.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'cat-blob' SP &lt;dataref&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>O <code>&lt;dataref&gt;</code> pode ser uma marcação de referência (<code>:&lt;idnum&gt;</code>) definida anteriormente ou um SHA-1 completo com 40 bytes de uma bolha Git pré-existente ou pronto para ser gravado.</p>
</div>
<div class="paragraph">
<p>A saída usa o mesmo formato que <code>git cat-file --batch</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;sha1&gt; SP 'blob' SP &lt;tamanho&gt; LF
&lt;contents&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Este comando pode ser usado onde uma diretiva <code>filemodify</code> possa aparecer, permitindo que ela seja usada no meio de um commit. Para um <code>filemodify</code> usando uma diretiva <em>inline</em>, ele também pode aparecer logo antes da diretiva <code>data</code>.</p>
</div>
<div class="paragraph">
<p>Consulte &#8220;RESPOSTAS AOS COMANDOS&#8221; abaixo para obter detalhes sobre como ler esta saída com segurança.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ls"><code>ls</code></h3>
<div class="paragraph">
<p>Imprime as informações sobre o objeto em um caminho para um descritor do arquivo organizado anteriormente com a opção <code>--cat-blob-fd</code>. Permite a impressão de uma bolha a partir do commit ativo (com <code>cat-blob</code>) ou copiando uma bolha ou árvore de um commit anterior para uso no atual (com <code>filemodify</code>).</p>
</div>
<div class="paragraph">
<p>O comando <code>ls</code> também pode ser usado onde uma diretiva <code>filemodify</code> possa aparecer, permitindo que ela seja usada no meio de um commit.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lendo a partir do commit ativo</dt>
<dd>
<p>Este formulário pode ser utilizado apenas no meio de um <code>commit</code>. O caminho informa uma entrada do diretório no commit ativo do <code>fast-import</code>. O caminho deve ser citado neste caso.</p>
<div class="literalblock">
<div class="content">
<pre>        'ls' SP &lt;caminho&gt; LF</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Lendo de uma árvore nomeada</dt>
<dd>
<p>O <code>&lt;dataref&gt;</code> pode ser uma marcação de referência (<code>:&lt;idnum&gt;</code>) ou o SHA-1 completo com 40 bytes de uma tag, commit ou objeto da árvore Git pré-existente ou aguardando para ser gravado. O caminho é relativo ao cume da árvore informada através do <code>&lt;dataref&gt;</code>.</p>
<div class="literalblock">
<div class="content">
<pre>        'ls' SP &lt;dataref&gt; SP &lt;caminho&gt; LF</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Consulte <code>filemodify</code> acima para uma descrição detalhada de <code>&lt;caminho&gt;</code>.</p>
</div>
<div class="paragraph">
<p>A saída usa o mesmo formato que <code>git ls-tree &lt;árvore&gt; -- &lt;caminho&gt;</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;mode&gt; SP ('blob' | 'tree' | 'commit') SP &lt;dataref&gt; HT &lt;caminho&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>O &lt;dataref&gt; representa o objeto bolha, árvore ou commit no &lt;caminho&gt; e pode ser utilizado posteriormente nos comandos <code>get-mark</code>, <code>cat-blob</code>, <code>filemodify</code> ou <code>ls</code>.</p>
</div>
<div class="paragraph">
<p>Caso não haja um arquivo ou subárvore nesse caminho, o <code>git fast-import</code> o reportará</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>missing SP &lt;caminho&gt; LF</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Consulte &#8220;RESPOSTAS AOS COMANDOS&#8221; abaixo para obter detalhes sobre como ler esta saída com segurança.</p>
</div>
</div>
<div class="sect2">
<h3 id="_feature"><code>feature</code></h3>
<div class="paragraph">
<p>Exija que a importação rápida ofereça suporte ao recurso especificado ou o anule.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        'feature' SP &lt;característica&gt; ('=' &lt;argumento&gt;)? LF</pre>
</div>
</div>
<div class="paragraph">
<p>A parte &lt;característica&gt; do comando pode ser qualquer um dos seguintes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">date-format</dt>
<dt class="hdlist1">export-marks</dt>
<dt class="hdlist1">relative-marks</dt>
<dt class="hdlist1">no-relative-marks</dt>
<dt class="hdlist1">force</dt>
<dd>
<p>Aja como se a opção da linha de comando coincida com um <code>--</code> inicial fosse passada na linha de comando (consulte OPÇÕES, acima).</p>
</dd>
<dt class="hdlist1">import-marks</dt>
<dt class="hdlist1">import-marks-if-exists</dt>
<dd>
<p>Como <code>--import-marks</code>, exceto em dois aspectos: primeiro, apenas um comando ´feature import-marks` ou <code>feature import-marks-if-exist</code> é permitido por fluxo; segundo, uma opção da linha de comando <code>--import-marks=</code> ou <code>--import-marks-if-existents</code> substitui qualquer um desses comandos "feature" no fluxo; terceiro, o <code>feature import-marks-if-exists</code> como uma opção da linha de comando coincidente ignora silenciosamente um arquivo inexistente.</p>
</dd>
<dt class="hdlist1">get-mark</dt>
<dt class="hdlist1">cat-blob</dt>
<dt class="hdlist1">ls</dt>
<dd>
<p>Exija que o o processo interno seja compatível com os comandos <em>get-mark</em>, <em>cat-blob</em> ou <em>ls</em> respectivamente. As versões do <code>fast-import</code> que não sejam compatíveis com o comando utilizado serão encerradas com uma mensagem. Isso permite que o erro de importação encerre com uma mensagem clara, em vez de perder tempo na parte inicial de uma importação, antes que um comando não compatível seja detectado.</p>
</dd>
<dt class="hdlist1">notes</dt>
<dd>
<p>Exija que a estrutura seja compatível com o subcomando <code>notemodify</code> (N) com o comando <code>commit</code>. As versões do <code>fast-import</code> que não sejam compatíveis com as anotações serão encerradas com uma mensagem.</p>
</dd>
<dt class="hdlist1">done</dt>
<dd>
<p>Indique um erro caso o fluxo termine sem um comando <em>done</em>. Sem este recurso, os erros que fazem com que o front-end termine abruptamente em um ponto conveniente no fluxo podem não ser detectados. Isso pode ocorrer, por exemplo, caso um front end de importação morra no meio da operação sem emitir um <code>SIGTERM</code> ou um <code>SIGKILL</code> em sua instância subordinada do <code>git fast-import</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_option"><code>option</code></h3>
<div class="paragraph">
<p>Processa a opção utilizada para que o <code>fast-import</code> do git se comporte de maneira que atenda às necessidades do front-end. Observe que as opções utilizadas pelo front-end são substituídas por quaisquer opções que o usuário possa especificar para obter o próprio <code>fast-import</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    'option' SP &lt;opção&gt; LF</pre>
</div>
</div>
<div class="paragraph">
<p>A parte <code>&lt;opção&gt;</code> do comando pode conter qualquer uma das opções listadas na seção OPTIONS que não alteram a semântica de importação, sem o <code>--</code> principal e são tratadas da mesma maneira.</p>
</div>
<div class="paragraph">
<p>Os comandos de opção devem ser os primeiros comandos na entrada (sem contar os comandos de recurso), para fornecer um comando de opção após um erro que não seja de opção.</p>
</div>
<div class="paragraph">
<p>As seguintes opções de linha de comando alteram a semântica de importação e, portanto, não podem ser passadas como opção:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>date-format</p>
</li>
<li>
<p>import-marks</p>
</li>
<li>
<p>export-marks</p>
</li>
<li>
<p>cat-blob-fd</p>
</li>
<li>
<p>force</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_done"><code>done</code></h3>
<div class="paragraph">
<p>Se o recurso <code>done</code> não estiver em uso, será tratado como se o <code>EOF</code> fosse lido. Isso pode ser utilizado para dizer à importação rápida para terminar mais cedo.</p>
</div>
<div class="paragraph">
<p>Caso a opção de linha de comando <code>--done</code> ou o comando <code>feature done</code> estiver em uso, o comando <code>done</code> é obrigatório e marca o final do fluxo.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_respostas_aos_comandos">RESPOSTAS AOS COMANDOS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Os novos objetos gravados pelo <code>fast-import</code> que não estão disponíveis de forma imediata. A maioria dos comandos <code>fast-import</code> não tem efeito visível até o próximo <code>checkpoint</code> (ou conclusão). O frontend pode enviar os comandos para preencher o canal de entrada do <code>fast-import</code> sem se preocupar com a agilidade com que eles entrarão em vigor, o que melhora o desempenho ao simplificar o agendamento.</p>
</div>
<div class="paragraph">
<p>No entanto, para alguns front-end, é útil poder ler os dados do repositório atual à medida que estão sendo atualizados (quando o material de origem descreve objetos em termos de patches a serem aplicados a objetos importados anteriormente por exemplo). Isso pode ser feito conectando o front-end e o <code>fast-import</code> por meio de tubos bidirecionais:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>mkfifo fast-import-output
frontend &lt;fast-import-output |
git fast-import &gt;fast-import-output</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Um front-end configurado desta maneira pode usar os comandos <code>progress</code>, <code>get-mark</code>, <code>ls</code> e <code>cat-blob</code> para ler as informações das importações em andamento.</p>
</div>
<div class="paragraph">
<p>Para evitar um impasse, tais front-ends devem consumir completamente quaisquer saída pendente que for gerada com <code>progress</code>, <code>ls</code>, <code>get-mark</code> e <code>cat-blob</code> antes de realizar as escritas que o <code>fast-import</code> possa bloquear.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relatórios_de_crash">RELATÓRIOS DE CRASH</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Caso uma entrada inválida seja utilizada na entrada do <code>fast-import</code>, ele terminará com um status de saída diferente de zero e criará um relatório de falha no topo do repositório Git de onde estava sendo importado. Os relatórios de falha contêm um instantâneo da condição interna do <code>fast-import</code>, bem como os comandos mais recentes que levaram à falha.</p>
</div>
<div class="paragraph">
<p>Todos os comandos recentes (incluindo os comentários do fluxo, alterações do arquivo e comandos de progresso) são exibidos no histórico de comandos no relatório, mas os dados brutos do arquivo e as mensagens dos commits são excluídos. Essa exclusão economiza espaço no arquivo de relatório e reduz a quantidade de memória intermédia que a importação rápida deve realizar durante a execução.</p>
</div>
<div class="paragraph">
<p>Depois de escrever um relatório, o <code>fast-import</code> fechará o pacote atual e exportará a tabela de marcação. Isso permite que o desenvolvedor front-end inspecione a condição do repositório e retome a importação a partir do ponto em que ele travou. As ramificações e tags modificadas não são atualizados durante uma falha, pois a importação não foi concluída com êxito. As informações do ramo e marcação podem ser encontrados no relatório da falha e devem ser aplicadas manualmente caso a atualização seja necessária.</p>
</div>
<div class="paragraph">
<p>Um exemplo de falha:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>$ cat &gt;in &lt;&lt;END_OF_INPUT
# my very first test commit
commit refs/heads/master
committer Shawn O. Pearce &lt;spearce&gt; 19283 -0400
# who is that guy anyway?
data &lt;&lt;EOF
this is my commit
EOF
M 644 inline .gitignore
data &lt;&lt;EOF
.gitignore
EOF
M 777 inline bob
END_OF_INPUT</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ git fast-import &lt;in
fatal: Corrupt mode: M 777 inline bob
fast-import: dumping crash report to .git/fast_import_crash_8434</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$ cat .git/fast_import_crash_8434
fast-import crash report:
    fast-import process: 8434
    parent process     : 1391
    at Sat Sep 1 00:58:12 2007</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>fatal: Corrupt mode: M 777 inline bob</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Most Recent Commands Before Crash
---------------------------------
  # my very first test commit
  commit refs/heads/master
  committer Shawn O. Pearce &lt;spearce&gt; 19283 -0400
  # who is that guy anyway?
  data &lt;&lt;EOF
  M 644 inline .gitignore
  data &lt;&lt;EOF
* M 777 inline bob</pre>
</div>
</div>
<div class="paragraph">
<p>Ramo Ativo LRU</p>
</div>
<div class="listingblock">
<div class="content">
<pre>active_branches = 1 cur, 5 max

          pos clock name ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
           1)      0 refs/heads/master

Inactive Branches</pre>
</div>
</div>
<div class="paragraph">
<p>refs/heads/master:
status      : active loaded dirty
tip commit  : 0000000000000000000000000000000000000000
old tree    : 0000000000000000000000000000000000000000
cur tree    : 0000000000000000000000000000000000000000
commit clock: 0
last pack   :</p>
</div>
<div class="literalblock">
<div class="content">
<pre>------------------- END OF CRASH REPORT</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dicas_e_truques">DICAS E TRUQUES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As dicas e truques a seguir foram coletadas de vários usuários do <code>fast-import</code> e são oferecidas aqui apenas como sugestões.</p>
</div>
<div class="sect2">
<h3 id="_utilize_uma_marcação_por_commit">Utilize uma Marcação por Commit</h3>
<div class="paragraph">
<p>Ao fazer uma conversão de repositório, utilize uma marcação única por commit (<code>mark :&lt;n&gt;</code>) e forneça a opção <code>--export-marks</code> na linha de comando. O <code>fast-import</code> despeja um arquivo que lista todas as marcações e o objeto Git SHA-1 que coincida com ela. Se o front-end puder vincular as marcações ao repositório de origem, é fácil verificar a precisão e a integridade da importação comparando cada commit do Git com a revisão de origem coincidente.</p>
</div>
<div class="paragraph">
<p>Vindo de um sistema como o "Perforce" ou o "Subversion", isso deve ser bastante simples, pois a marcação do <code>fast-import</code> também pode ser o número do conjunto de alterações do "Perforce" ou o número da revisão do "Subversion".</p>
</div>
</div>
<div class="sect2">
<h3 id="_ir_livremente_em_torno_dos_ramos">Ir Livremente em Torno dos Ramos</h3>
<div class="paragraph">
<p>Não tente otimizar o front-end para manter uma ramificação por vez durante uma importação. Embora isso possa ser um pouco mais rápido para o <code>fast-import</code>, ele tende a aumentar consideravelmente a complexidade do código do front-end.</p>
</div>
<div class="paragraph">
<p>O LRU do ramo incorporado ao <code>fast-import</code> tende a se comportar muito bem e o custo de ativar uma ramo inativo é tão baixo que o movimento entre os ramos praticamente não tem impacto no desempenho da importação.</p>
</div>
</div>
<div class="sect2">
<h3 id="_manipulando_renomeações">Manipulando Renomeações</h3>
<div class="paragraph">
<p>Ao importar um arquivo ou diretório renomeado, simplesmente exclua os nomes antigos e modifique os novos nomes durante o commit correspondente. O Git executa a detecção de renomeação após o fato, em vez de explicitamente detectá-lo durante um commit.</p>
</div>
</div>
<div class="sect2">
<h3 id="_utilizando_ramificações_para_a_correção_das_tags">Utilizando Ramificações para a Correção das Tags</h3>
<div class="paragraph">
<p>Alguns outros sistemas SCM permitem ao usuário criar uma tag a partir de vários arquivos que não pertencem ao mesmo commit/changeset. Ou para criar as tags que são um subconjunto dos arquivos disponíveis no repositório.</p>
</div>
<div class="paragraph">
<p>A importação dessas tags como está no Git é impossível sem qe seja feito pelo menos um commit que &#8220;corrija&#8221; os arquivos para coincidir com o conteúdo da tag. Utilize o comando <code>reset</code> do <code>fast-import</code> para redefinir uma ramificação fantasia fora do seu ramo normal para um commit base para a tag, depois confirme um ou mais correções dos arquivos de commits e por fim, identifique a ramificação fantasia.</p>
</div>
<div class="paragraph">
<p>Uma vez que todas as ramificações normais são armazenadas em <code>refs/heads/</code>, nomeie a tag de manutenção como <code>TAG_FIXUP</code> por exemplo. Dessa forma, é impossível que a ramificação de correção utilizada pelo importador tenha os conflitos do espaço de nomes com as ramificações reais importadas da origem (o nome <code>TAG_FIXUP</code> não é <code>refs/heads/TAG_FIXUP</code>).</p>
</div>
<div class="paragraph">
<p>Ao fazer os commits das correções, considere o uso de <code>merge</code> para conectar os commits para fornecer as revisões dos arquivos ao ramo de correção. Isso permitirá que ferramentas como o <em>git blame</em> rastreiem o histórico real do commit e anotem adequadamente os arquivos de origem.</p>
</div>
<div class="paragraph">
<p>Quando o <code>fast-import</code> encerrar, o front-end precisará executar o comando <code>rm .git/TAG_FIXUP</code> para remover a ramificação fantasia.</p>
</div>
</div>
<div class="sect2">
<h3 id="_importe_agora_reembale_depois">Importe Agora, Reembale Depois</h3>
<div class="paragraph">
<p>Logo que o <code>fast-import</code> conclua, o repositório Git estará completamente válido e pronto para uso. Normalmente, o processo consome muito pouco tempo, mesmo para projetos consideravelmente grandes (com mais de 100.000 commits).</p>
</div>
<div class="paragraph">
<p>No entanto, é necessário reembalar o repositório para melhorar a localidade dos dados e melhorar o desempenho. Projetos extremamente grandes pode levar horas (especialmente se <code>-f</code> e um parâmetro <code>--window</code> grande for utilizado). Como a reembalagem é segura para ser executada ao lado de leitores e escritores, execute a re-embalagem em segundo plano e deixe acabar quando finalizar. Não há motivo para esperar a exploração do seu novo projeto Git!</p>
</div>
<div class="paragraph">
<p>Caso opte por aguardar o reembalo, não tente executar benchmarks ou testes de desempenho até que o processo termine. o <code>fast-import</code> gera arquivos de pacotes otimizados que simplesmente nunca são vistos em situações de uso real.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reempacotando_dados_históricos">Reempacotando Dados Históricos</h3>
<div class="paragraph">
<p>Se você estiver reembalando dados importados muito antigos (por exemplo, mais antigos que no ano passado), considere gastar algum tempo extra da CPU e fornecer --window = 50 (ou superior) ao executar o <em>git repack</em>. Isso levará mais tempo, mas também produzirá um pacote menor. Você só precisa perder tempo uma vez e todos os usuários do seu projeto se beneficiarão do repositório menor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_incluir_algumas_mensagens_de_progresso">Incluir Algumas Mensagens de Progresso</h3>
<div class="paragraph">
<p>Para importar rapidamente, de vez em quando o seu front-end emite uma mensagem de <code>progresso</code>. O conteúdo das mensagens é totalmente livre, portanto, uma sugestão seria gerar a informação do mês e o ano atual cada vez que a data do commit atual passar para o próximo mês. Os seus usuários se sentirão melhor ao saber quanto do fluxo de dados foi processado.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_otimização_dos_pacotes">OTIMIZAÇÃO DOS PACOTES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ao compactar uma bolha, o <code>fast-import</code> sempre tenta "deltificar" a última bolha gravada. A menos que seja especificamente organizado pelo front-end, essa provavelmente não será uma versão anterior do mesmo arquivo, portanto o delta gerado não será o menor possível. O pacote do arquivo resultante será compactado, mas não será otimizado.</p>
</div>
<div class="paragraph">
<p>Os front-ends que têm acesso eficiente a todas as revisões de um único arquivo (lendo um arquivo RCS/CVS, v por exemplo) podem optar por fornecer todas as revisões desse arquivo como uma sequência de comandos consecutivos do <code>blob</code> (bolha). Isso permite que o <code>fast-import</code> "deltifique" as diferentes revisões dos arquivos, economizando espaço no arquivo do pacote final. As Marcações podem ser utilizadas para posterior identificação das revisões individuais dos arquivos durante uma sequência de comandos <code>commit</code>.</p>
</div>
<div class="paragraph">
<p>Os arquivos de pacotes criados pelo <code>fast-import</code> não incentivam bons padrões de acesso ao disco. Isso é cautilizado pela gravação dos dados do <code>fast-import</code> na ordem em que são recebidos na entrada padrão, enquanto o Git normalmente organiza os dados nos pacotes dos arquivos para fazer com que os dados mais recentes (dica atual) apareçam antes dos dados históricos. O Git também agrupa os commits acelerando o percurso de revisão através de uma melhor localidade do cache.</p>
</div>
<div class="paragraph">
<p>Por esse motivo é altamente recomendável que os usuários reembalem o repositório com o comando <code>git repack -a -d</code> após a conclusão do <code>fast-import</code>, permitindo que o Git reorganize os pacotes dos arquivos para um acesso mais rápido aos dados. Caso os deltas da bolha estejam abaixo do ideal (veja acima), a adição da opção <code>-f</code> para impor que todos os deltas sejam recalculados podendo reduzir significativamente o tamanho final do pacote do arquivo (30-50% menor pode ser bastante comum).</p>
</div>
<div class="paragraph">
<p>Em vez de executar o <code>git repack</code>, é possível também executar o <code>git gc --aggressive</code>, que também otimizará outras coisas após uma importação (refazer os pacotes refs soltos por exemplo). Como observado na seção "AGGRESSIVE" no <a href="git-gc.html">git-gc(1)</a> a opção <code>--aggressive</code> encontrará os novos deltas com a opção <code>-f</code> para <a href="git-repack.html">git-repack(1)</a>. Pelas razões descritas acima, a utilização da opção <code>--aggressive</code> após uma importação rápida, este é um dos poucos casos em que se sabe que vale a pena ser feito.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_utilização_de_memória">UTILIZAÇÃO DE MEMÓRIA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Há uma quantidade de fatores que afetam a quantidade de memória consumida pelo <code>fast-import</code> durante a execução de uma importação. Como as seções críticas do Git principal, o <code>fast-import</code> usa os seus próprios alocadores de memória para amortizar o consumo geral associadas ao "malloc". Na prática, o <code>fast-import</code> tende a amortizar o consumo geral do malloc para 0, devido ao uso de grandes alocações dos blocos.</p>
</div>
<div class="sect2">
<h3 id="_por_objeto">por objeto</h3>
<div class="paragraph">
<p>O <code>fast-import</code> mantém uma estrutura na memória para todos os objetos gravados nesta execução. Em um sistema de 32 bits a estrutura é de 32 bytes; em um sistema de 64 bits a estrutura é de 40 bytes (devido aos tamanhos maiores do ponteiro). Os objetos na tabela não são desalocados até que o <code>fast-import</code> termine. A importação de 2 milhões de objetos em um sistema de 32 bits exigirá aproximadamente 64 MiB de memória.</p>
</div>
<div class="paragraph">
<p>A tabela de objetos é na verdade uma "hashtable" (tabela hash) codificada no nome do objeto com o SHA-1. Essa configuração de armazenamento permite que o <code>fast-import</code> reutilize um objeto existente ou já gravado e evite gravar duplicatas no saída do arquivo de pacote. Em uma importação, as bolhas duplicadas são muito comuns, geralmente devido a mesclagem do ramo na origem.</p>
</div>
</div>
<div class="sect2">
<h3 id="_por_marcação">por marcação</h3>
<div class="paragraph">
<p>As marcações são armazenadas em uma origem esparsa, utilizando 1 ponteiro (4 bytes ou 8 bytes, dependendo do tamanho do ponteiro) por marcação. Embora a origem seja escassa, os front-end ainda são fortemente incentivados a usar marcas entre 1 e n, onde n é a quantidade total de marcações necessárias para essa importação.</p>
</div>
</div>
<div class="sect2">
<h3 id="_por_ramo">por ramo</h3>
<div class="paragraph">
<p>Os ramos são classificados como ativos e inativos. O uso de memória das duas classes é significativamente diferente.</p>
</div>
<div class="paragraph">
<p>As ramificações inativas são armazenadas em uma estrutura que usa entre 96 ou 120 bytes (sistemas de 32 ou 64 bits, respectivamente), mais o comprimento do nome do ramo (normalmente com menos de 200 bytes), por ramificação. O <code>fast-import</code> processa facilmente até 10.000 ramificações inativas com menos de 2 MiB de memória.</p>
</div>
<div class="paragraph">
<p>As ramificações ativas têm a mesma sobrecarga das ramificações inativas, mas também contêm as cópias de todas as árvores que foram modificadas recentemente nesta ramificação. Se a subárvore <code>include</code> não tenha sido modificada, desde o momento que a ramificação se tornou ativa, o seu conteúdo não será carregado na memória, mas o seu conteúdo será carregado na memória caso a subárvore <code>src</code> tenha sido modificada por um commit.</p>
</div>
<div class="paragraph">
<p>À medida que as ramificações ativas armazenam metadados sobre os arquivos existentes nessa ramificação, o tamanho do armazenamento na memória pode aumentar consideravelmente (veja abaixo).</p>
</div>
<div class="paragraph">
<p>Com base num algoritmo simples, o <code>fast-import</code> move automaticamente as ramificações ativas para a condição inativa utilizando um algorítimo simples. A cadeia LRU é atualizada a cada comando <code>commit</code>. A quantidade máxima de ramificações ativas pode se aumentado ou diminuído na linha de comando com a opção <code>--active-branches=</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_por_árvore_ativa">por árvore ativa</h3>
<div class="paragraph">
<p>As árvores (também conhecidas como diretórios) usam apenas 12 bytes de memória no topo da memória necessária para as suas entradas (consulte &#8220;por arquivo ativo&#8221; abaixo). O custo de uma árvore é praticamente 0, pois sua sobrecarga é amortizada pelas entradas de arquivo individuais.</p>
</div>
</div>
<div class="sect2">
<h3 id="_por_entrada_de_arquivo_ativa">por entrada de arquivo ativa</h3>
<div class="paragraph">
<p>Os arquivos (e os ponteiros para as subárvores) nas árvores ativas requerem 52 ou 64 bytes (plataformas de 32/64 bits) por entrada. Para economizar espaço, os nomes dos arquivos e as árvores são agrupados em uma tabela de cadeias comuns, permitindo que o nome do arquivo &#8220;Makefile&#8221; utilize apenas 16 bytes (depois de incluir a sobrecarga do cabeçalho da cadeia), não importa quantas vezes isso ocorra no projeto.</p>
</div>
<div class="paragraph">
<p>O LRU do ramo ativo, quando associado ao conjunto da cadeia de caracteres do nome do arquivo e ao carregamento lento das subárvores, permite que a eficiência da importação rápida dos projetos com mais de 2.000 ramificações e mais de 45.114 arquivos em um espaço de memória muito limitado (menos de 2,7 MiB por ramo ativo).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sinais">SINAIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enviar um <strong>SIGUSR1</strong> para o processo <em>git fast-import</em> encerra antes o arquivo do pacote atual, simulando um comando <code>checkpoint</code>. O operador mais impaciente pode usar esse recurso para espiar os objetos e as referências de uma importação em andamento, ao custo de um tempo de execução adicional e de uma pior compactação.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_veja_também">VEJA TAMBÉM</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="git-fast-export.html">git-fast-export(1)</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git">GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Parte do conjunto <a href="git.html">git(1)</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-10-31 17:59:02 +0100
</div>
</div>
</body>
</html>